(this["webpackJsonpdchan-client"]=this["webpackJsonpdchan-client"]||[]).push([[0],{193:function(e){e.exports=JSON.parse('{"a":"dchan-client","b":"0.0.3"}')},309:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"string","name":"jsonMessage","type":"string"}],"name":"Message","type":"event"},{"inputs":[{"internalType":"string","name":"jsonMessage","type":"string"}],"name":"message","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},340:function(e,t,n){},341:function(e,t,n){},357:function(e,t){},393:function(e,t){},395:function(e,t){},418:function(e,t){},420:function(e,t){},432:function(e,t){},433:function(e,t){},457:function(e,t){},460:function(e,t){},462:function(e,t){},560:function(e,t){},561:function(e,t){},638:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"postMessage",(function(){return G})),n.d(c,"removePost",(function(){return Z})),n.d(c,"reportBoard",(function(){return ee})),n.d(c,"reportPost",(function(){return ne})),n.d(c,"createBoard",(function(){return ae})),n.d(c,"removeBoard",(function(){return se})),n.d(c,"lockBoard",(function(){return oe})),n.d(c,"unlockBoard",(function(){return de})),n.d(c,"lockThread",(function(){return je})),n.d(c,"unlockThread",(function(){return he})),n.d(c,"pinThread",(function(){return pe})),n.d(c,"unpinThread",(function(){return xe})),n.d(c,"banPost",(function(){return ve})),n.d(c,"unbanUser",(function(){return ke})),n.d(c,"grantJanny",(function(){return we})),n.d(c,"revokeJanny",(function(){return Ne}));var a=n(1),r=n.n(a),s=n(144),i=(n(340),n(5)),o=(n(341),n(11)),l=n(38),d=n(51),b=n(651),j=n(2),u=n(6),h=n(0);function m(){return Object(h.jsx)(En,{title:Object(h.jsx)("div",{className:"",children:"Abuse (DMCA/CSAM)"}),collapsible:!1,children:Object(h.jsxs)("div",{className:"text-left p-4",children:[Object(h.jsxs)("div",{className:"p-2 text-xs",children:[Object(h.jsx)("strong",{children:"Disclaimer"}),Object(h.jsx)("br",{}),"This is a decentralized application: all media content is uploaded and retrieved via IPFS directly by the users.",Object(h.jsx)("br",{}),"It is important to understand that due to the nature of IPFS, it may not be possible to fully delete media once it has been uploaded.",Object(h.jsx)("br",{}),"When a file is uploaded to IPFS, it is distributed across the network and stored on multiple nodes, meaning that once a file has been added to IPFS, it can only be deleted by physically removing it from each node where it is stored, which is a complex and time-consuming process and not within the capabilities of this dapp's owners.",Object(h.jsx)("br",{}),"Therefore, users are advised to be cautious when uploading sensitive or personal information to IPFS.",Object(h.jsx)("br",{}),"No one can guarantee that media will be fully deleted or inaccessible even if it has been removed from this dapp.",Object(h.jsx)("br",{}),"By using IPFS, you understand and agree that you are solely responsible for the persistence and/or availability of the media uploaded to the network.",Object(h.jsx)("br",{}),"Users are strongly encouraged to use the dapp responsibly and to always consider the potential long-term consequences of the media they are uploading.",Object(h.jsx)("br",{})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"p-2",children:[Object(h.jsx)("strong",{children:"Abuse Policy"}),Object(h.jsx)("br",{}),"The policy regarding the handling of copyright infringement claims (DMCA) and of child sexual abuse material (CSAM) on this dapp is the following.",Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Copyright Infringement Claims"}),Object(h.jsx)("br",{}),"It is the users' responsibility to respect the intellectual property rights of others.",Object(h.jsx)("br",{}),"If you believe that your copyrighted work has been copied in a way that constitutes copyright infringement, please immediately report it via the built-in report feature and provide the following information to"," ",Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"mailto:dmca@dchan.network",children:"dmca@dchan.network"}),Object(h.jsx)("br",{}),Object(h.jsxs)("ul",{className:"list-disc p-4",children:[Object(h.jsx)("li",{children:"A physical or electronic signature of the copyright owner or a person authorized to act on their behalf;"}),Object(h.jsx)("li",{children:"Identification of the copyrighted work claimed to have been infringed;"}),Object(h.jsx)("li",{children:"Identification of the material that is claimed to be infringing or to be the subject of infringing activity;"}),Object(h.jsx)("li",{children:"Information reasonably sufficient to permit us to contact you, such as an address, telephone number, and, if available, an email address;"}),Object(h.jsx)("li",{children:"A statement that you have a good faith belief that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or the law;"}),Object(h.jsx)("li",{children:"A statement that the information in the notification is accurate, and under penalty of perjury, that you are authorized to act on behalf of the copyright owner."})]}),Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Child Sexual Abuse Material (CSAM) Reporting"}),Object(h.jsx)("br",{}),"If you encounter any such content on this dapp, please immediately report it via the built-in report feature and to"," ",Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"mailto:csam@dchan.network",children:"csam@dchan.network"}),".",Object(h.jsx)("br",{}),"There is a zero-tolerance policy for the distribution of child sexual abuse material (CSAM) and immediate action will be taken.",Object(h.jsx)("br",{}),"All known information about the uploader or distributor of the material will be provided to law enforcement.",Object(h.jsx)("br",{})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"p-2",children:["If you have any questions or concerns about the DMCA/CSAM policy, please contact us at"," ",Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"mailto:abuse@dchan.network",children:"abuse@dchan.network"}),"."]})]})})}var p=Object(d.b)([!1,function(){}],(function(){return Object(a.useState)(!1)}));function O(){var e=p(),t=Object(i.a)(e,2),n=t[0],c=t[1];return n?Object(h.jsx)(Ac,{onExit:function(){return c(!1)},children:Object(h.jsx)(m,{})}):null}var x=function(e){var t=e.className,n=void 0===t?"":t,c=p(),a=Object(i.a)(c,2)[1];return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("span",{className:"".concat(n," cursor-pointer dchan-link"),onClick:function(e){e.stopPropagation(),e.preventDefault(),a(!0)},children:"Abuse (DMCA/CSAM)"})})},f=n(307),v=function(e){var t=e.label,n=e.to,c=e.onClick,a=Object(l.g)().search;return Object(h.jsxs)("div",{children:["[",Object(h.jsx)(f.a,{className:"dchan-link",to:"".concat(a).concat(n),onClick:c,children:t}),"]"]})},g=function(){var e=Object(l.f)(),t=Object(a.useCallback)((function(){e.goBack()}),[e]);return Object(h.jsx)("button",{className:"dchan-link m-4",onClick:t,children:"Go back"})},k=n(7),y=n(308),w=n.n(y),A=n(309),N={contract:{address:"0x5a139ee9f56c4F24240aF366807490C171922b0E".toLowerCase()},subgraph:{endpoint:"https://api.thegraph.com/subgraphs/name/dchan-network/dchan-alpha-0"},ipfs:{endpoint:"https://ipfs.dchan.network/ipfs/"},content_view:{page_size:25,board_default_view_mode:"catalog",board_sort_threads_by:"lastBumpedAt",board_sort_direction:"desc"},content_filter:{score_threshold:1,show_below_threshold:!1},autorefresh:{enabled:!0,seconds:10}},C="0x".concat(137..toString(16)),B={chainId:C,chainName:"Polygon (Matic) Mainnet",rpcUrls:["https://polygon-rpc.com","https://rpc-mainnet.matic.network","https://matic-mainnet.chainstacklabs.com","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet-full-rpc.bwarelabs.com","https://matic-mainnet-archive-rpc.bwarelabs.com"],iconUrls:["https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0/logo.png"],blockExplorerUrls:["https://polygonscan.com/"],nativeCurrency:{name:"Matic Token",symbol:"MATIC",decimals:18}},T=[-32603,4902];function S(){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:C}]});case 3:e.next=12;break;case 5:if(e.prev=5,e.t0=e.catch(0),!T.includes(e.t0.code)){e.next=11;break}E(),e.next=12;break;case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function E(){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"wallet_addEthereumChain",params:[B]});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return JSON.stringify({ns:"dchan",v:0,op:e,data:t})}function P(e,t,n){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(Object(j.a)().mark((function e(t,n,c){var a,r,s,o,l,d,b;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=H(),r=new a.eth.Contract(A,N.contract.address),e.next=4,Promise.all([r.methods.message(D(t,n)),q(c),$()]);case 4:return s=e.sent,o=Object(i.a)(s,3),l=o[0],d=o[1],b=o[2],e.abrupt("return",l.send({from:c,nonce:d,gasPrice:b}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,n){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(Object(j.a)().mark((function e(t,n,c){var a,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=H(),r=c*Math.pow(10,18),e.abrupt("return",a.eth.sendTransaction({from:t,to:n,value:r}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return new w.a(window.ethereum||window.web3.currentProvider)}function R(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(u.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H().eth.getBalance(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return z.apply(this,arguments)}function z(){return(z=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H().eth.getGasPrice().then(Number).then((function(e){return Math.floor(1.2*e).toString()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H().eth.getTransactionCount(t).then((function(e){return e+1})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return!!e&&("0x89"===e||137===e)}var U=n(24);function V(e,t){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(Object(j.a)().mark((function e(t,n){var c,a,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=31;break}if(!(c=t[0])){e.next=31;break}return n({progress:"Uploading image..."}),e.prev=4,e.t0=fetch,e.t1={"Content-Type":"application/octet-stream"},e.t2=Uint8Array,e.next=10,c.arrayBuffer();case 10:return e.t3=e.sent,e.t4=new e.t2(e.t3),e.t5={method:"POST",headers:e.t1,body:e.t4},e.next=15,(0,e.t0)("https://ipfs.dchan.network/ipfs/",e.t5);case 15:if(a=e.sent,console.log("ipfs.upload",{ipfsResponse:a}),!(r=a.headers.get("ipfs-hash"))){e.next=23;break}return n({success:"File uploaded"}),e.abrupt("return",{ipfs:{hash:r}});case 23:n({error:"File upload failed!"});case 24:e.next=31;break;case 26:return e.prev=26,e.t6=e.catch(4),console.error({ipfsUpload:e.t6}),n({error:"File upload failed!"}),e.abrupt("return");case 31:case"end":return e.stop()}}),e,null,[[4,26]])})))).apply(this,arguments)}function G(e,t,n){return X.apply(this,arguments)}function X(){return(X=Object(u.a)(Object(j.a)().mark((function e(t,n,c){var a,r,s,i,o,l,d,b,u,h,m;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.board,r=t.thread,s=t.comment,i=t.name,o=t.subject,l=t.sage,d=t.nonce,!(t.file.length>0)){e.next=12;break}return c({progress:"Uploading file..."}),e.next=5,V(t.file,c);case 5:if(!(b=e.sent)){e.next=10;break}c({progress:"Uploaded"}),e.next=12;break;case 10:return c({error:"Upload failed"}),e.abrupt("return");case 12:return u={comment:s,name:i,nonce:d},b&&(h=t.file[0].name,u.file=Object(k.a)(Object(k.a)({},b),{},{name:h,is_nsfw:t.is_nsfw,is_spoiler:t.is_spoiler})),r?u.thread=r:u.subject=o,a&&(u.board=a),l&&(u.sage=!0),c({progress:"Waiting tx confirmation..."}),e.next=20,P("post:create",u,n[0]);case 20:return m=e.sent,c({success:"Sent ;)"}),e.abrupt("return",m);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,n){return K.apply(this,arguments)}function K(){return(K=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Removing..."}),e.next=4,P("post:remove",{id:t},n[0]);case 4:c({success:"Removed"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ee(e,t,n){return te.apply(this,arguments)}function te(){return(te=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Reporting..."}),e.next=4,P("board:report",{id:t},n[0]);case 4:c({success:"Reported"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ne(e,t,n){return ce.apply(this,arguments)}function ce(){return(ce=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Reporting..."}),e.next=4,P("post:report",{id:t},n[0]);case 4:c({success:"Reported"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ae(e,t,n){return re.apply(this,arguments)}function re(){return(re=Object(u.a)(Object(j.a)().mark((function e(t,n,c){var a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Creating..."}),e.next=4,P("board:create",t,n[0]);case 4:return a=e.sent,c({success:"Created"}),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function se(e,t,n){return ie.apply(this,arguments)}function ie(){return(ie=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Removing..."}),e.next=4,P("board:remove",{id:t},n[0]);case 4:c({success:"Removed"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function oe(e,t,n){return le.apply(this,arguments)}function le(){return(le=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Locking..."}),e.next=4,P("board:lock",{id:t},n[0]);case 4:c({success:"Locked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function de(e,t,n){return be.apply(this,arguments)}function be(){return(be=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Unlocking..."}),e.next=4,P("board:unlock",{id:t},n[0]);case 4:c({success:"Unlocked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function je(e,t,n){return ue.apply(this,arguments)}function ue(){return(ue=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Locking..."}),e.next=4,P("thread:lock",{id:t},n[0]);case 4:c({success:"Locked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function he(e,t,n){return me.apply(this,arguments)}function me(){return(me=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Unlocking..."}),e.next=4,P("thread:unlock",{id:t},n[0]);case 4:c({success:"Unlocked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function pe(e,t,n){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Pinning..."}),e.next=4,P("thread:pin",{id:t},n[0]);case 4:c({success:"Pinned"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function xe(e,t,n){return fe.apply(this,arguments)}function fe(){return(fe=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Unpinning..."}),e.next=4,P("thread:unpin",{id:t},n[0]);case 4:c({success:"Unpinned"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ve(e,t,n){return ge.apply(this,arguments)}function ge(){return(ge=Object(u.a)(Object(j.a)().mark((function e(t,n,c){var a,r,s,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c({progress:"Banning..."}),a=window.prompt("How many seconds?"),r=parseInt(a||""),!isNaN(r)){e.next=7;break}return c({error:"Not a number: ".concat(a)}),e.abrupt("return");case 7:if(s=window.prompt("Reason?"),i=U.DateTime.fromSeconds(U.DateTime.now().toSeconds()+r),!window.confirm("Banning until ".concat(i.toISO()))){e.next=15;break}return e.next=12,P("post:ban",{id:t,seconds:r,reason:s},n[0]);case 12:c({success:"Banned"}),e.next=16;break;case 15:c("Canceled");case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function ke(e,t,n){return ye.apply(this,arguments)}function ye(){return(ye=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Unbanning..."}),e.next=4,P("user:unban",{id:t},n[0]);case 4:c({success:"Unbanned"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function we(e,t,n){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Granting janny..."}),e.next=4,P("janny:grant",t,n[0]);case 4:c({success:"Granted"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ne(e,t,n){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(u.a)(Object(j.a)().mark((function e(t,n,c){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Revoking janny..."}),e.next=4,P("janny:revoke",t,n[0]);case 4:c({success:"Revoked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var Be,Te,Se,Ie,Ee,_e,De,Pe,Me,Le,Fe,He,Re,Qe,$e,ze,qe,We,Ye,Ue,Ve,Je,Ge,Xe,Ze,Ke,et,tt,nt,ct,at,rt,st,it,ot,lt,dt,bt,jt,ut,ht,mt=n(109),pt=function(){return Object(mt.a)("dchan.network.eula.accepted",{defaultValue:!1})},Ot=function(e,t){var n=t.watch,c=t.setValue,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=r.storage,o=void 0===s?window.localStorage:s,l=r.include,d=void 0===l?[]:l,b=r.onDataRestored,j=void 0===b?void 0:b,u=r.validate,h=void 0!==u&&u,m=r.dirty,p=void 0!==m&&m,O=Object(a.useState)(!1),x=Object(i.a)(O,2),f=x[0],v=x[1],g=n(d);return Object(a.useEffect)((function(){var t=o.getItem(e);if(!f&&t){var n=JSON.parse(t),a={};Object.keys(n).forEach((function(e){a[e]=n[e];var t=n[e];c(e,t,{shouldValidate:h,shouldDirty:!0})})),j&&j(a),v(!0)}}),[p,d,o,j,c,h,e,f,v]),Object(a.useEffect)((function(){if(g.filter((function(e){return!!e})).length>0){var t={};g.forEach((function(e,n){t[d[n]]=e})),o.setItem(e,JSON.stringify(t))}})),{clear:function(){return o.removeItem(e)}}},xt=n(76),ft=Object(d.b)({publish:xt.publish,subscribe:xt.subscribe,unsubscribe:xt.unsubscribe},(function(){return{publish:xt.publish,subscribe:xt.subscribe,unsubscribe:xt.unsubscribe}})),vt=n(8),gt=n(654),kt=Object(gt.a)(Be||(Be=Object(vt.a)(["\n  query BlockByDate($timestampMin: String!, $timestampMax: String!) {\n    blocks(first: 1, orderBy: timestamp, orderDirection: asc,\n            where: {timestamp_gte: $timestampMin, timestamp_lte: $timestampMax}) {\n        timestamp\n        number\n    }\n}\n"]))),yt=Object(gt.a)(Te||(Te=Object(vt.a)(["\n  query BlockByNumber($number: BigInt!) {\n    blocks(first: 1, orderBy: timestamp, orderDirection: desc,\n            where: {number_lte: $number}) {\n        timestamp\n        number\n    }\n}\n"]))),wt=Object(gt.a)(Se||(Se=Object(vt.a)(["\n  query BlockNext($number: BigInt!) {\n    blocks(first: 1, orderBy: timestamp, orderDirection: asc,\n            where: {number_gt: $number}) {\n        timestamp\n        number\n    }\n}\n"]))),At=Object(gt.a)(Ie||(Ie=Object(vt.a)(["\n  query BlockPrevious($number: BigInt!) {\n    blocks(first: 1, orderBy: timestamp, orderDirection: desc,\n            where: {number_lt: $number}) {\n        timestamp\n        number\n    }\n}\n"]))),Nt=Object(gt.a)(Ee||(Ee=Object(vt.a)(["\n  query BlockRange {\n    last: blocks(first: 1, orderBy: timestamp, orderDirection: desc) {\n        timestamp\n        number\n    }\n    first: blocks(first: 1, orderBy: timestamp, orderDirection: asc) {\n        timestamp\n        number\n    }\n  }\n"]))),Ct=Object(gt.a)(_e||(_e=Object(vt.a)(["\n  fragment User on User{\n    id\n    b58id\n    address\n  }\n"]))),Bt=Object(gt.a)(De||(De=Object(vt.a)(["\n  ","\n\n  fragment Post on Post{\n    id\n    n\n    from {\n      ...User\n    }\n    thread {\n      board {\n        id\n        name\n        isNsfw\n      }\n      id\n      n\n      op {\n        from {\n          ...User\n        }\n      }\n    }\n    board {\n      id\n      name\n      isNsfw\n    }\n    name\n    comment\n    image {\n      id\n      name\n      ipfsHash\n      score\n      isSpoiler\n      isNsfw\n    }\n    createdAt\n    createdAtBlock {\n      timestamp\n      number\n    }\n    bans {\n      ban {\n        reason\n        expiresAt\n      }\n    }\n    score\n    sage\n  }\n"])),Ct),Tt=Object(gt.a)(Pe||(Pe=Object(vt.a)(["\n  ","\n  ","\n\n  fragment Thread on Thread{\n    id\n    n\n    isPinned\n    isLocked\n    from {\n      ...User\n    }\n    op {\n      ...Post\n    }\n    board {\n      id\n      name\n      isNsfw\n    }\n    subject\n    replyCount\n    imageCount\n    score\n    createdAt\n    createdAtBlock {\n      timestamp\n      number\n    }\n  }\n"])),Bt,Ct),St=Tt,It=Object(gt.a)(Me||(Me=Object(vt.a)(["\n  ","\n  ",'\n  \n  query BoardArchive($board: String!, $block: Int!, $orderDirection: String!, $limit: Int!, $skip: Int!, $cutoff: Int!) {\n    threads(where: {lastBumpedAt_lt: $cutoff, board: $board, isPinned: false}, orderBy: "lastBumpedAt", orderDirection: $orderDirection, first: $limit, skip: $skip, block: {number: $block}) {\n      ...Thread\n    }\n  }\n'])),St,Bt),Et=Object(gt.a)(Le||(Le=Object(vt.a)(["\n  ","\n  ","\n  \n  query BoardCatalog($board: String!, $block: Int!, $orderBy: String!, $orderDirection: String!, $limit: Int!, $skip: Int!, $cutoff: Int!) {\n    pinned: threads(where: {board: $board, isPinned: true}, orderBy: lastBumpedAt, orderDirection: $orderDirection, block: {number: $block}) {\n      ...Thread\n    }\n    threads(where: {lastBumpedAt_gt: $cutoff, board: $board, isPinned: false}, orderBy: $orderBy, orderDirection: $orderDirection, first: $limit, skip: $skip, block: {number: $block}) {\n      ...Thread\n    }\n  }\n"])),St,Bt),_t=Object(gt.a)(Fe||(Fe=Object(vt.a)(["\n  ","\n\n  fragment Board on Board{\n    id\n    title\n    threadCount\n    postCount\n    name\n    isLocked\n    isNsfw\n    createdAt\n    createdAtBlock {\n      timestamp\n      number\n    }\n    lastBumpedAtBlock {\n      timestamp\n      number\n    }\n    jannies {\n      user {\n        ...User\n      }\n    }\n  }\n"])),Ct),Dt=Object(gt.a)(He||(He=Object(vt.a)(["\n  ","\n  \n  query BoardGet($board: String!, $block: Int!) {\n    boardRef(id: $board, block: {number: $block}) {\n      board {\n        ...Board\n      }\n    }\n    board(id: $board, block: {number: $block}) {\n      ...Board\n    }\n  }\n"])),_t),Pt=(Object(gt.a)(Re||(Re=Object(vt.a)(["\n  fragment MostPopularByBlockBoard on Board {\n    id\n    title\n    postCount\n    name\n    isLocked\n    isNsfw\n  }\n\n  query Boards($block: Int!) {\n    boards(orderBy: postCount, orderDirection: desc, first: 10, block: {number: $block}) {\n      ...MostPopularByBlockBoard\n    }\n  }\n"]))),Object(gt.a)(Qe||(Qe=Object(vt.a)(["\n  fragment MostPopularBoard on Board {\n    id\n    title\n    postCount\n    name\n    isLocked\n    isNsfw\n  }\n\n  query Boards {\n    boards(orderBy: postCount, orderDirection: desc, first: 10) {\n      ...MostPopularBoard\n    }\n  }\n"])))),Mt=Object(gt.a)($e||($e=Object(vt.a)(["\n  ","\n\n  query BoardsSearch($searchName: String!, $searchTitle: String!, $block: Int) {\n    searchByTitle: boardSearch(text: $searchTitle, block: {number: $block}) {\n      ...Board\n    }\n    searchByName: boards(where: {name: $searchName}, block: {number: $block}) {\n      ...Board\n    }\n  }\n"])),_t),Lt=Object(gt.a)(ze||(ze=Object(vt.a)(["\n  ","\n\n  query BoardsSearch($searchName: String!, $searchTitle: String!) {\n    searchByTitle: boardSearch(text: $searchTitle) {\n      ...Board\n    }\n    searchByName: boards(where: {name: $searchName}) {\n      ...Board\n    }\n  }\n"])),_t),Ft=Object(gt.a)(qe||(qe=Object(vt.a)(["\n  ",'\n  \n  query Boards($block: Int, $limit: Int) {\n    mostPopular: boards(orderBy: postCount, orderDirection: desc, where: {score_gt: "900000000"}, block: {number: $block}, first: $limit) {\n      ...Board\n    }\n    lastBumped: boards(orderBy: lastBumpedAt, orderDirection: desc, where: {score_gt: "900000000"}, block: {number: $block}, first: $limit) {\n      ...Board\n    }\n    lastCreated: boards(orderBy: createdAt, orderDirection: desc, where: {score_gt: "900000000"}, block: {number: $block}, first: $limit) {\n      ...Board\n    }\n  }\n'])),_t),Ht=Object(gt.a)(We||(We=Object(vt.a)(["\n  ",'\n  \n  query Boards($limit: Int) {\n    mostPopular: boards(orderBy: postCount, orderDirection: desc, where: {score_gt: "900000000"}, first: $limit) {\n      ...Board\n    }\n    lastBumped: boards(orderBy: lastBumpedAt, orderDirection: desc, where: {score_gt: "900000000"}, first: $limit) {\n      ...Board\n    }\n    lastCreated: boards(orderBy: createdAt, orderDirection: desc, where: {score_gt: "900000000"}, first: $limit) {\n      ...Board\n    }\n  }\n'])),_t),Rt=Object(gt.a)(Ye||(Ye=Object(vt.a)(["\n  query ChanStatus($id: String!) {\n    chanStatus(id: $id) {\n      isLocked\n    }\n  }\n"]))),Qt=Object(gt.a)(Ue||(Ue=Object(vt.a)(["\n  fragment Client on Client {\n    id\n    ipfsHash\n    version\n    publishedAtBlock {\n      timestamp\n      number\n    }\n  }\n"]))),$t=(Object(gt.a)(Ve||(Ve=Object(vt.a)(["\n  ",'\n\n  query IPFSClients {\n    dev: clients(first: 1, orderBy: publishedAt, orderDirection: desc, where: {channel: ""}) {\n      ...Client\n    }\n    stable: clients(first: 1, orderBy: publishedAt, orderDirection: desc, where: {channel: "stable"}) {\n      ...Client\n    }\n  }  \n'])),Qt),Object(gt.a)(Je||(Je=Object(vt.a)(["\n  ",'\n\n  query PostsGetLast($block: Int!, $limit: Int = 10, $board: String = "", $skip: Int = 0) {\n    posts(orderBy: createdAt, orderDirection: desc, first: $limit, skip: $skip, where: {sage: false, board_starts_with: $board, board_ends_with: $board}, block: {number: $block}) {\n      ...Post\n    }\n  }\n'])),Bt)),zt=Object(gt.a)(Ge||(Ge=Object(vt.a)(["\n  ",'\n\n  query PostsGetLast($limit: Int = 10, $board: String = "", $skip: Int = 0) {\n    posts(orderBy: createdAt, orderDirection: desc, first: $limit, skip: $skip, where: {sage: false, board_starts_with: $board, board_ends_with: $board}) {\n      ...Post\n    }\n  }\n'])),Bt),qt=Object(gt.a)(Xe||(Xe=Object(vt.a)(["\n  ",'\n  \n  query PostSearch($search: String!, $limit: Int = 10, $board: String = "", $skip: Int = 0, $block: Int!) {\n    postSearch(text: $search, orderBy: createdAt, orderDirection: desc, block: {number: $block}, first: $limit, skip: $skip) {\n      ...Post\n    }\n  }\n'])),Bt),Wt=Object(gt.a)(Ze||(Ze=Object(vt.a)(["\n  ",'\n  \n  query PostSearch($search: String!, $limit: Int = 10, $board: String = "", $skip: Int = 0) {\n    postSearch(text: $search, orderBy: createdAt, orderDirection: desc, first: $limit, skip: $skip) {\n      ...Post\n    }\n  }\n'])),Bt),Yt=Object(gt.a)(Ke||(Ke=Object(vt.a)(["\n  ","\n  ","\n  ","\n\n  query SearchById($id: String!, $block: Int!) {\n    boardRef(id: $id, block: {number: $block}) {\n      board {\n        ...Board\n      }\n    }\n    threadRef(id: $id, block: {number: $block}) {\n      thread {\n        ...Thread\n      }\n    }\n    postRef(id: $id, block: {number: $block}) {\n      post {\n        ...Post\n      }\n    }\n    board(id: $id, block: {number: $block}) {\n      ...Board\n    }\n    thread(id: $id, block: {number: $block}) {\n      ...Thread\n    }\n    post(id: $id, block: {number: $block}) {\n      ...Post\n    }\n    user(id: $id, block: {number: $block}) {\n      id\n    }\n  }\n"])),_t,St,Bt),Ut=Object(gt.a)(et||(et=Object(vt.a)(["\n  ","\n  ","\n  ","\n\n  query SearchById($id: String!) {\n    boardRef(id: $id) {\n      board {\n        ...Board\n      }\n    }\n    threadRef(id: $id) {\n      thread {\n        ...Thread\n      }\n    }\n    postRef(id: $id) {\n      post {\n        ...Post\n      }\n    }\n    board(id: $id) {\n      ...Board\n    }\n    thread(id: $id) {\n      ...Thread\n    }\n    post(id: $id) {\n      ...Post\n    }\n    user(id: $id) {\n      id\n    }\n  }\n"])),_t,St,Bt),Vt=Object(gt.a)(tt||(tt=Object(vt.a)(["\n  ","\n\n  fragment SearchBoard on Board {\n    id\n    name\n  }\n\n  fragment SearchThread on Thread {\n    id\n    n\n    board {\n      ...SearchBoard\n    }\n    op {\n      from {\n        ...User\n      }\n    }\n  }\n\n  fragment SearchPost on Post {\n    id\n    n\n    from {\n      id\n    }\n    board {\n      ...SearchBoard\n    }\n    thread {\n      ...SearchThread\n    }\n  }\n\n  fragment SearchPostRef on PostRef {\n    id\n    post {\n      ...SearchPost\n    }\n  }\n"])),Ct),Jt={query_ref:Object(gt.a)(nt||(nt=Object(vt.a)(["\n  ","\n  query SearchByRef($id: String!, $post_n: BigInt!, $post_ref: String!) {\n    threads(where: { board: $id, n: $post_n }) {\n      ...SearchThread\n    }\n    posts(where: { from: $id, n: $post_n }) {\n      ...SearchPost\n    }\n    postRef(id: $post_ref) {\n      ...SearchPostRef\n    }\n  }\n"])),Vt),query_ref_by_block:Object(gt.a)(ct||(ct=Object(vt.a)(["\n  ","\n  query SearchByRef(\n    $id: String!\n    $post_n: BigInt!\n    $post_ref: String!\n    $block: Int!\n  ) {\n    threads(where: { board: $id, n: $post_n }, block: { number: $block }) {\n      ...Thread\n    }\n    posts(where: { from: $id, n: $post_n }, block: { number: $block }) {\n      ...Post\n    }\n    postRef(id: $post_ref, block: { number: $block }) {\n      ...PostRef\n    }\n  }\n"])),Vt)},Gt=Object(gt.a)(at||(at=Object(vt.a)(["\n  ","\n  ","\n  ","\n  \n  query Thread($board: String!, $n: String!) {\n    board(id: $board) {\n      ...Board\n    }\n    posts(first: 1, where: {board: $board, n: $n}) {\n      ...Post\n    }\n    threads(first: 1, where: {board: $board, n: $n}) {\n      ...Thread\n      replies(orderBy: n) {\n        ...Post\n      }\n    }\n  }\n"])),_t,St,Bt),Xt=Object(gt.a)(rt||(rt=Object(vt.a)(["\n  ","\n  ","\n  ","\n  \n  query Thread($board: String!, $n: String!, $block: Int!) {\n    board(id: $board) {\n      ...Board\n    }\n    posts(first: 1, where: {board: $board, n: $n}, block: {number: $block}) {\n      ...Post\n    }\n    threads(first: 1, where: {board: $board, n: $n}, block: {number: $block}) {\n      ...Thread\n      replies(orderBy: n) {\n        ...Post\n      }\n    }\n  }\n"])),_t,St,Bt),Zt=(Object(gt.a)(st||(st=Object(vt.a)(["\n  ","\n\n  query FavoriteThreads($ids: [String!]!, $block: Int!) {\n    threads(orderBy: lastBumpedAt, orderDirection: desc, where: {id_in: $ids}, block: {number: $block}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: desc) {\n        ...Post\n      }\n    }\n  }\n"])),St),Object(gt.a)(it||(it=Object(vt.a)(["\n  ","\n\n  query FavoriteThreads($ids: [String!]!) {\n    threads(orderBy: lastBumpedAt, orderDirection: desc, where: {id_in: $ids}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: desc) {\n        ...Post\n      }\n    }\n  }\n"])),St)),Kt=(Object(gt.a)(ot||(ot=Object(vt.a)(["\n  ","\n\n  query ThreadsListLatestBlock($block: Int!, $board: String!) {\n    threads(orderBy: createdAt, orderDirection: desc, first: 10, where: {board_starts_with: $board, board_ends_with: $board}, block: {number: $block}) {\n      ...Thread\n    }\n  }\n"])),St),Object(gt.a)(lt||(lt=Object(vt.a)(["\n  ","\n\n  query ThreadsListLatest($board: String!) {\n    threads(orderBy: createdAt, orderDirection: desc, first: 10, where: {board_starts_with: $board, board_ends_with: $board}) {\n      ...Thread\n    }\n  }\n"])),St),Object(gt.a)(dt||(dt=Object(vt.a)(["\n  ","\n\n  query ThreadsListMostPopular($cutoff: Int!, $board: String!, $block: Int!) {\n    threads(orderBy: replyCount, orderDirection: desc, first: 10, where: {lastBumpedAt_gt: $cutoff, board_starts_with: $board, board_ends_with: $board}, block: {number: $block}) {\n      ...Thread\n    }\n  }\n"])),St),Object(gt.a)(bt||(bt=Object(vt.a)(["\n  ","\n\n  query ThreadsListMostPopular($cutoff: Int!, $board: String!) {\n    threads(orderBy: replyCount, orderDirection: desc, first: 10, where: {lastBumpedAt_gt: $cutoff, board_starts_with: $board, board_ends_with: $board}) {\n      ...Thread\n    }\n  }\n"])),St),Object(gt.a)(jt||(jt=Object(vt.a)(["\n  ",'\n  \n  query ThreadsTabs($cutoff: Int!, $block: Int!, $board: String = "", $limit: Int = 10) {\n    mostPopular: threads(orderBy: replyCount, orderDirection: desc, first: $limit, where: {lastBumpedAt_gt: $cutoff, score_gt: "900000000", board_starts_with: $board, board_ends_with: $board}, block: {number: $block}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: desc) {\n        ...Post\n      }\n    }\n    lastBumped: threads(orderBy: lastBumpedAt, orderDirection: desc, first: $limit, where: {score_gt: "900000000", board_starts_with: $board, board_ends_with: $board}, block: {number: $block}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: desc) {\n        ...Post\n      }\n    }\n    lastCreated: threads(orderBy: createdAt, orderDirection: desc, first: $limit, where: {score_gt: "900000000", board_starts_with: $board, board_ends_with: $board}, block: {number: $block}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: desc) {\n        ...Post\n      }\n    }\n  }\n'])),Tt)),en=Object(gt.a)(ut||(ut=Object(vt.a)(["\n  ",'\n  \n  query ThreadsTabs($cutoff: Int!, $board: String = "", $limit: Int = 10) {\n    mostPopular: threads(orderBy: replyCount, orderDirection: desc, first: $limit, where: {lastBumpedAt_gt: $cutoff, score_gt: "900000000", board_starts_with: $board, board_ends_with: $board}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: desc) {\n        ...Post\n      }\n    }\n    lastBumped: threads(orderBy: lastBumpedAt, orderDirection: desc, first: $limit, where: {score_gt: "900000000", board_starts_with: $board, board_ends_with: $board}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: desc) {\n        ...Post\n      }\n    }\n    lastCreated: threads(orderBy: createdAt, orderDirection: desc, first: $limit, where: {score_gt: "900000000", board_starts_with: $board, board_ends_with: $board}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: desc) {\n        ...Post\n      }\n    }\n  }\n'])),St),tn=Object(gt.a)(ht||(ht=Object(vt.a)(["\n  ","\n  query User($address: String!) {\n    admin(id: $address) {\n      id\n    }\n    user(id: $address) {\n      ...User\n      jannies {\n        board {\n          id\n        }\n      }\n    }\n  }\n"])),Ct),nn=n(657),cn=n(653),an=n(655),rn=new cn.a({uri:N.subgraph.endpoint,cache:new an.a}),sn=n(62);var on=Object(d.b)({firstBlock:void 0,lastBlock:void 0,currentBlock:void 0,travelToBlock:function(e){},travelToDateTime:function(e){},travelToBlockNumber:function(e){},travelToPreviousBlock:function(){},travelToNextBlock:function(){},travelToPresent:function(){},isTimeTraveling:!1,timeTraveledToBlockNumber:0,timeTraveledToDateTime:U.DateTime.now()},(function(){var e=rn,t=Object(l.f)(),n=Object(l.g)(),c=function(){var e,t,n=Object(nn.a)(Nt,{pollInterval:1e4});return{firstBlock:null===(e=n.data)||void 0===e?void 0:e.first[0],lastBlock:null===(t=n.data)||void 0===t?void 0:t.last[0]}}(),r=c.firstBlock,s=c.lastBlock,o=Object(a.useState)(),d=Object(i.a)(o,2),b=d[0],j=d[1],u=Object(a.useState)(),h=Object(i.a)(u,2),m=h[0],p=h[1],O=Object(a.useState)(),x=Object(i.a)(O,2),f=x[0],v=x[1],g=Object(a.useState)(!1),k=Object(i.a)(g,2),y=k[0],w=k[1];Object(a.useEffect)((function(){b?(p(Number(null===b||void 0===b?void 0:b.number)),v(U.DateTime.fromSeconds(Number(null===b||void 0===b?void 0:b.timestamp))),w(!0)):(p(void 0),v(void 0),w(!1))}),[b,s,p,v,w]);var A=Object(a.useCallback)((function(e){var t,n,c=null===(t=e.data)||void 0===t||null===(n=t.blocks)||void 0===n?void 0:n[0];c&&j(c)}),[j]),N=Object(a.useCallback)((function(){j(void 0)}),[j]),C=Object(a.useCallback)((function(t){var n,c;(n=e,c=t,n.query({query:kt,variables:{timestampMin:"".concat(null===c||void 0===c?void 0:c.toSeconds().toFixed(0)),timestampMax:"".concat((((null===c||void 0===c?void 0:c.toSeconds())||0)+1e6).toFixed(0))}})).then(A)}),[A,e]),B=Object(a.useCallback)((function(e){j(e),C(U.DateTime.fromSeconds(parseInt(e.timestamp)))}),[j,C]),T=Object(a.useCallback)((function(t){t?function(e,t){return e.query({query:yt,variables:{number:t.toString()}})}(e,t).then(A):N()}),[A,N,e]),S=Object(a.useCallback)((function(){var t,n,c=b||s;c&&(t=e,n=c.number,t.query({query:At,variables:{number:n}})).then(A)}),[A,b,s,e]),I=Object(a.useCallback)((function(){var t,n;null!==b&&void 0!==b&&b.number&&(t=e,n=b.number,t.query({query:wt,variables:{number:n}})).then(A)}),[A,b,e]);return Object(a.useEffect)((function(){var e=t.location,n=e.search,c=e.pathname,a=c+n,r=c+(n=b?n.match(/[?&]block=/)?n.replace(/([?&]block=)(\d)+/,"$1".concat(b.number)):n.includes("?")?"".concat(n,"&block=").concat(b.number):"?block=".concat(b.number):n.replace(/[?&]block=(\d)+/,""));r!==a&&t.replace(r)}),[t,b]),Object(a.useEffect)((function(){var e=Object(sn.parse)(n.search),t=parseInt("".concat(e.block))||void 0;t&&T(t)}),[n,T]),{firstBlock:r,lastBlock:s,currentBlock:b,travelToBlock:B,travelToDateTime:C,travelToBlockNumber:T,travelToPreviousBlock:S,travelToNextBlock:I,travelToPresent:N,isTimeTraveling:y,timeTraveledToBlockNumber:m,timeTraveledToDateTime:f}})),ln=n(652),dn=n(328),bn=n(321),jn=n.n(bn),un=Object(d.b)({provider:void 0,chainId:void 0,accounts:[],balance:void 0,loadWeb3Modal:function(){var e=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logoutOfWeb3Modal:function(){var e=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},(function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)([]),b=Object(i.a)(d,2),h=b[0],m=b[1],p=Object(a.useState)(),O=Object(i.a)(p,2),x=O[0],f=O[1],v=Object(a.useState)(),g=Object(i.a)(v,2),k=g[0],y=g[1],w=Object(a.useMemo)((function(){return new jn.a({network:"matic",cacheProvider:!0,providerOptions:{walletconnect:{package:dn.a}}})}),[]);Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(t=null===h||void 0===h?void 0:h[0])?R(t).then((function(e){return f(parseInt(e)/Math.pow(10,18))})):f(void 0)}catch(n){console.error({refresh:n})}$().then((function(e){y(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=setInterval(e,1e4);return e(),function(){return clearInterval(t)}}),[h]);var A=Object(a.useCallback)(Object(u.a)(Object(j.a)().mark((function e(){var t,n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.connect();case 3:return t=e.sent,c(new ln.a(t)),l(window.ethereum.chainId),e.next=8,window.ethereum.request({method:"eth_accounts"});case 8:return n=e.sent,m(n),window.ethereum.on("accountsChanged",(function(e){0===e.length&&c(void 0),m(e)})),window.ethereum.on("chainChanged",(function(e){l(e)})),e.abrupt("return",{success:!0});case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{success:!1,error:e.t0});case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),[w]),N=Object(a.useCallback)(Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.clearCachedProvider();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),[w]);return{provider:n,chainId:o,accounts:h,balance:x,gasPrice:k,loadWeb3Modal:A,logoutOfWeb3Modal:N}})),hn=un,mn=function(e){var t=hn().accounts,n=null!==e&&void 0!==e?e:t.length>0?t[0]:"",c=Object(nn.a)(tn,{variables:{address:n},skip:!n}),r=c.loading,s=c.data,i=Object(a.useCallback)((function(){var e;if(!r)return!(null===s||void 0===s||null===(e=s.admin)||void 0===e||!e.id)}),[r,s]),o=Object(a.useCallback)((function(e){var t,n;if(!r)return i()||!(null===s||void 0===s||null===(t=s.user)||void 0===t||null===(n=t.jannies)||void 0===n||!n.filter((function(t){var n=t.board;return(null===n||void 0===n?void 0:n.id)===e})).length)}),[i,r,s]);return Object(k.a)(Object(k.a)({},c),{},{isJannyOf:o,isAdmin:i})},pn=n(46),On=n(25),xn=n.n(On),fn=Object(d.b)({},(function(){var e=Object(mt.a)("dchan.network.favorites",{defaultValue:{}}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useCallback)((function(e){c(Object(On.omit)(n||{},e.id))}),[n,c]),s=Object(a.useCallback)((function(e){c(Object(k.a)(Object(k.a)({},n),{},Object(pn.a)({},e.id,!0)))}),[n,c]);return{isFavorite:Object(a.useCallback)((function(e){return!!n[e.id]}),[n]),removeFavorite:r,addFavorite:s,favorites:n}})),vn=function(){return Object(mt.a)("dchan.network.settings",{defaultValue:N})},gn=function(e){var t=e.title,n=e.board,c=e.thread,r=on().timeTraveledToBlockNumber,s=hn().accounts,l=mn().isJannyOf,d=!!n&&l(n.id),b=Object(a.useState)(),j=Object(i.a)(b,2),u=j[0],m=j[1];return Object(h.jsxs)("header",{id:"board-header",children:[Object(h.jsx)(dc,{board:n||void 0,thread:c}),Object(h.jsx)(oc,{}),Object(h.jsxs)("div",{className:"text-4xl text-contrast font-weight-800 font-family-tahoma relative",children:[Object(h.jsx)("div",{className:"text-xs pb-2",children:Object(h.jsx)(bc,{className:null!==n&&void 0!==n&&n.id?"":"invisible",id:(null===n||void 0===n?void 0:n.id)||"0x0000000000000000000000000000000000000000"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:null!==n&&void 0!==n&&n.isLocked?Object(h.jsx)("span",{title:"Board locked. You cannot reply anymore.",children:Object(h.jsx)(Aa,{emoji:"\ud83d\udd12"})}):Object(h.jsx)("span",{})})," ",Object(h.jsx)("span",{className:"font-semibold ".concat(null!==n&&void 0!==n&&n.name||t?"":"invisible"),children:null===n?Object(h.jsx)("div",{children:t||"/?/ - ?????"}):Object(h.jsxs)(o.b,{to:n?"/".concat(n.name,"/").concat(n.id).concat(r?"?block=".concat(r):""):"#",children:["/",(null===n||void 0===n?void 0:n.name)||"?","/ - ",(null===n||void 0===n?void 0:n.title)||"..."]})}),n&&d?Object(h.jsxs)("span",{children:[Object(h.jsx)("span",{children:Object(h.jsxs)(wc,{children:[Object(h.jsx)("div",{children:n.isLocked?Object(h.jsxs)("span",{children:[Object(h.jsx)("input",{name:"lock",type:"hidden",value:"false"}),Object(h.jsxs)("button",{onClick:function(){return de(null===n||void 0===n?void 0:n.id,s,m)},children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udd13"})," Unlock"]})]}):Object(h.jsxs)("span",{children:[Object(h.jsx)("input",{name:"lock",type:"hidden",value:"true"}),Object(h.jsxs)("button",{onClick:function(){return oe(n.id,s,m)},children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udd12"})," Lock"]})]})}),Object(h.jsx)("div",{children:Object(h.jsxs)("button",{onClick:function(){return se(n.id,s,m)},children:[Object(h.jsx)(Aa,{emoji:"\u274c"})," Remove"]})})]})}),Object(h.jsx)(va,{className:"p-4",status:u})]}):""]})]}),Object(h.jsx)("div",{className:"p-2",children:Object(h.jsx)("hr",{})})]})},kn=function(e){var t=e.board,n=e.highlight,c=on().timeTraveledToBlockNumber,r=t.id,s=t.title,l=t.postCount,d=t.name,b=t.isLocked,j=t.isNsfw,u=ft().publish,m=Object(a.useState)(!1),p=Object(i.a)(m,2),O=p[0],x=p[1],f=Object(a.useCallback)((function(){x(!0)}),[x]),v=Object(a.useCallback)((function(){x(!1)}),[x]),g=Object(a.useCallback)((function(){u("BOARD_ITEM_SELECT",t)}),[t,u]);return Object(h.jsxs)("tr",{className:"relative ".concat(O?"bg-secondary":(null===n||void 0===n?void 0:n.id)===t.id?"bg-tertiary":""),title:"Click to view threads on homepage",onMouseOver:f,onMouseOut:v,onClick:g,children:[Object(h.jsx)("td",{children:Object(h.jsx)(bc,{id:r})}),Object(h.jsx)("td",{className:"px-2 whitespace-nowrap hidden sm:block max-w-10rem truncate",children:Object(h.jsx)("span",{children:Object(h.jsx)(o.b,{className:"dchan-link",to:"/".concat(d,"/").concat(r).concat(c?"?block=".concat(c):""),children:s})})}),Object(h.jsx)("td",{className:"px-2 whitespace-nowrap",children:Object(h.jsx)("span",{children:Object(h.jsxs)(o.b,{className:"dchan-link mx-4",to:"/".concat(d,"/").concat(r).concat(c?"?block=".concat(c):""),children:["/",d,"/"]})})}),Object(h.jsx)("td",{className:"px-2 whitespace-nowrap text-right",children:Object(h.jsxs)("span",{children:[l," posts"]})}),Object(h.jsxs)("td",{className:"left-full top-0 px-1 whitespace-nowrap center block",children:[b?Object(h.jsx)("span",{title:"Board locked. You cannot post.",children:Object(h.jsx)(Aa,{emoji:"\ud83d\udd12"})}):"",j?Object(h.jsx)("span",{title:"NSFW Board",children:Object(h.jsx)(Aa,{emoji:"\ud83d\udd1e"})}):""]})]},r)},yn=function(e){var t=e.className,n=void 0===t?"":t,c=e.loading,a=void 0!==c&&c,r=e.boards,s=e.highlight;return Object(h.jsx)("div",{className:"".concat(n," flex center"),children:Object(h.jsx)("table",{className:"flex-grow",children:Object(h.jsx)("tbody",{children:a?Object(h.jsx)(gc,{}):r?r.length>0?r.map((function(e){return Object(h.jsx)(kn,{board:e,highlight:s},"board-"+e.id)})):"No boards":""})})})};function wn(e){var t=0===e.indexOf("0x")?2:0;return"".concat(e.substring(t,t+3),"-").concat(e.substring(e.length-3))}var An=n(149),Nn=function(){var e=hn(),t=e.accounts,n=e.provider,r=Object(l.f)(),s=Object(a.useState)(),o=Object(i.a)(s,2),d=o[0],b=o[1],m=Object(a.useState)(!1),p=Object(i.a)(m,2),O=p[0],x=p[1],f=Object(a.useState)(0),v=Object(i.a)(f,2),g=v[0],y=v[1],w=Object(a.useState)(0),A=Object(i.a)(w,2),N=A[0],C=A[1],B=Object(An.a)(),T=B.register,S=B.handleSubmit,I=B.reset,E=function(){var e=Object(u.a)(Object(j.a)().mark((function e(n){var a,s,i,o;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,c.createBoard(n,t,b);case 3:a=e.sent,console.log({result:a}),(s=null===a||void 0===a?void 0:a.events)&&s[0]&&(i=s[0].transactionHash,o="/".concat(i),r.push(o),I()),x(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(En,{title:Object(h.jsx)("span",{children:"Create a board"}),className:"pt-4 pb-2",open:!1,children:[Object(h.jsx)(Sa,{}),Object(h.jsx)("div",{className:"border center flex",children:n?Object(h.jsx)("div",{className:"",children:Object(h.jsxs)("form",{id:"dchan-board-form",className:"grid center bg-primary p-2 pointer-events-auto",onSubmit:S(E),children:[Object(h.jsx)("table",{children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Board"}),Object(h.jsx)("td",{children:Object(h.jsxs)("span",{className:"relative",children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({className:"dchan-input-board px-1 border border-solid border-gray focus:border-indigo-300",type:"text",placeholder:"v"},T("name")),{},{disabled:O,onChange:function(e){return C(e.target.value.length)},maxLength:7})),Object(h.jsx)(sc,{maxLength:7,value:N})]})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Title"}),Object(h.jsx)("td",{children:Object(h.jsxs)("span",{className:"relative",children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({className:"dchan-input-title px-1 border border-solid border-gray focus:border-indigo-300",type:"text",placeholder:"Videogames"},T("title")),{},{disabled:O,onChange:function(e){return y(e.target.value.length)},maxLength:70})),Object(h.jsx)(sc,{maxLength:70,value:g})]})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Options"}),Object(h.jsx)("td",{children:Object(h.jsx)("div",{className:"flex justify-start",children:Object(h.jsxs)("div",{className:"whitespace-nowrap",children:[Object(h.jsx)("input",Object(k.a)({id:"dchan-input-is_nsfw",className:"mx-1",type:"checkbox"},T("nsfw"))),Object(h.jsx)("label",{htmlFor:"dchan-input-is_nsfw",className:"text-black font-weight-800 font-family-tahoma",children:"NSFW"})]})})})]})]})}),Object(h.jsx)("button",{className:"dchan-post-submit px-2 m-2 bg-gray-100 border",type:"submit",disabled:O,children:"Create"}),Object(h.jsx)(va,{status:d})]})}):Object(h.jsx)(h.Fragment,{})})]})},Cn=n(9),Bn=n(10),Tn=function(){function e(){Object(Cn.a)(this,e)}return Object(Bn.a)(e,null,[{key:"post",value:function(e){var t,n,c=e.n,a=e.board,r=e.thread,s=e.from,i=null===r||void 0===r||null===(t=r.op)||void 0===t||null===(n=t.from)||void 0===n?void 0:n.id;return a&&a&&a.name&&a.id?r&&i?"/".concat(a.name,"/").concat(a.id,"/").concat(i,"/").concat(r.n,"/").concat(s.id,"/").concat(c):"/".concat(a.name,"/").concat(a.id,"/").concat(s.id,"/").concat(c):void 0}},{key:"thread",value:function(e){var t=e.n,n=e.op,c=e.board;return c&&c.name&&c.id&&t?"/".concat(c.name,"/").concat(c.id,"/").concat(n.from.id,"/").concat(t):void 0}},{key:"board",value:function(e,t){var n=e.name,c=e.id,a=t&&["catalog","index","archive"].includes(t)?"/".concat(t):"";return n&&c?"/".concat(n,"/").concat(c).concat(a):void 0}},{key:"posts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search;return"/_/posts".concat(t?"?search=".concat(t):"")}},{key:"boards",value:function(){return"/_/boards"}}]),e}(),Sn=function(e){var t=e.board,n=on().timeTraveledToBlockNumber;return Object(h.jsx)(o.b,{title:t.title,to:"".concat(Tn.board(t)).concat(n?"?block=".concat(n):""),children:Object(h.jsxs)(bc,{id:t.id,children:["/",t.name,"/"]})})},In=function(e){var t=e.className,n=void 0===t?"":t,c=e.limit,a=e.highlight,r=on().timeTraveledToBlockNumber,s=Object(nn.a)(r?Ft:Ht,{pollInterval:3e4,fetchPolicy:r?"cache-first":"network-only",variables:{block:r,limit:c}}),i=s.data;return s.loading?Object(h.jsx)("div",{className:"",children:Object(h.jsx)(gc,{})}):i?Object(h.jsx)(ka,{className:"".concat(n," w-auto"),children:new Map([["Most popular",Object(h.jsx)(yn,{boards:i.mostPopular,highlight:a})],["Last created",Object(h.jsx)(yn,{boards:i.lastCreated,highlight:a})],["Last bumped",Object(h.jsx)(yn,{boards:i.lastBumped,highlight:a})]])}):Object(h.jsx)("span",{})},En=function(e){var t=e.className,n=void 0===t?"grid":t,c=e.bodyClassName,a=void 0===c?"":c,r=e.title,s=e.titleRight,i=e.children,o=e.open,l=void 0===o||o,d=e.collapsible;return void 0===d||d?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("article",{className:"".concat(n," max-w-100vw"),children:Object(h.jsxs)("details",{open:l,children:[Object(h.jsx)("summary",{className:"bg-secondary border border-black border-b-0 sticky top-0 z-20 text-center",children:Object(h.jsxs)("header",{className:"bg-highlight py-1 bg-white border border-l-0 border-r-0 border-solid border-black p-2 z-50",children:[Object(h.jsx)("span",{className:"text-xl center font-semibold",children:r}),s]})}),Object(h.jsx)("section",{className:"".concat(a," bg-white border border-black border-t-0 w-full p-1 overflow-auto"),style:{flex:"1 1 auto"},children:i})]})})}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"".concat(n," max-w-100vw"),children:[Object(h.jsxs)("header",{className:"bg-highlight py-1 bg-white border border-solid border-black p-2 z-50",children:[Object(h.jsx)("span",{className:"text-xl center font-semibold",children:r}),s]}),Object(h.jsx)("section",{className:"".concat(a," bg-white border border-black border-t-0 w-full p-1 overflow-auto"),style:{flex:"1 1 auto"},children:i})]})})},_n=n(15);function Dn(e,t){var n=e.score;return parseInt(n)/1e9<parseInt("".concat(t||1))}var Pn,Mn=function(e){var t,n,c=e.thread,r=e.board,s=e.showBoard,o=void 0!==s&&s,d=c.id,b=c.isPinned,j=c.isLocked,u=c.subject,m=c.op,p=c.replyCount,O=c.imageCount,x=c.replies,f=m.image||{ipfsHash:"",isNsfw:!1,isSpoiler:!1},v=f.ipfsHash,g=f.isNsfw,k=f.isSpoiler,y=on().timeTraveledToBlockNumber,w=Object(l.f)(),A=vn(),N=Object(i.a)(A,1)[0],C=Dn(c,null===N||void 0===N||null===(t=N.content_filter)||void 0===t?void 0:t.score_threshold),B=Object(a.useState)(!1),T=Object(i.a)(B,2),S=T[0],I=T[1],E=Object(a.useCallback)((function(){w.push("".concat(Tn.thread(c)||"/").concat(y?"?block=".concat(y):""))}),[w,c,y]),_=Object(a.useCallback)((function(){I(!0)}),[I]),D=Object(a.useCallback)((function(){I(!1)}),[I]);return Object(h.jsx)("div",{className:"relative max-w-150px mx-1 w-full",style:{minHeight:"20rem"},children:Object(h.jsxs)("article",{id:d,className:"dchan-post justify-self-center text-decoration-none leading-4 text-black m-0.5 border-black overflow-hidden max-w-150px break-word w-full place-items-center flex",style:S?{maxWidth:"initial",zIndex:40,marginLeft:"-2rem",marginRight:"-2rem",width:"14rem",position:"absolute"}:{minHeight:"20rem",position:"relative"},onMouseEnter:_,onMouseLeave:D,children:[C&&!S?Object(h.jsxs)("button",{onClick:_,className:"absolute text-2xl text-gray-800 top-0 left-0 right-0 bottom-0",children:[Object(h.jsx)("div",{children:Object(h.jsx)(Aa,{emoji:"\u26a0\ufe0f"})}),Object(h.jsx)("div",{children:"Post hidden due to reports."}),Object(h.jsx)("div",{className:"text-sm text-gray-600",children:"Click to show anyway."})]}):"",Object(h.jsx)("div",{onClick:E,className:"h-full w-full",children:Object(h.jsxs)("div",{className:[S?"relative top-0 z-10 bg-tertiary border border-black h-full":"absolute top-0 right-0 left-0",!S&&C?"dchan-censor":""].join(" "),style:{maxHeight:"initial"},children:[Object(h.jsxs)("div",{className:"absolute top-0 right-0 z-10",children:[b?Object(h.jsx)("span",{title:"Thread pinned. This might be important.",children:Object(h.jsx)(Aa,{emoji:"\ud83d\udccc"})}):"",j?Object(h.jsx)("span",{title:"Thread locked. You cannot post.",children:Object(h.jsx)(Aa,{emoji:"\ud83d\udd12"})}):""]}),!v||C&&!S?"":Object(h.jsx)("div",{children:Object(h.jsx)(fc,{className:"w-full pointer-events-none shadow-xl object-contain max-h-320px",hash:v,expandable:!1,thumbnail:!1,isSpoiler:k,isNsfw:g&&!(!0===(null===r||void 0===r?void 0:r.isNsfw))&&!(null!==(n=c.board)&&void 0!==n&&n.isNsfw)||!1})}),Object(h.jsxs)("div",{className:"p-1",children:[o&&c.board?Object(h.jsx)("div",{children:Object(h.jsx)(Sn,{board:c.board})}):"",Object(h.jsxs)("div",{children:[Object(h.jsx)("abbr",{title:"Replies",children:"R"}),": ",Object(h.jsx)("strong",{children:p}),","," ",Object(h.jsx)("abbr",{title:"Images",children:"I"}),": ",Object(h.jsx)("strong",{children:O})]}),Object(h.jsxs)("div",{className:"word-wrap",children:[Object(h.jsx)("div",{children:Object(h.jsx)("strong",{className:"text-url",children:u})}),Object(h.jsx)(la,{style:{minWidth:S?"12rem":"initial",textAlign:"center"},post:m}),S&&x&&Object(_n.a)(x).reverse().map((function(e){return Object(h.jsxs)("div",{className:"mt-1 p-1 border-0 border-t border-black border-solid text-xs text-left",children:[Object(h.jsx)("div",{children:U.DateTime.fromSeconds(parseInt(e.createdAtBlock.timestamp)).toRelative()}),Object(h.jsx)(la,{post:e})]},e.id)}))]})]})]})})]})})},Ln=function(e){var t=e.threads,n=e.board,c=e.showBoard,a=void 0!==c&&c;return Object(h.jsx)("div",{className:"flex flex-row flex-wrap justify-center place-items-start font-size-090rem px-2 sm:px-4 flex-grow",children:t.filter((function(e){return!!e&&!!e.board})).map((function(e){return Object(h.jsx)(Mn,{board:n,thread:e,showBoard:a},e.id)}))})},Fn=n(71),Hn=function(e){var t=e.archive,n=e.board,c=e.thread,a=e.title,r=e.summary,s=e.onRefresh,i=on(),o=i.timeTraveledToBlockNumber,l=i.timeTraveledToDateTime,d=i.lastBlock,b=i.isTimeTraveling,j=Object(Fn.a)(s,1,!0);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(gn,{title:a,board:n,thread:c}),null===n?"":c||n?b?Object(h.jsxs)("span",{className:"opacity-60",children:["Time traveled to ",null===l||void 0===l?void 0:l.toLocaleString(U.DateTime.DATETIME_SHORT)]}):Object(h.jsx)(rc,{thread:c,board:n}):"...",null!==n?Object(h.jsx)("div",{className:"p-2",children:Object(h.jsx)("hr",{})}):"",Object(h.jsxs)("div",{className:"text-center sm:text-left grid xl:grid-cols-3 text-xs xl:sticky top-0 pt-6 z-30 bg-primary",children:[Object(h.jsxs)("div",{className:"mx-2 flex flex-wrap sm:flex-nowrap justify-center md:justify-start items-center select-none",children:[n?Object(h.jsx)(Rn,{board:n}):Object(h.jsx)("span",{}),!o||d&&d.number===o.toString()?Object(h.jsx)(Da,{onRefresh:j}):""]}),Object(h.jsx)("div",{className:"center grid",children:r?Object(h.jsx)("span",{className:"py-2 text-xs text-gray-600",children:r}):Object(h.jsx)("span",{})}),Object(h.jsx)("div",{className:"flex flex-wrap justify-center md:justify-end items-center pr-2",children:t||c||!n?"":Object(h.jsx)(xa,{})}),Object(h.jsx)("div",{className:"w-screen",children:Object(h.jsx)("hr",{})})]})]})},Rn=function(e){var t=e.board,n=e.dateTime,c=on().timeTraveledToBlockNumber,a={};c&&(a.block="".concat(c)),null!=n&&(a.date=n.toISODate());var r=a?"?".concat(Object.entries(a).map((function(e){return e[0]+"="+e[1]})).join("&")):"";return Object(h.jsxs)("span",{className:"whitespace-nowrap sm:flex",children:[Object(h.jsxs)("span",{children:[Object(h.jsxs)("span",{className:"pr-1",children:["[",Object(h.jsx)(o.b,{className:"dchan-link",to:"".concat(Tn.board(t,"index")).concat(r),children:"Index"}),"]"]}),Object(h.jsxs)("span",{className:"pr-1",children:["[",Object(h.jsx)(o.b,{className:"dchan-link",to:"".concat(Tn.board(t,"catalog")).concat(r),children:"Catalog"}),"]"]}),Object(h.jsxs)("span",{className:"pr-1",children:["[",Object(h.jsx)(o.b,{className:"dchan-link",to:"".concat(Tn.board(t,"archive")).concat(r),children:"Archive"}),"]"]})]}),Object(h.jsx)(v,{to:"#bottom",label:"Bottom"})]})},Qn=function(e){var t=e.subject,n=e.children;return Object(h.jsx)("div",{className:"font-family-arial text-center",children:Object(h.jsx)("div",{className:"grid center min-h-100vh",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"text-4xl text-contrast font-weight-800 font-family-tahoma m-4",children:t}),Object(h.jsx)("div",{className:"grid center m-4",children:n}),Object(h.jsx)("div",{children:Object(h.jsx)(g,{})}),Object(h.jsx)("div",{children:Object(h.jsx)(o.b,{className:"dchan-link m-4",to:"/",children:"Go home"})})]})})})},$n=n.p+"static/media/dchan.35747f56.png",zn=function(){var e=pt(),t=Object(i.a)(e,2)[1],n=Object(a.useState)(!1),c=Object(i.a)(n,2),r=c[0],s=c[1],o=Object(a.useCallback)((function(e){s(e.target.checked)}),[s]),l=Object(a.useCallback)((function(){t(r)}),[r,t]);return Object(h.jsx)("div",{className:"center-grid w-full min-h-screen bg-primary p-2",children:Object(h.jsx)("div",{className:"flex flex-wrap center",children:Object(h.jsx)(En,{title:Object(h.jsxs)("span",{children:[Object(h.jsx)("a",{className:"color-black",href:"/",children:"dchan.network"})," ","EULA"]}),children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)("img",{className:"p-2 w-16 pointer-events-none",src:$n,alt:"dchan"})}),Object(h.jsxs)("div",{className:"p-1 text-left",children:[Object(h.jsx)("div",{className:"p-2",children:"To use dchan.network, you understand and agree to the following:"}),Object(h.jsx)("div",{className:"p-2",children:"* The content of this website is for mature audiences only and may not be suitable for minors. If you are a minor or it is illegal for you to access mature images and language, do not proceed."}),Object(h.jsx)("div",{className:"p-2",children:"* Content is presented to you AS IS, with no warranty, express or implied."}),Object(h.jsx)("div",{className:"p-2",children:'By clicking "I Agree," you agree to accept full responsibility for any damages from your use of the website, and you understand that the content posted is not owned or generated by dchan.network, but rather by dchan.network\'s users.'}),Object(h.jsxs)("div",{className:"text-center",children:[Object(h.jsxs)("div",{className:"p-2",children:[Object(h.jsx)("input",{id:"dchan-input-agree",className:"mx-1 text-xs whitespace-nowrap opacity-50 hover:opacity-100",type:"checkbox",checked:r,onChange:o}),Object(h.jsx)("label",{htmlFor:"dchan-input-agree",children:"I agree"})]}),Object(h.jsxs)("div",{className:"p-2",children:["[",Object(h.jsx)("button",{className:"dchan-link",disabled:!r,onClick:l,children:"Proceed"}),"]"]})]})]})]})})})})},qn=function(){return Object(h.jsxs)("span",{children:[Object(h.jsx)("a",{className:"dchan-link",href:"//thegraph.com/",target:"_blank",rel:"noreferrer",children:"The Graph"})," ",Object(h.jsxs)("span",{className:"text-xs",children:["(ticker:"," ",Object(h.jsx)("a",{className:"dchan-link",href:"//www.coingecko.com/en/coins/the-graph",target:"_blank",rel:"noreferrer",children:"GRT"}),")"]})]})},Wn=function(){return Object(h.jsx)("a",{className:"dchan-link",href:"//polygon.network/",target:"_blank",rel:"noreferrer",children:"Polygon"})},Yn=function(){return Object(h.jsx)("a",{className:"dchan-link",href:"//dchan.network/",target:"_blank",rel:"noreferrer",children:"dchan.network"})},Un=function(){return Object(h.jsx)("a",{className:"dchan-link",href:"//ipfs.io/",target:"_blank",rel:"noreferrer",children:"IPFS"})},Vn=function(e){var t=e.onExit,n=e.className;return Object(h.jsx)(En,{title:Object(h.jsx)("span",{children:"FAQ"}),className:n,collapsible:!1,children:Object(h.jsxs)("div",{className:"text-left p-4 text-sm",children:[Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: What is this?"}),Object(h.jsxs)("div",{children:["This is ",Object(h.jsx)(Yn,{}),", a decentralized time-traveling imageboard."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: ...Decentralized?"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(Yn,{})," is a"," ",Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"https://ethereum.org/en/web3/",children:"web3"})," imageboard whose posts are stored on"," ",Object(h.jsx)(Wn,{}),"'s blockchain and whose images are stored on ",Object(h.jsx)(Un,{}),", using"," ",Object(h.jsx)(qn,{})," to index and serve the content in a decentralized manner."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: ...Time-Traveling?"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(Yn,{}),"'s backend is powered by ",Object(h.jsx)(qn,{}),", which is capable of obtaining data as it was at any point in time, allowing you to browse"," ",Object(h.jsx)(Yn,{}),"'s content exactly as it was whenever in the past.",Object(h.jsx)("br",{}),"This also means that there is no need for an archive, as it is already built in the protocol. Use the"," ",Object(h.jsx)(Aa,{emoji:"\u23ea"})," button in the header to try it out!"]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: ...Imageboard?"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(Yn,{})," is a simple image-based bulletin board where anyone can post comments, share images and create boards. It is heavily inspired by 4chan."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: How does this work?"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(Yn,{})," stores posts, threads and boards on the blockchain.",Object(h.jsx)("br",{}),"Users post and interact with the website through"," ",Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"https://polygonscan.com/address/0x5a139ee9f56c4f24240af366807490c171922b0e#code#L1",children:"a one-line smart contract"}),", which acts as a public record of every action ever performed by users, moderators and administrators.",Object(h.jsx)("br",{}),"Those actions are then processed by"," ",Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"https://github.com/dchan-network/dchan-subgraph",children:"a subgraph"}),", a computer program running on ",Object(h.jsx)(qn,{}),"'s decentralized network, which translates that sequence of actions into the final application state.",Object(h.jsx)("br",{}),"For example, if a user wants to make a new post on the website, they will write a JSON message on the blockchain that essentially states \"I want to create a thread on this board with the comment 'it's over' and this picture called 'crying_pepe.jpg'\". The subgraph receives that message and will thus create a new post on the website.",Object(h.jsx)("br",{}),"Please note that this is experimental software and that this is a"," ",Object(h.jsx)("i",{children:"very"})," simplified explanation!"]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: Is it free?"}),Object(h.jsxs)("div",{children:["Browsing ",Object(h.jsx)(Yn,{})," is free, but you will need a crypto wallet and some ",Object(h.jsx)(Wn,{})," to pay the transaction fee in order to post.",Object(h.jsx)("br",{}),"At the time of writing this FAQ (December 2022) the transaction fee for a post is around 0.001 MATIC, or around than ~$0.001 per post, so $10 worth of MATIC would allow you to post more than 10000 times!",Object(h.jsx)("br",{}),"Please note that it is possible that fees will be higher during high on-chain activity, or that MATIC's price may change wildly in the future.",Object(h.jsx)("br",{}),"You can get some free ",Object(h.jsx)(Wn,{})," at the following faucets:",Object(h.jsx)("div",{children:Object(h.jsx)(Zn,{})}),"Or you can simply buy it from whatever exchange trades it."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: Is it uncensorable?"}),Object(h.jsxs)("div",{children:["Kind of. While the content and actions cannot be deleted from"," ",Object(h.jsx)(Wn,{})," and ",Object(h.jsx)(Un,{}),", ",Object(h.jsx)(Yn,{})," can still refuse to show that content.",Object(h.jsx)("br",{}),"As of now, the subgraph, as well the client served by"," ",Object(h.jsx)(Yn,{}),", and the server it is served from, and the domain that points to that server ... are all controlled by"," ",Object(h.jsx)(Yn,{}),"'s owner, me.",Object(h.jsx)("br",{}),"That means I have total control over what ",Object(h.jsx)(Yn,{}),"'s users can and cannot see; I can censor content, change the rules as I please, ban whoever I like for whatever reason, shut down the website, and anything else I consider necessary to protect"," ",Object(h.jsx)(Yn,{}),"'s users, ",Object(h.jsx)(Yn,{})," and myself from malicious actors.",Object(h.jsx)("br",{}),Object(h.jsxs)("i",{children:[Object(h.jsx)("u",{children:"HOWEVER"}),"."]}),Object(h.jsx)("br",{}),Object(h.jsxs)("i",{children:[Object(h.jsx)("b",{children:"No one"})," can alter or delete the content users posted or the actions they performed, nor can prevent users from further interacting with the contract."]}),Object(h.jsx)("br",{}),"What I can do, at most, is hide what I consider malicious actions/content.",Object(h.jsx)("br",{}),"Even if I wanted to nuke absolutely everything it would still mean that, at best, I would just not show content on ",Object(h.jsx)(Yn,{}),".",Object(h.jsx)("br",{}),"It would still be possible for anyone to deploy a client and subgraph that bypasses this censoring, as every action and content posted is public and ",Object(h.jsx)("b",{children:"undeletable"}),"."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: How do I post?"}),Object(h.jsxs)("div",{children:["You'll need to install"," ",Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"//metamask.io",children:"Metamask"})," ","(if you're on Desktop) or"," ",Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"//trustwallet.com/",children:"Trust Wallet"})," ","(if you're on Mobile). Other wallets might not be supported.",Object(h.jsx)("br",{}),Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"//brave.com",children:"Brave Browser"})," ","should also work.",Object(h.jsx)("br",{}),"You'll need to connect your crypto wallet to post on"," ",Object(h.jsx)(Yn,{}),"."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: Are posts anonymous?"}),Object(h.jsxs)("div",{children:["Due to the public nature of the blockchain, posts are directly tied to whoever signed the post, meaning that"," ",Object(h.jsx)("u",{children:Object(h.jsx)("i",{children:"your post history is public, tied to your wallet address' identity and to any past activity"})}),".",Object(h.jsx)("br",{}),"Please keep this in mind when posting.",Object(h.jsx)("br",{}),"Because every poster's wallet address is public, it is treated as that poster's ",Object(h.jsx)("i",{children:"pseudonym"}),' across the entire network: if the same address posts in two different threads/boards, it will have the same "ID".',Object(h.jsx)("br",{}),"In short: If you want to be as anonymous as possible, use the faucet and change account after every post. If you want to be a tripfag, use your ENS-associated address."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsxs)("strong",{children:["Q: Does ",Object(h.jsx)(Yn,{})," use cookies?"]}),Object(h.jsx)("div",{children:"No. Web3 applications don't use centralized servers, and thus cookies serve no purpose. To put it simply, if a \"dapp\" uses cookies it's not true Web3."})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsxs)("strong",{children:["Q: Does ",Object(h.jsx)(Yn,{})," have a token? I need a useless shitcoin to lose my life savings on."]}),Object(h.jsx)("div",{children:"Not right now. In the future, when the time is right."})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsxs)("strong",{children:["Q: Will the ",Object(h.jsx)(Yn,{})," token *insert anything here* ?"]}),Object(h.jsxs)("div",{children:["Nothing has been decided.",Object(h.jsx)("br",{}),"The only set rule is that ",Object(h.jsx)(Yn,{})," will not require any token to post except for the transaction fee."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: I acted like a dipshit and got banned! Muh free speech??"}),Object(h.jsxs)("div",{children:["If you are not happy with the way ",Object(h.jsx)(Yn,{})," is moderated, I encourage you to fork off the code and make your own instance, with (or without) all the posts and boards from this website. You have all the tools at your disposal, see"," ",Object(h.jsx)("a",{className:"dchan-link",href:"//github.com/dchan-network/",target:"_blank",rel:"noreferrer",children:"GitHub"}),Object(h.jsx)("br",{})]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: Oh crap oh no I posted something I shouldn't have, how can I delete it?"}),Object(h.jsxs)("div",{children:["Too bad.",Object(h.jsx)("br",{}),"Once you post on the blockchain, it's forever.",Object(h.jsx)("br",{}),"You cannot delete it.",Object(h.jsx)("br",{}),"You cannot change it.",Object(h.jsx)("br",{}),Object(h.jsx)("u",{children:Object(h.jsx)("i",{children:"The blockchain never forgets."})}),Object(h.jsx)("br",{}),"Please keep this in mind when posting."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: Can I run this locally?"}),Object(h.jsxs)("div",{children:["You can run the client locally... somewhat. If you're on desktop, you can save the page and open it with your browser, so that if"," ",Object(h.jsx)(Yn,{})," ever goes down you can still use the client. ",Object(h.jsx)("br",{}),"You may incur in some bugs like missing logos or being unable to post, but you should be able to view the content just fine as long as you are online."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: Is there an official Twitter/Telegram/Discord/Mastodon...?"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(Yn,{})," does not have any official online presence outside of ",Object(h.jsx)(Yn,{})," itself.",Object(h.jsx)("br",{}),Object(h.jsxs)("u",{children:["Do not trust any account or group who claims to be associated to"," ",Object(h.jsx)(Yn,{})]}),".",Object(h.jsx)("br",{}),"Any account or group that claims to be officially endorsed by"," ",Object(h.jsx)(Yn,{})," is either an impersonator, a scammer, or worse."]})]}),Object(h.jsxs)("div",{className:"pb-2",children:[Object(h.jsx)("strong",{children:"Q: Is this open source?"}),Object(h.jsxs)("div",{children:["Of course.",Object(h.jsx)("br",{}),Object(h.jsx)("a",{className:"dchan-link",href:"//github.com/dchan-network/",target:"_blank",rel:"noreferrer",children:"GitHub"})]})]}),Object(h.jsx)("div",{className:"flex flex-row justify-center mt-4 dchan-brackets sm:hidden",children:Object(h.jsx)("span",{className:"dchan-link",onClick:t,children:"Go back"})})]})})},Jn=Object(d.b)([!1,function(){}],(function(){return Object(a.useState)(!1)})),Gn=function(){var e=Jn(),t=Object(i.a)(e,2),n=t[0],c=t[1];return n?Object(h.jsx)(Ac,{onExit:function(){return c(!1)},overlayClassName:"w-full sm:w-4/6 h-5/6",children:Object(h.jsx)(Vn,{})}):null},Xn=function(e){var t=e.className,n=void 0===t?"":t,c=Jn(),a=Object(i.a)(c,2)[1];return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("span",{className:"".concat(n," cursor-pointer dchan-link"),onClick:function(e){e.stopPropagation(),e.preventDefault(),a(!0)},children:"FAQ"})})},Zn=function(){return Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)("a",{href:"https://matic.supply/",target:"_blank",rel:"noreferrer",className:"dchan-link px-2",children:"https://matic.supply"})}),Object(h.jsx)("li",{children:Object(h.jsx)("a",{href:"https://macncheese.finance/matic-polygon-mainnet-faucet.php",target:"_blank",rel:"noreferrer",className:"dchan-link px-2",children:"https://macncheese.finance"})})]})},Kn=n.p+"static/media/polygon.1140771b.png",ec=n.p+"static/media/thegraph.101ddbcb.png",tc=n(193),nc=function(e){var t,n,c=e.showContentDisclaimer,a=void 0!==c&&c,r=e.className,s=void 0===r?"mt-auto":r,i=null===(t=document.querySelector("meta[name='ui-version']"))||void 0===t||null===(n=t.attributes.getNamedItem("content"))||void 0===n?void 0:n.value;return Object(h.jsxs)("div",{className:"flex-grow relative pt-24 ".concat(s),children:[Object(h.jsx)("div",{id:"bottom"}),Object(h.jsxs)("footer",{className:"absolute bottom-0 mt-4",children:[Object(h.jsx)("div",{className:"flex center flex-grow",children:a?Object(h.jsx)("div",{className:"text-xs text-gray-400 hover:text-gray-600",children:"All trademarks and copyrights on this page are owned by their respective parties. Posted content is responsibility of the poster."}):""}),Object(h.jsx)("div",{className:"bg-primary flex mt-1 border-t border-top-tertiary-accent text-xs relative w-100vw overflow-visible",children:Object(h.jsxs)("div",{className:"flex flex-wrap px-6 text-xs text-gray-600 w-screen",children:[Object(h.jsxs)("div",{className:"pb-2 lg:pb-0 flex justify-center align-start items-start dchan-footer-buttons select-none",children:[Object(h.jsx)(Oa,{className:"border border-tertiary-accent px-4 mx-1 bg-white"}),Object(h.jsx)(x,{className:"border border-tertiary-accent px-4 mx-1 bg-white whitespace-nowrap"}),Object(h.jsx)(Xn,{className:"border border-tertiary-accent px-4 mx-1 bg-white"})]}),Object(h.jsx)("div",{className:"flex-grow"}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{className:"flex text-right justify-end ml-2 flex-grow",children:Object(h.jsxs)("details",{children:[Object(h.jsxs)("summary",{children:[tc.a," v",tc.b," [",i&&i.match(/^[0-9a-f]+$/)?Object(h.jsx)("a",{className:"dchan-link",target:"_blank",rel:"noreferrer",href:"https://github.com/dchan-network/dchan-client/commit/".concat(i),children:i}):"dev","]"]}),Object(h.jsxs)("div",{className:"bg-secondary border border-tertiary-accent border-solid p-2 absolute bottom-0 right-0 mr-4 mb-4",children:[Object(h.jsxs)("div",{className:"mb-2",children:["Powered by",Object(h.jsx)("a",{className:"ml-1",href:"//polygon.technology/",target:"_blank",rel:"noreferrer",children:Object(h.jsx)("img",{className:"inline w-4 h-4",src:Kn,alt:"Polygon"})}),Object(h.jsx)("a",{className:"ml-1",href:"//thegraph.com/",target:"_blank",rel:"noreferrer",children:Object(h.jsx)("img",{className:"inline w-4 h-4",src:ec,alt:"The Graph"})})]}),Object(h.jsx)("div",{children:Object(h.jsxs)("a",{className:"dchan-link",href:"//github.com/dchan-network",target:"_blank",rel:"noreferrer",title:"git",children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udee0"})," git"]})}),Object(h.jsx)("div",{children:Object(h.jsxs)("a",{className:"dchan-link",href:"//github.com/dchan-network/dchan-client/issues/new",target:"_blank",rel:"noreferrer",title:"Report a bug",children:[Object(h.jsx)(Aa,{emoji:"\ud83e\udeb2"})," Report a bug"]})}),Object(h.jsx)("div",{children:Object(h.jsxs)("a",{className:"dchan-link",href:"//github.com/dchan-network/dchan-client/graphs/contributors",target:"_blank",rel:"noreferrer",title:"Contributors",children:[Object(h.jsx)(Aa,{emoji:"\ud83e\uddd1\u200d\ud83d\udcbb"})," Contributors"]})}),Object(h.jsx)("div",{})]})]})})]})})]})]})},cc=n(324),ac=["ref"],rc=function(e){var t=e.baseUrl,n=e.thread,c=e.board,r=hn(),s=r.provider,o=r.chainId,d=r.accounts,b=vn(),m=Object(i.a)(b,1)[0],p=Object(l.f)(),O=Object(a.useRef)(null),x=Object(a.useState)(!1),f=Object(i.a)(x,2),v=f[0],g=f[1],y=Object(a.useState)(!1),w=Object(i.a)(y,2),A=w[0],N=w[1],C=Object(a.useState)(Object(On.now)()),B=Object(i.a)(C,2),T=B[0],S=B[1],I=Object(a.useState)(),E=Object(i.a)(I,2),_=E[0],D=E[1],P=Object(a.useState)(0),M=Object(i.a)(P,2),L=M[0],F=M[1],H=Object(a.useState)(0),R=Object(i.a)(H,2),Q=R[0],$=R[1],z=Object(a.useState)(0),q=Object(i.a)(z,2),W=q[0],Y=q[1],U=Object(a.useState)(0),V=Object(i.a)(U,2),J=V[0],X=V[1],Z=Object(a.useState)(),K=Object(i.a)(Z,2),ee=K[0],te=K[1],ne=ft(),ce=ne.subscribe,ae=ne.unsubscribe,re=fn().addFavorite,se=Object(An.a)(),ie=se.register,oe=se.handleSubmit,le=se.formState.errors,de=se.setValue,be=se.getValues,je=se.reset,ue=se.trigger,he=se.setFocus,me=se.watch,pe=be().file,Oe=!!s&&("0x89"===o||137===o),xe=Object(a.useState)(!1),fe=Object(i.a)(xe,2),ve=fe[0],ge=fe[1],ke=Object(a.useRef)(null),ye=ie("comment",{required:!n}),we=ye.ref,Ae=Object(cc.a)(ye,ac),Ne=Object(a.useMemo)((function(){return(null===n||void 0===n?void 0:n.id)||(null===c||void 0===c?void 0:c.id)||"form"}),[n,c]),Ce=Ot(Ne,{watch:me,setValue:de},{include:["name","comment","subject"]}).clear,Be=Object(a.useCallback)((function(e,t){var n=t.from,c=t.n,a=be().comment,r=n?"0x".concat(wn(n).replace("-",""),"/"):"",s=">>".concat(r).concat(c),i=ke.current,o="",l=0;if(i)if(i.selectionStart||0===i.selectionStart){var d=i.selectionStart,b=i.selectionEnd;l=d,o=a.substr(0,d),d>0&&a.substr(d-1,1).match(/\w/)&&(o+=" ",l+=1),o+=s+"\n"+a.substr(b),l+=s.length+1}else l=(o=a+s+"\n").length;de("comment",o),i&&(i.selectionStart=l,i.selectionEnd=l);try{var j;null===O||void 0===O||null===(j=O.current)||void 0===j||j.scrollIntoView(),Oe&&he("comment")}catch(u){console.error({e:u})}}),[be,de,O,he,Oe]);Object(a.useEffect)((function(){var e=ce("FORM_QUOTE",Be);return function(){ae(e)}})),Object(a.useEffect)((function(){ge(A)}),[A,ge]);var Te=Object(a.useCallback)((function(){S(Object(On.now)())}),[S]),Se=Object(a.useCallback)((function(e){(e||window.confirm("Reset form?"))&&(je(),ue(),Te(),Ce(),g(!1))}),[je,ue,Te,Ce,g]),Ie=Object(a.useCallback)(function(){var e=Object(u.a)(Object(j.a)().mark((function e(t){var c,a,r,s,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:return n&&re&&re(n),N(!0),a=null,e.prev=5,e.next=8,G(t,d,D);case 8:a=e.sent,e.next=17;break;case 11:e.prev=11,e.t0=e.catch(5),(a={error:e.t0}).error.message.match(/failed.*check.*transaction.*receipt/i)&&(delete a.error,a.success=!0),D(a),console.log({result:a});case 17:N(!1),a&&!a.error&&Se(!0),(r=null===(c=a)||void 0===c?void 0:c.events)&&r[0]&&(s=r[0].transactionHash,i="/".concat(s),p.push(i));case 21:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[d,p,D,N,Se,re,n,m]),Ee=Object(a.useCallback)(Object(u.a)(Object(j.a)().mark((function e(){var t,n,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=be().file)&&t.length>0?(n=t[0],(c=new FileReader).readAsDataURL(n),c.onload=function(){var e=c.result;te(e)}):te(void 0);case 2:case"end":return e.stop()}}),e)}))),[be,te]),_e=Object(a.useCallback)(function(){var e=Object(u.a)(Object(j.a)().mark((function e(t){var n,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.files)?de("file",c):c=be().file,c&&c.length>0?Y(c[0].size/1024):Y(0),Ee();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Ee,Y,de,be]),De=Object(a.useCallback)((function(){de("file",void 0),_e()}),[de,_e]),Pe=Object(a.useCallback)((function(){var e=be().file;if(e&&e.length>0){var t=e[0],n=prompt("Rename in",t.name);if(n){if(n.length>1e3)return void alert("Filename too long, 1000 chars max");var c=t.slice(0,t.size,t.type),a=new DataTransfer;a.items.add(new File([c],n,{type:t.type})),de("file",a.files)}}}),[be,de]),Me=Object(a.useCallback)((function(e){var t,n=e.clipboardData||e.originalEvent.clipboardData,c=n.files,a=n.items;if(a&&a.length)for(var r=0;r<a.length;){var s=a[r];if("file"===s.kind){t=s.getAsFile();break}r++}if(t){var i=new FileReader;i.onload=function(){var e=Object(u.a)(Object(j.a)().mark((function e(t){var n,c,a,r,s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.result,!Object(On.isString)(c)){e.next=10;break}return a=c.substring(c.indexOf(":")+1,c.indexOf(";")),e.next=5,fetch(c).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],"file.".concat(a.split("/")[1]),{type:a})}));case 5:r=e.sent,(s=new DataTransfer).items.add(r),de("file",s.files),_e();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.readAsDataURL(t)}else c&&c.length>0&&(de("file",c),_e())}),[_e,de]),Le=Object(a.useState)(t),Fe=Object(i.a)(Le,2),He=Fe[0],Re=Fe[1];Object(a.useEffect)((function(){t&&t!==He&&Re(t)}),[v,t,He,Re,Se]),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,c=Object(a.useRef)();Object(a.useEffect)((function(){c.current=t}),[t]),Object(a.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return c?c.current(e):""};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}("paste",Me);var Qe=mn().isJannyOf,$e=!!c&&Qe(c.id),ze=Object(a.useCallback)((function(){Te()}),[Te]),qe=Object(a.useCallback)((function(){g(!0)}),[g]),We=function(){return Object(h.jsxs)("span",{children:[Object(h.jsx)("span",{className:"text-xs",children:Object(h.jsx)("button",{onClick:function(){return Se(!0)},children:Object(h.jsx)(Aa,{emoji:"\u274c"})})}),Object(h.jsxs)(wc,{children:[Object(h.jsx)("div",{children:"Options:"}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({id:"dchan-input-sage",className:"mx-1",type:"checkbox"},ie("sage")),{},{disabled:ve})),Object(h.jsx)("label",{htmlFor:"dchan-input-sage",className:"text-black font-weight-800 font-family-tahoma",children:Object(h.jsx)("abbr",{className:"opacity-20 hover:opacity-100",title:"Thread will not be bumped.",children:"\ud83c\udf42 Sage"})})]})]})]})};return Object(h.jsxs)("div",{className:"z-30",children:[Object(h.jsx)(Ca,{}),Object(h.jsx)("div",{className:"pb-2"}),!$e&&null!==n&&void 0!==n&&n.isLocked?Object(h.jsxs)("div",{className:"text-contrast font-weight-800 font-family-tahoma",children:[Object(h.jsx)("div",{children:"Thread locked."}),Object(h.jsx)("div",{children:"You cannot reply."})]}):!$e&&null!==c&&void 0!==c&&c.isLocked?Object(h.jsxs)("div",{className:"text-contrast font-weight-800 font-family-tahoma",children:[Object(h.jsx)("div",{children:"Board locked."}),Object(h.jsx)("div",{children:"You cannot post."})]}):n||c?Object(h.jsx)("div",{children:Oe?Object(h.jsx)("div",{className:"grid center w-full text-left sticky top-0 min-h-200px",children:Object(h.jsxs)("form",{ref:O,id:"dchan-post-form",className:"grid center bg-primary p-2 pointer-events-auto bg-primary select-none",onSubmit:oe(Ie),onBlur:ze,onChange:qe,children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({type:"hidden"},ie("nonce")),{},{disabled:ve,value:T})),c?Object(h.jsx)("input",Object(k.a)(Object(k.a)({type:"hidden"},ie("board")),{},{disabled:ve,value:c.id})):"",n?Object(h.jsx)("input",Object(k.a)(Object(k.a)({type:"hidden"},ie("thread")),{},{disabled:ve,value:n.id})):"",Object(h.jsx)("table",{children:Object(h.jsxs)("tbody",{children:[n?Object(h.jsx)("tr",{}):Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Name"}),Object(h.jsx)("td",{children:Object(h.jsxs)("span",{className:"relative",children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({className:"dchan-input-name px-1 border border-solid border-gray focus:border-indigo-300",type:"text",placeholder:"Anonymous"},ie("name")),{},{disabled:ve,onChange:function(e){return $(e.target.value.length)},maxLength:70})),Object(h.jsx)(sc,{maxLength:70,value:Q})]})})]}),n?Object(h.jsx)("tr",{}):Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Subject"}),Object(h.jsx)("td",{children:Object(h.jsxs)("div",{className:"flex items-center justify-start",children:[Object(h.jsxs)("span",{className:"relative",children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({className:"dchan-input-subject px-1 border border-solid border-gray focus:border-indigo-300",type:"text"},ie("subject")),{},{disabled:ve,onChange:function(e){return X(e.target.value.length)},maxLength:140,placeholder:"..."})),Object(h.jsx)(sc,{maxLength:140,value:J})]}),Object(h.jsx)("button",{className:"dchan-post-submit px-2 mx-1 bg-gray-100 border",type:"submit",disabled:A,children:"New thread"}),_?"":We(),Object(h.jsx)(va,{status:_})]})})]}),n?Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Name"}),Object(h.jsx)("td",{children:Object(h.jsxs)("div",{className:"flex items-center justify-start",children:[Object(h.jsxs)("span",{className:"relative",children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({className:"dchan-input-name px-1 border border-solid border-gray focus:border-indigo-300",type:"text",placeholder:"Anonymous"},ie("name")),{},{disabled:ve,onChange:function(e){return $(e.target.value.length)},maxLength:70})),Object(h.jsx)(sc,{maxLength:70,value:Q})]}),Object(h.jsx)("button",{className:"dchan-post-submit px-2 mx-1 bg-gray-100 border",type:"submit",disabled:ve,children:"Post Reply"}),_?"":We(),Object(h.jsx)(va,{status:_})]})})]}):Object(h.jsx)("tr",{}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Comment"}),Object(h.jsxs)("td",{children:[Object(h.jsxs)("span",{className:"relative",children:[Object(h.jsx)("textarea",Object(k.a)(Object(k.a)({id:"dchan-post-form-textarea",autoFocus:!0,className:"dchan-input-comment px-1 font-sans border border-solid border-gray focus:border-indigo-300",cols:40,rows:4},Ae),{},{ref:function(e){we(e),ke.current=e},disabled:ve,onChange:function(e){return F(e.target.value.length)},maxLength:2e3,placeholder:"..."})),Object(h.jsx)(sc,{className:"pr-4",maxLength:2e3,value:L})]}),le.comment&&Object(h.jsx)("div",{className:"px-1 text-contrast",children:"This field is required"})]})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"File"}),Object(h.jsx)("td",{className:"flex text-xs",children:Object(h.jsxs)("div",{className:"flex-grow mx-0.5",children:[Object(h.jsx)("span",{className:"text-xs float-right bg-primary",children:"(1000kb max)"}),Object(h.jsx)("input",Object(k.a)(Object(k.a)({className:"w-64",type:"file",accept:"image/*"},ie("file",{required:!1})),{},{disabled:ve,onChange:_e})),Object(h.jsxs)("div",{className:"flex",children:[ee?Object(h.jsxs)("details",{className:"mx-0.5",open:!0,children:[Object(h.jsx)("summary",{children:"\ud83d\uddbc"}),Object(h.jsx)("img",{alt:"",className:"max-h-24 max-w-16rem",src:ee}),Object(h.jsxs)("span",{className:"text-xs ".concat(W>1e3?"text-contrast":""),children:[Math.round(W)," kb"]})]}):"",pe&&pe.length>0?Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsxs)("span",{children:[Object(h.jsx)("button",{className:"dchan-input-file-rename mx-0.5",title:"Rename file",type:"button",onClick:Pe,children:Object(h.jsx)(Aa,{emoji:"\u270e"})}),Object(h.jsx)("button",{className:"dchan-input-file-remove mx-0.5",title:"Remove file",type:"button",onClick:De,children:Object(h.jsx)(Aa,{emoji:"\u274c"})})]}),Object(h.jsxs)("details",{className:"mx-0.5",children:[Object(h.jsx)("summary",{className:"marker-closed-hide",children:Object(h.jsx)(Aa,{emoji:"\u2699\ufe0f"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({id:"dchan-input-is_spoiler",className:"mx-1",type:"checkbox"},ie("is_spoiler")),{},{disabled:ve})),Object(h.jsx)("label",{htmlFor:"dchan-input-is_spoiler",className:"text-black font-weight-800 font-family-tahoma",children:"Spoiler"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({id:"dchan-input-is_nsfw",className:"mx-1",type:"checkbox"},ie("is_nsfw")),{},{disabled:ve})),Object(h.jsx)("label",{htmlFor:"dchan-input-is_nsfw",className:"text-black font-weight-800 font-family-tahoma",children:"NSFW"})]})]})]}):""]})]})}),le.file&&Object(h.jsx)("div",{className:"px-1 text-contrast",children:"This field is required"})]})]})}),Object(h.jsxs)("div",{className:"text-xs grid center",children:[Object(h.jsxs)("div",{className:"p-1 flex center",children:[Object(h.jsx)("input",Object(k.a)(Object(k.a)({id:"dchan-input-rules",className:"mx-1",type:"checkbox"},ie("rulesAccepted",{required:!0})),{},{disabled:ve})),Object(h.jsx)("label",{htmlFor:"dchan-input-rules",className:"text-black font-weight-800 font-family-tahoma",children:Object(h.jsxs)("ul",{children:[Object(h.jsxs)("li",{children:["I've read the ",Object(h.jsx)(Oa,{})," and the ",Object(h.jsx)(Xn,{})," ","before posting."]}),Object(h.jsxs)("li",{children:["I understand that"," ",Object(h.jsx)("abbr",{title:"Other users will be able to view all past transactions you ever made using this address. Be mindful of the security risks this entails.",children:Object(h.jsx)("i",{children:"my posts will be publicly signed by my address"})})]}),Object(h.jsx)("li",{children:Object(h.jsxs)("i",{children:[d&&d.length>0?Object(h.jsx)("a",{href:"https://polygonscan.com/address/".concat(d[0]),target:"_blank",children:Object(h.jsx)(bc,{id:d[0],children:d[0]})}):""," "]})}),Object(h.jsxs)("li",{children:["and that"," ",Object(h.jsx)("abbr",{title:"Posts are stored on the blockchain and images are uploaded to IPFS. _THIS_CANNOT_BE_UNDONE_. Content can be hidden, but can still be trivially obtained. Remember, the blockchain never forgets.",children:Object(h.jsx)("i",{children:"I won't be able to delete the content I post."})})]})]})})]}),le.rulesAccepted&&Object(h.jsx)("div",{className:"px-1 text-contrast",children:"This field is required"})]})]})}):""}):Object(h.jsx)(gc,{})]})},sc=function(e){var t=e.value,n=e.className,c=void 0===n?"":n,a=e.maxLength;return Object(h.jsx)("span",{className:["absolute bottom-0 right-0 text-xs bg-white pointer-events-none",c,t<.1*a?"opacity-0":t<.5*a?"opacity-25":t<.9*a?"opacity-50":t<a?"opacity-75":"opacity-100 text-contrast"].join(" "),children:"".concat(t,"/").concat(a)})},ic=function(e){var t=e.title;return Object(h.jsxs)("header",{children:[Object(h.jsx)(dc,{}),Object(h.jsx)(oc,{}),Object(h.jsx)("div",{className:"text-4xl text-contrast font-weight-800 font-family-tahoma",children:t}),Object(h.jsx)("div",{className:"p-2",children:Object(h.jsx)("hr",{})})]})},oc=function(e){var t=e.block;return Object(h.jsx)(o.b,{to:"/".concat(t?"?block=".concat(t):""),children:Object(h.jsxs)("span",{className:"h-24 font-mono center grid grid-cols-2 relative select-none",children:[Object(h.jsx)("span",{className:"text-right mr-8",children:"dchan"}),Object(h.jsx)("span",{className:"absolute left-0 right-0 bottom-0 top-0 m-auto h-16",children:Object(h.jsx)(fa,{size:16})}),Object(h.jsx)("span",{className:"text-left ml-8",children:"network"})]})})};!function(e){e.TIMETRAVEL="TIMETRAVEL",e.SEARCH="SEARCH",e.WATCHEDTHREADS="WATCHEDTHREADS",e.SETTINGS="SETTINGS",e.WALLET="WALLET"}(Pn||(Pn={}));var lc={id:"0x04eeaa77c96947c5efca4abd8e3f8de005369390409d79dfef81aa983eb69e89",number:"17766365",timestamp:"1628450632"},dc=function(e){var t,n=e.board,c=e.thread,r=hn().provider,s=on().timeTraveledToBlockNumber,l=Object(a.useState)({label:"Site creation",block:lc}),d=Object(i.a)(l,2),b=d[0],j=d[1],u=Object(a.useState)(null),m=Object(i.a)(u,2),p=m[0],O=m[1],x=Object(a.useState)(!1),f=Object(i.a)(x,2),v=f[0],g=f[1],k=Object(a.useRef)(null),y=Object(a.useRef)(null),w=Object(a.useRef)(null),A=Object(a.useRef)(null),N=null===(t=mn().data)||void 0===t?void 0:t.user;Object(a.useEffect)((function(){(c||n)&&j(c?{label:"Thread creation",block:c.createdAtBlock}:n?{label:"Board creation",block:n.createdAtBlock}:{label:"Site creation",block:lc})}),[c,n,j]);var C=Object(nn.a)(Pt,{variables:{},pollInterval:3e4}).data,B=Object(a.useCallback)((function(){g(!v)}),[v,g]),T=["absolute top-0 w-screen sm:w-max mt-1 md:mt-1 left-0 right-0 sm:left-auto sm:right-2 sm:opacity-60 hover:opacity-100",v?"top-11 md:top-full":"top-full md:top-6"].join(" "),S=null===C||void 0===C?void 0:C.boards;return Object(h.jsx)("div",{className:"mb-8 dchan-header-navigation",children:Object(h.jsxs)("div",{className:"text-sm p-01 border-solid border-bottom-tertiary-accent bg-secondary border-0 border-b-2 text-left fixed top-0 left-0 right-0 shadow-md z-50",children:[Object(h.jsx)("span",{className:"text-black text-opacity-50 hover:text-opacity-100 dchan-brackets",children:Object(h.jsx)(o.b,{className:"dchan-link font-bold",to:"/".concat(s?"?block=".concat(s):""),children:"dchan.network"})}),n?Object(h.jsx)(Sn,{board:n}):Object(h.jsx)(h.Fragment,{}),Object(h.jsxs)("span",{className:"text-black text-opacity-50 hover:text-opacity-100 select-none px-1",children:[Object(h.jsx)("span",{className:"inline dchan-brackets",onClick:B,children:Object(h.jsx)("span",{className:"dchan-link",children:"+"})}),Object(h.jsx)("span",{className:v?"hidden md:inline":"hidden",children:Object(h.jsx)("span",{className:"hidden sm:inline-block dchan-brackets",children:!!S&&S.map((function(e){return Object(h.jsxs)("span",{className:"dchan-navigation-board",children:[Object(h.jsx)("wbr",{}),Object(h.jsx)(Sn,{board:e})]},e.id)}))})}),Object(h.jsx)(o.b,{className:"dchan-brackets "+(v?"":"hidden"),to:"".concat(Tn.boards()).concat(s?"?block=".concat(s):""),children:Object(h.jsx)("span",{className:"dchan-link",children:"..."})})]}),Object(h.jsxs)("span",{className:"text-black text-opacity-50 hover:text-opacity-100 select-none pr-1",children:["[",Object(h.jsx)(o.b,{className:"dchan-link",to:"".concat(Tn.posts()).concat(s?"?block=".concat(s):""),children:Object(h.jsx)(Aa,{emoji:"\ud83d\udd0d"})}),"]"]}),Object(h.jsxs)("span",{className:"float-right flex flex-row mx-1",children:[Object(h.jsx)(La,{ref:k,open:p===Pn.TIMETRAVEL,widgetClassName:T,onOpen:function(){O(p===Pn.TIMETRAVEL?null:Pn.TIMETRAVEL)},onClose:function(){return O(null)},startBlock:b.block,startRangeLabel:b.label}),Object(h.jsxs)("details",{className:"mx-1",title:"Watched Threads",open:p===Pn.WATCHEDTHREADS,ref:y,children:[Object(h.jsx)("summary",{className:"list-none cursor-pointer opacity-60 hover:opacity-100 select-none",onClick:function(e){e.preventDefault(),O(p===Pn.WATCHEDTHREADS?null:Pn.WATCHEDTHREADS)},children:Object(h.jsx)(Aa,{emoji:"\u2b50\ufe0f"})}),Object(h.jsx)("div",{className:T,children:Object(h.jsx)(Fa,{})})]}),Object(h.jsxs)("span",{ref:w,title:"Settings",className:"cursor-pointer opacity-60 hover:opacity-100 mx-1 select-none",onClick:function(){O(p===Pn.SETTINGS?null:Pn.SETTINGS)},children:[Object(h.jsx)(Aa,{emoji:"\u2699\ufe0f"}),p===Pn.SETTINGS?Object(h.jsx)(Ac,{onExit:function(){return O(null)},overlayClassName:"w-full sm:w-4/6 h-5/6",children:Object(h.jsx)(Ma,{onExit:function(){return O(null)}})}):""]}),Object(h.jsxs)("details",{className:"mx-1 select-none",open:p===Pn.WALLET,ref:A,children:[Object(h.jsx)("summary",{title:"Wallet",className:"list-none cursor-pointer opacity-60 hover:opacity-100",onClick:function(e){e.preventDefault(),O(p===Pn.WALLET?null:Pn.WALLET)},children:Object(h.jsxs)("span",{className:r?"":"filter grayscale",children:[N?Object(h.jsx)(Na,{user:N}):"",Object(h.jsx)(Aa,{emoji:"\ud83e\udd8a"})]})}),p===Pn.WALLET?Object(h.jsx)("div",{className:T,children:Object(h.jsx)("div",{className:"bg-secondary border border-tertiary-accent border-solid p-1",children:Object(h.jsx)(Sa,{})})}):""]})]}),Object(h.jsx)("div",{className:"w-min top-7 sm:top-full sm:mt-1 left-0 right-0 sm:left-auto mx-auto "+(v?"block md:hidden":"hidden"),children:Object(h.jsx)("span",{className:"dchan-brackets flex",children:!!S&&S.map((function(e){return Object(h.jsxs)("span",{className:"dchan-navigation-board",children:[Object(h.jsx)("wbr",{}),Object(h.jsx)(Sn,{board:e})]},e.id)}))})})]})})},bc=function(e){var t,n=e.id,c=e.className,a=void 0===c?"":c,r=e.children,s=wn(n);return null==r&&(r=s),Object(h.jsx)("span",{style:{backgroundColor:(t=s,"#".concat(wn(t).replace("-","")))},className:[a,jc].join(" "),children:r})},jc="font-mono font-bold text-readable-anywhere pt-0.5 px-0.5 mx-0.5 rounded opacity-75 hover:opacity-100 text-xs whitespace-nowrap",uc=function(e){var t=e.threads,n=e.board,c=e.showBoard,a=void 0!==c&&c,r=on().timeTraveledToBlockNumber;return Object(h.jsx)("div",{children:t.filter((function(e){return!!e.op})).map((function(e){var t,c;return Object(h.jsx)("div",{className:"border-solid border-black border-b border-secondary bg-primary",children:Object(h.jsxs)(Sc,{post:e.op,thread:e,showNsfw:null===n||void 0===n?void 0:n.isNsfw,header:Object(h.jsx)("span",{children:Object(h.jsxs)("span",{className:"p-1 whitespace-nowrap",children:["[",Object(h.jsx)(o.b,{to:"".concat(Tn.thread(e)).concat(r?"?block=".concat(r):""),className:"dchan-link",children:"Reply"}),"]",a&&e.board?Object(h.jsx)("span",{className:"ml-1 whitespace-nowrap",children:Object(h.jsx)(Sn,{board:e.board})}):""]})}),children:[Object(h.jsx)("div",{className:"text-left pl-4 text-sm",children:parseInt(e.replyCount)>1+(null===(t=e.replies)||void 0===t?void 0:t.length)?Object(h.jsxs)(o.b,{to:"".concat(Tn.thread(e)).concat(r?"?block=".concat(r):""),className:"dchan-link",children:["+ ",parseInt(e.replyCount)-(null===(c=e.replies)||void 0===c?void 0:c.length)," ","replies omitted"]}):""}),Object(_n.a)(e.replies||[]).reverse().map((function(t){return Object(h.jsx)(Sc,{post:t,thread:e,showNsfw:null===n||void 0===n?void 0:n.isNsfw},t.id)}))]},e.op.id)},e.id)}))})},hc=n.p+"static/media/spoiler.6b76e9d2.png",mc=n.p+"static/media/ipfs.c10ee176.png",pc=n.p+"static/media/ipfs_error.1c48d4ab.png",Oc=n(329),xc=n(656),fc=function(e){var t=e.hash,n=e.style,c=e.className,r=void 0===c?"":c,s=e.isSpoiler,o=void 0!==s&&s,l=e.isNsfw,d=void 0!==l&&l,b=e.expandable,j=void 0!==b&&b,u=e.thumbnail,m=void 0!==u&&u,p=e.thumbnailClass,O=void 0===p?"max-w-8rem max-h-32":p,x=Object(a.useRef)(null),f=Object(a.useState)(["https://ipfs.dchan.network/ipfs/".concat(t),"https://dweb.link/ipfs/".concat(t),"https://ipfs.io/ipfs/".concat(t)]),v=Object(i.a)(f,2),g=v[0],y=v[1],w=Object(a.useState)(!1),A=Object(i.a)(w,2),N=A[0],C=A[1],B=Object(a.useState)(!0),T=Object(i.a)(B,2),S=T[0],I=T[1],E=Object(a.useState)(),_=Object(i.a)(E,2),D=_[0],P=_[1],M=Object(a.useState)(!1),L=Object(i.a)(M,2),F=L[0],H=L[1],R=Object(a.useState)(!1),Q=Object(i.a)(R,2),$=Q[0],z=Q[1],q=Object(a.useState)(!m),W=Object(i.a)(q,2),Y=W[0],U=W[1],V=Object(a.useRef)(null);O=m?O:"";var J=(!d||$)&&(!o||F),G=Object(a.useCallback)((function(){var e=Object(_n.a)(g),t=e.shift();t&&(P(t),y(Object(_n.a)(e)))}),[g,P,y]);Object(a.useEffect)((function(){!D&&G()}),[G,D]);var X=Object(a.useCallback)((function(){I(!0),P("".concat(null===D||void 0===D?void 0:D.replace(/[&?]t=\d+/,""),"?t=").concat((new Date).getTime())),C(void 0)}),[D,I,P,C]),Z=Object(a.useCallback)((function(e){console.log("ipfs load error",e.target.src),I(!1),C("".concat(e.target.src,": failed to load.")),G()}),[G,C,I]),K=Object(xc.a)(),ee=Object(a.useState)(null),te=Object(i.a)(ee,2),ne=te[0],ce=te[1],ae=Object(Oc.a)(x);Object(a.useEffect)((function(){var e=V.current||{clientWidth:0,clientHeight:0},t=e.clientWidth,n=e.clientHeight;if(J&&!Y&&K.width>768&&null!==ae.clientX&&null!==ae.clientY){var c={x:Math.max(t/2,Math.min(window.outerWidth-t/2,ae.clientX)),y:Math.max(n/2,Math.min(window.outerHeight-n/2,ae.clientY)),flip:ae.clientX>K.width/2};ce(c)}else ce(null)}),[Y,J,K,t,V,ae,ce]);var re=Object(a.useCallback)((function(){return I(!1)}),[I]),se=Object(a.useCallback)((function(){j&&U(!Y)}),[j,Y,U]),ie=Object(a.useCallback)((function(){return z(!0)}),[z]),oe=Object(a.useCallback)((function(){return H(!0)}),[H]);return Object(h.jsxs)("span",{ref:x,className:"relative",children:[Object(h.jsx)("img",{className:"".concat(r," ").concat(!Y||N?O:""," animation-fade-in"),style:S?Object(k.a)(Object(k.a)({},n),{},{position:"absolute"},J?{}:{visibility:"hidden"}):N||!J?{display:"none"}:n,src:D,onLoad:re,loading:"eager",onClick:se,onError:Z,alt:"",ref:V}),!ne||S||N?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 overflow-hidden pointer-events-none opacity-98 z-50",children:Object(h.jsx)("img",{className:"fixed max-w-75vw max-h-75vh z-50 overflow-hidden",style:{left:"".concat(ne.x,"px"),top:"".concat(ne.y,"px"),transform:"translate(".concat(ne.flip?"-100":"0","%, -50%)"),transition:"position 50ms ease-out"},src:D,alt:""})}),Object(h.jsx)("div",{className:"".concat(r," relative"),children:Object(h.jsx)("span",{children:Object(h.jsx)("div",{children:Object(h.jsxs)("div",{children:[S?Object(h.jsxs)("div",{className:"relative center grid",children:[Object(h.jsx)("img",{className:O+" animation-download",style:n,src:mc,onClick:X,alt:""}),Object(h.jsxs)("div",{className:"p-2 text-xs opacity-80 absolute top-0 left-0 bg-primary",title:"Retrieving image from IPFS.",children:["Loading from IPFS...",D?Object(h.jsxs)("div",{children:["Attempting ",new URL(D).hostname]}):Object(h.jsx)(h.Fragment,{})]})]}):N?Object(h.jsxs)("div",{className:"relative center grid",children:[Object(h.jsx)("img",{className:O+" animation-fade-in",style:n,src:pc,onClick:X,alt:""}),Object(h.jsx)("div",{className:"p-2",children:"IPFS Image Load Error"})]}):"",S||N||F||!o?"":Object(h.jsx)("img",{className:O,src:hc,alt:"SPOILER",onClick:oe}),S||N||!F&&o||$||!d?"":Object(h.jsx)("img",{className:O,src:"data:image/png;base64,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",alt:"NSFW",onClick:ie})]})})})})]})},vc=function(e){var t,n=e.limit,c=e.skip,a=e.board,r=on().timeTraveledToBlockNumber,s=r?$t:zt,i=Object(nn.a)(s,{pollInterval:1e4,variables:{block:r,limit:n,skip:c,board:(null===a||void 0===a?void 0:a.id)||""}}),o=i.loading,l=i.data;return Object(h.jsx)("div",{children:o&&!l?Object(h.jsx)(gc,{}):(null===l||void 0===l||null===(t=l.posts)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(ua,{post:e},e.id)})))||Object(h.jsx)("div",{children:"No post found"})})},gc=function(e){var t=e.className,n=void 0===t?"":t,c=on(),a=c.isTimeTraveling,r=c.timeTraveledToDateTime;return Object(h.jsxs)("div",{className:"".concat(n," dchan-loading flex center p-2"),children:[Object(h.jsx)("div",{className:"opacity-80 pr-1",children:Object(h.jsx)(fa,{size:8,reverse:a,speed:"sanic"})}),Object(h.jsx)("div",{className:"",children:a?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"Time traveling to..."}),Object(h.jsx)("div",{className:"text-xs opacity-70",children:null===r||void 0===r?void 0:r.toLocaleString(U.DateTime.DATETIME_SHORT)}),Object(h.jsx)("div",{className:"text-xs opacity-50",children:null===r||void 0===r?void 0:r.toRelative()})]}):Object(h.jsx)(h.Fragment,{children:"Loading..."})})]})},kc=n.p+"static/media/poopie.57245890.png",yc=function(){var e,t,n,c=vn(),a=Object(i.a)(c,1)[0],r=Object(nn.a)(Rt,{variables:{id:(null===a||void 0===a||null===(e=a.contract)||void 0===e?void 0:e.address)||""},skip:!(null!==a&&void 0!==a&&null!==(t=a.contract)&&void 0!==t&&t.address)}).data;return null!==r&&void 0!==r&&null!==(n=r.chanStatus)&&void 0!==n&&n.isLocked?Object(h.jsx)("div",{className:"bg-primary relative",style:{height:"100000vh"},children:Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)(En,{title:Object(h.jsx)("div",{className:"text-red-600 text-4xl",children:"UH OH"}),className:"pt-4",children:Object(h.jsxs)("div",{className:"center grid",children:[Object(h.jsx)("img",{src:kc,alt:"poopie"}),Object(h.jsxs)("div",{className:"p-4",children:[Object(h.jsx)("div",{className:"text-md",children:"Someone made a stinky and dchan got locked."}),Object(h.jsx)("div",{className:"text-sm",children:"Hopefully it wasn't you."})]})]})})})}):Object(h.jsx)("span",{})},wc=function(e){var t=e.children,n=t?t.map?t:[t]:[];return Object(h.jsxs)("details",{className:"dchan-menu z-20 text-sm inline text-left opacity-40 hover:opacity-100 select-none",children:[Object(h.jsx)("summary",{className:"pl-1 relative"}),Object(h.jsx)("div",{className:"dchan-menu-content bg-secondary border border-solid border-black p-1 absolute z-50 pr-4",children:n.map((function(e){return e}))})]})},Ac=function(e){return Object(h.jsx)("div",{className:"flex fixed top-0 bottom-0 left-0 right-0 overflow-scroll bg-black bg-opacity-50 cursor-default pb-8",style:{zIndex:9e3},onClick:e.onExit,children:Object(h.jsx)("div",{className:"".concat(e.overlayClassName," m-auto"),onClick:function(e){return e.stopPropagation()},children:e.children})})},Nc=function(e){var t=e.url,n=e.page,c=e.maxPage,a=e.hasNextPage,r=Object(l.f)(),s=on().timeTraveledToBlockNumber;return Object(h.jsxs)("div",{className:"p-2",children:[Object(h.jsx)("span",{children:Object(h.jsx)(o.b,{className:"dchan-link px-2 ".concat(n>1?"":"dchan-link-disabled"),to:"".concat(t).concat(-1===t.indexOf("?")?"?":"&","page=1").concat(s?"&block=".concat(s):""),children:"<<"})}),Object(h.jsx)("span",{children:Object(h.jsx)(o.b,{className:"dchan-link px-2 ".concat(n>1?"":"dchan-link-disabled"),to:"".concat(t).concat(-1===t.indexOf("?")?"?":"&","page=").concat(n-1).concat(s?"&block=".concat(s):""),children:"<"})}),Object(h.jsxs)("span",{children:["[",Object(h.jsxs)("button",{className:"dchan-link px-2",onClick:function(){var e=prompt("Page number: ".concat(c?"(range: 1-".concat(c,")"):""));if(null!=e){var n=parseInt(e||"");isNaN(n)||n<1||c&&n>c?alert("Invalid page number: ".concat(e)):r.push("".concat(t).concat(-1===t.indexOf("?")?"?":"&","page=").concat(n).concat(s?"&block=".concat(s):""))}},children:["Page ",n,c?" of ".concat(c):""]}),"]"]}),Object(h.jsx)("span",{children:Object(h.jsx)(o.b,{className:"dchan-link px-2 ".concat(!0===a||c&&n<c?"":"dchan-link-disabled"),to:"".concat(t).concat(-1===t.indexOf("?")?"?":"&","page=").concat(n+1).concat(s?"&block=".concat(s):""),children:">"})}),Object(h.jsx)("span",{children:Object(h.jsx)(o.b,{className:"dchan-link px-2 ".concat(!0===a&&c&&n<c?"":"dchan-link-disabled"),to:"".concat(t).concat(-1===t.indexOf("?")?"?":"&","page=").concat(c).concat(s?"&block=".concat(s):""),children:">>"})})]})},Cc=function(e){var t=e.highlight;return Object(h.jsxs)("div",{className:"dchan-popular-boards",children:[Object(h.jsx)(In,{limit:100,highlight:t}),Object(h.jsxs)("div",{className:"border border-solid border-black p-2",children:["[",Object(h.jsx)(o.b,{className:"dchan-link py-1 px-4",to:Tn.boards(),children:"All boards"}),"]"]})]})};function Bc(e,t){var n=e.score;return parseInt(n)/1e9<parseInt("".concat(t||1))}var Tc=n(325),Sc=Object(a.memo)((function(e){var t,n,c,r,s=e.children,l=e.post,d=e.thread,b=e.header,j=e.enableBacklinks,u=void 0!==j&&j,m=e.showNsfw,p=void 0!==m&&m,O=e.showPostMarker,x=void 0===O||O,f=l.id,v=l.from.id,g=l.n,y=l.image,w=l.bans,A=on().timeTraveledToBlockNumber,N=mn().data,C=Object(a.useState)(),B=Object(i.a)(C,2),T=B[0],S=B[1],I=Object(a.useState)(!1),E=Object(i.a)(I,2),_=E[0],D=E[1],P=Object(a.useState)(!1),M=Object(i.a)(P,2),L=M[0],F=M[1],H=Object(a.useState)(!1),R=Object(i.a)(H,2),Q=R[0],$=R[1],z=Object(a.useState)({}),q=Object(i.a)(z,2),W=q[0],Y=q[1],U=Object(a.useRef)(null),V=ft(),J=V.subscribe,G=V.unsubscribe,X=Object(a.useCallback)((function(){var e;null===(e=U.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})}),[U]);Object(a.useEffect)((function(){var e=J("POST_FOCUS",(function(e,t){var n=l.id===t.id;F(n),$(n),n&&X()}));return function(){G(e)}})),Object(a.useEffect)((function(){var e=J("POST_HIGHLIGHT",(function(e,t){l.id===t&&$(!0)}));return function(){G(e)}})),Object(a.useEffect)((function(){var e=J("POST_DEHIGHLIGHT",(function(e,t){l.id!==t||L||$(!1)}));return function(){G(e)}})),Object(a.useEffect)((function(){if(u){var e=J("POST_BACKLINK",(function(e,t){var n=t.from,c=t.to.n;"".concat(c)!=="".concat(l.n)||n.id in W||Y(Object(k.a)(Object(k.a)({},W),{},Object(pn.a)({},n.id,n)))}));return function(){e&&G(e)}}}));var Z=y?"https://ipfs.dchan.network/ipfs/".concat(y.ipfsHash):"",K=f===(null===d||void 0===d?void 0:d.id),ee=(null===N||void 0===N||null===(t=N.user)||void 0===t?void 0:t.id)===l.from.id,te=vn(),ne=Object(i.a)(te,1)[0],ce=!Bc(l,null===ne||void 0===ne||null===(n=ne.content_filter)||void 0===n?void 0:n.score_threshold)||(null===ne||void 0===ne||null===(c=ne.content_filter)||void 0===c?void 0:c.show_below_threshold)||_,ae=Object(a.useRef)(null),re=Object(a.useState)(ce),se=Object(i.a)(re,2),ie=se[0],oe=se[1];Object(a.useEffect)((function(){ae.current&&oe(ae.current.open)}),[ae,oe]),Object(a.useEffect)((function(){fetch(Z,{method:"HEAD"}).then((function(e){200===e.status?S(Number(e.headers.get("Content-Length"))):console.error("HEAD",Z,{response:e})}))}),[Z,S]);var le=[Q||L?"bg-tertiary border-bottom-secondary-accent":K?"":"bg-secondary border-bottom-tertiary-accent border-right-tertiary-accent",ee?"dchan-post-you":"","w-full sm:w-full my-2 inline-block relative p-0.5 table"].join(" ");return Object(h.jsxs)("div",{className:"flex relative",id:"".concat(g),children:[!K&&x?Object(h.jsx)("span",{className:"hidden md:block pl-2 text-secondary",children:">>"}):"",Object(h.jsxs)("div",{className:"mx-auto sm:mr-3 sm:ml-2 text-left inline ".concat(K?"w-full":""),ref:U,children:[Object(h.jsx)("details",{className:"absolute ml-2 z-10 dchan-post-minimizer opacity-70 hover:opacity-100",ref:ae,open:ce,onToggle:function(e){oe(e.target.open)},children:Object(h.jsx)("summary",{})}),Object(h.jsx)("div",{className:"text-left opacity-50 whitespace-nowrap mb-1 mt-2 overflow-hidden flex ml-5 ".concat(ie?"hidden":""),title:"Hide/Show",children:Object(h.jsx)(ja,{thread:d,post:l,children:b})}),Object(h.jsx)("div",{className:"dchan-post bg-primary text-left ".concat(ie?"":"hidden"),"dchan-post-from-address":v,children:Object(h.jsxs)("div",{className:le,children:[Object(h.jsxs)("div",{className:"flex sm:flex-wrap ml-5 align-center text-center sm:text-left sm:justify-start max-w-100vw",children:[Object(h.jsx)(ja,{thread:d,post:l,backlinks:W,children:b}),l.sage?Object(h.jsx)("abbr",{className:"opacity-20 hover:opacity-100",title:"Saged. Thread not bumped.",children:"\ud83c\udf42"}):""]}),ce?Object(h.jsxs)("div",{children:[y?Object(h.jsx)("div",{className:"text-center sm:text-left ml-5",children:Object(h.jsx)("span",{className:"text-sm",children:Object(h.jsxs)("span",{className:"flex flex-wrap items-center",children:[Object(h.jsx)("a",{target:"_blank",rel:"noreferrer",className:"dchan-link underline max-w-64",href:Z,title:y.name,children:Object(On.truncate)(y.name,{length:32,omission:"..."})}),T?Object(h.jsxs)("span",{className:"mx-1 text-xs opacity-40 hover:opacity-100",children:["(",Object(Tc.a)(T),")"]}):Object(h.jsx)(h.Fragment,{}),Object(h.jsx)(wc,{children:Object(h.jsxs)("div",{children:["Reverse search:",Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsx)("a",{target:"_blank",rel:"noreferrer",className:"dchan-link pr-1",href:"https://yandex.com/images/search?rpt=imageview&url=".concat(Z),children:"yandex"})}),Object(h.jsx)("div",{children:Object(h.jsx)("a",{target:"_blank",rel:"noreferrer",className:"dchan-link pr-1",href:"//iqdb.org/?url=".concat(Z),children:"iqdb"})}),Object(h.jsx)("div",{children:Object(h.jsx)("a",{target:"_blank",rel:"noreferrer",className:"dchan-link pr-1",href:"https://trace.moe/?auto&url=".concat(Z),children:"wait"})})]})]})}),Object(h.jsx)("span",{className:"whitespace-nowrap",children:Object(h.jsx)("a",{target:"_blank",rel:"noreferrer",className:"px-1 opacity-20 hover:opacity-100 hidden sm:inline-block",href:Z,title:y.name,children:Object(h.jsx)("small",{children:y.ipfsHash})})})]})})}):"",Object(h.jsxs)("div",{className:"y-1",children:[Object(h.jsx)("div",{className:"h-full max-w-max flex flex-wrap text-left sm:items-start pb-1 max-w-100vw",children:Object(h.jsxs)("div",{className:"w-full table pt-1",children:[y?Object(h.jsx)("div",{className:"mx-5 my-1 float-left",children:Object(h.jsx)(fc,{hash:y.ipfsHash,isSpoiler:y.isSpoiler,isNsfw:!p&&(y.isNsfw||(null===(r=l.board)||void 0===r?void 0:r.isNsfw))||!1,thumbnail:!0,thumbnailClass:K?"max-w-8rem max-h-32 md:max-w-16rem md:max-h-64":void 0,expandable:!0})}):"",Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:K&&d?Object(h.jsx)("div",{className:"font-semibold md:ml-10 ml-5 ",children:d.subject}):""}),Object(h.jsx)(la,{className:"md:ml-10 ml-4 mr-4 pb-2",post:l,thread:d}),w.length>0?Object(h.jsx)("div",{className:"text-xl font-bold text-contrast whitespace-nowrap",children:"( USER WAS BANNED FOR THIS POST )"}):""]})]})}),s,Object(h.jsx)(o.b,{className:"px-1 text-xs opacity-5 hover:opacity-100 absolute bottom-0 right-0 hidden sm:inline",to:"/".concat(l.id).concat(A?"?block=".concat(A):""),title:"Permalink",children:Object(h.jsx)("small",{children:l.id})})]})]}):Object(h.jsxs)("button",{onClick:function(){return D(!0)},className:"text-2xl text-gray-800",children:[Object(h.jsx)("div",{children:Object(h.jsx)(Aa,{emoji:"\u26a0\ufe0f"})}),Object(h.jsx)("div",{children:"Post hidden due to reports."}),Object(h.jsx)("div",{className:"text-sm text-gray-600",children:"Click to show anyway."})]})]})})]},f)]})}),On.isEqual),Ic=n(194),Ec=n(40),_c=Ic.regexp.bind({});function Dc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];return Ec.or.apply(void 0,n)(e)}function Pc(e){var t=[];if(0===e.length)return e;for(var n=e[0],c=1;c<e.length;c++){var a=e[c];"text"===n.type&&"text"===a.type?(n.value+=a.value,n.key+=a.key):(t.push(n),n=e[c])}return t.push(n),t}var Mc=_c(/.[^[\n>hfQ]*/g).pipe(Object(Ec.map)((function(e){return{type:"text",key:e[0],value:e[0]}}))),Lc=_c(/(Qm[1-9A-Za-z]{44})/).pipe(Object(Ec.map)((function(e){return{type:"ipfs",key:e[0],hash:e[0]}}))),Fc=Object(Ic.string)("\n").pipe(Object(Ec.map)((function(){return{type:"newline",key:""}}))),Hc=_c(/>>(0[xX][0-9a-fA-F]+)/).pipe(Object(Ec.map)((function(e){return{type:"ref",key:e[1],id:e[1]}}))),Rc=_c(/(0[xX][0-9a-fA-F]+)/).pipe(Object(Ec.map)((function(e){return{type:"txhashref",key:e[1],id:e[1]}}))),Qc=_c(/>>(?:(0[xX][0-9a-fA-F]+)\/)?(\d+)/).pipe(Object(Ec.map)((function(e){return{type:"postref",key:"".concat(e[1],"/").concat(e[2]),id:e[1],n:e[2]}}))),$c=Dc(Rc,_c(/>>(\/[a-zA-Z]+\/)(0[xX][0-9a-fA-F]+(?:\/\d+)?)?/).pipe(Object(Ec.map)((function(e){return{type:"boardref",key:"".concat(e[1]).concat(e[2]),board:e[1],id:e[2]}}))),Qc,Hc),zc=_c(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/i).pipe(Object(Ec.map)((function(e){return{type:"link",key:e[0],value:e[0]}}))),qc=Object(Ec.later)(),Wc=qc.pipe(Object(Ec.many)(),Object(Ec.between)("[spoiler]","[/spoiler]"),Object(Ec.map)((function(e){for(var t=Pc(e),n=0;n<t.length;n++)t[n].key+=" ".concat(n);return{type:"spoiler",key:Object(On.uniqueId)("spoiler_"),value:t}}))),Yc=_c(/[^[][^[\n>hfQ]*/g).pipe(Object(Ec.map)((function(e){return{type:"text",key:e[0],value:e[0]}}))),Uc=_c(/((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube(-nocookie)?\.com|youtu.be))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?/g).pipe(Object(Ec.map)((function(e){return{type:"youtubelink",key:e[6],id:e[6],url:e[0]}}))),Vc=_c(/https?:\/\/(www\.)?soundcloud\.com\/.+\w/g).pipe(Object(Ec.map)((function(e){return{type:"soundcloudlink",key:e[6],id:e[6],url:e[0]}})));qc.init(Dc($c,Wc,zc,Lc,Fc,Yc,Uc,Vc));var Jc=Dc(Wc,Uc,Vc,zc,Lc,Mc),Gc=_c(/^>/m).pipe(Object(Ec.qthen)(Dc($c,Jc).pipe(Object(Ec.many)())),Object(Ec.thenq)(_c(/$/m).pipe(Object(Ec.backtrack)())),Object(Ec.map)((function(e){for(var t=Pc(e),n=0;n<t.length;n++)t[n].key+=" ".concat(n);return{type:"textquote",key:Object(On.uniqueId)("textquote_"),value:t}}))),Xc=Dc($c,Gc,Fc,Jc).pipe(Object(Ec.many)(),Object(Ec.map)((function(e){for(var t=Pc(e),n=0;n<t.length;n++)t[n].key+=" ".concat(n);return t}))),Zc=n(326),Kc=n.n(Zc),ea=function(e){var t=e.children,n=e.post,c=e.thread,a=e.block;return Object(h.jsxs)("span",{className:"text-quote",children:[">",t.map((function(e){return oa(e,n,c,a)}))]})};function ta(e){var t=e.link,n=e.children;return Object(h.jsxs)(o.b,{className:"dchan-postref dchan-link",to:t,children:[Object(h.jsx)("wbr",{}),Object(h.jsxs)("span",{children:[">>",n]})]})}function na(e){var t=e.id,n=e.children;return Object(h.jsxs)(o.b,{className:"dchan-link",to:"https://polygonscan.com/tx/".concat(t),children:[Object(h.jsx)("wbr",{}),Object(h.jsx)("span",{children:n})]})}function ca(e){var t=e.post,n=e.thread,c=e.value,r=e.block,s=ft().publish,i=c.id?"".concat(c.id,"/").concat(c.n):c.n,l=Object(a.useMemo)((function(){return n&&[n.op].concat(Object(_n.a)(n.replies||[])).find((function(e){return c.id?"".concat(e.from.id,"/").concat(e.n)===i||"0x".concat(wn(e.from.id).replace("-",""),"/").concat(e.n)===i:e.n===c.n}))}),[n,c,i]);Object(a.useEffect)((function(){var e={from:t,to:{userId:c.id,n:c.n}};s("POST_BACKLINK",e)}),[t,c,s]);var d=Object(a.useCallback)((function(){null!=l&&s("POST_HIGHLIGHT",l.id)}),[s,l]),b=Object(a.useCallback)((function(){null!=l&&s("POST_DEHIGHLIGHT",l.id)}),[s,l]),j="".concat(t.thread?Tn.thread(t.thread):t.board?Tn.board(t.board):"","/"),u=hn().accounts,m=n&&l&&n.op.id===l.id,p=u&&u[0]&&l&&u[0]===l.from.address,O=n&&!l;return Object(h.jsxs)(o.b,{className:"dchan-postref dchan-link",to:"".concat(O?"/":j).concat(i).concat(r?"?block=".concat(r):""),onMouseEnter:d,onMouseLeave:b,children:[Object(h.jsx)("wbr",{}),Object(h.jsxs)("span",{className:"whitespace-nowrap",children:[">>",i]}),m?" (OP)":"",p?" (You)":""]})}function aa(e){var t=e.children,n=e.post,c=e.thread,a=e.block;return Object(h.jsx)("span",{className:"dchan-post-spoiler",children:t.map((function(e){return oa(e,n,c,a)}))})}function ra(e){var t=e.link;return Object(h.jsx)("a",{className:"dchan-link",href:t,target:"_blank",rel:"noreferrer",children:t})}function sa(e){var t=e.hash;return Object(h.jsxs)("details",{className:"inline w-full",children:[Object(h.jsx)("summary",{children:Object(h.jsx)("a",{className:"dchan-link",href:"//ipfs.dchan.network/ipfs/".concat(t),target:"_blank",rel:"noreferrer",children:t})}),Object(h.jsx)("img",{src:"//ipfs.dchan.network/ipfs/".concat(t),alt:""})]})}function ia(e){var t=e.url,n=e.id,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useCallback)((function(){o(!s)}),[s,o]);return Object(h.jsxs)("span",{id:n,children:[Object(h.jsx)(ra,{link:t})," ",Object(h.jsxs)("button",{className:"dchan-link",onClick:l,children:["(",s?"unembed":"embed",")"]}),s?Object(h.jsx)(Kc.a,{url:t,controls:!0,className:"grid"}):""]})}function oa(e,t,n,c){switch(e.type){case"text":return e.value;case"link":return Object(h.jsx)(ra,{link:e.value},e.key);case"ipfs":return Object(h.jsx)(sa,{hash:e.hash},e.key);case"newline":return Object(h.jsx)("br",{},e.key);case"textquote":return Object(h.jsx)(ea,{post:t,thread:n,block:c,children:e.value},e.key);case"ref":return Object(h.jsx)(ta,{link:"/".concat(e.id).concat(c?"?block=".concat(c):""),children:e.id},e.key);case"txhashref":return Object(h.jsx)(na,{id:e.id,children:e.id},e.key);case"postref":return Object(h.jsx)(ca,{post:t,thread:n,block:c,value:e},e.key);case"boardref":return Object(h.jsxs)(ta,{link:"/".concat(e.id).concat(c?"?block=".concat(c):""),children:[e.board,e.id]},e.key);case"spoiler":return Object(h.jsx)(aa,{post:t,thread:n,block:c,children:e.value},e.key);case"youtubelink":case"soundcloudlink":return Object(h.jsx)(ia,{url:e.url,id:e.id},e.key)}}var la=Object(a.memo)((function(e){var t=e.post,n=e.thread,c=e.style,r=void 0===c?{}:c,s=e.className,i=void 0===s?"":s,o=on().timeTraveledToBlockNumber,l=Object(a.useMemo)((function(){return""===(e=t.comment)?[]:Xc.parse(e).value;var e}),[t.comment]);return Object(h.jsx)("div",{className:i+" block text-left break-words font-sans text-sm max-w-100vw dchan-post-body",style:r,children:l.map((function(e){return oa(e,t,n,null===o||void 0===o?void 0:o.toString())}))},"".concat(t.id,"-").concat(null===n||void 0===n?void 0:n.id))}),On.isEqual);function da(e){return U.DateTime.fromSeconds(parseInt(e))}var ba=function(e){var t=e.post,n=da(t.createdAtBlock.timestamp),c=on().currentBlock,a=n.toRelative(),r=c?da(c.timestamp):void 0,s=r&&n.diff(r).milliseconds?n.toRelative({base:r}):"Now",i="".concat(n.toLocaleString({day:"2-digit",month:"2-digit",year:"2-digit"}),"(").concat(n.weekdayShort,")").concat(n.toLocaleString(U.DateTime.TIME_24_WITH_SECONDS)),d=Object(l.g)(),b=Object(sn.parse)(d.search);b.block="".concat(t.createdAtBlock.number);var j="".concat(d.pathname,"?").concat(new URLSearchParams(b).toString());return Object(h.jsxs)("span",{className:"px-0.5 whitespace-nowrap text-sm flex center",title:null!==a?a:void 0,children:[i,Object(h.jsxs)("span",{className:"text-xs px-1 opacity-20 hover:opacity-100 inline-block",children:["[",Object(h.jsx)(o.b,{title:"Time travel to ".concat(i),to:j,children:c?Object(h.jsxs)("span",{children:[s," (",a,")"]}):a}),"]"]})]})},ja=function(e){var t,n,c,r=e.post,s=e.thread,l=e.backlinks,d=e.children,b=on().timeTraveledToBlockNumber,m=r.id,p=r.n,O=r.name,x=r.from.address,f=hn(),v=f.provider,g=f.accounts,y=ft().publish,w=vn(),A=Object(i.a)(w,1)[0],N=mn(),C=mn(x),B=g.length>0&&g[0]===x,T=Object(a.useState)(),S=Object(i.a)(T,2),I=S[0],E=S[1],_=(null===s||void 0===s||null===(t=s.board)||void 0===t?void 0:t.id)&&N.isJannyOf(s.board.id),D=C.isAdmin(),P=(null===s||void 0===s||null===(n=s.board)||void 0===n?void 0:n.id)&&C.isJannyOf(null===s||void 0===s?void 0:s.board.id),M=Object(a.useCallback)((function(e,t){y("FORM_QUOTE",Object(k.a)({n:t},s&&[].concat(Object(_n.a)(s.replies||[]),[s.op]).filter((function(e){return e.n===t})).length>1?{from:e}:{}))}),[s,y]),F=Object(a.useCallback)(function(){var e=Object(u.a)(Object(j.a)().mark((function e(t,n){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=n||parseFloat(prompt("How much? (MATIC)")||""),!isNaN(n)){e.next=5;break}return alert("Invalid amount"),e.abrupt("return");case 5:return e.next=7,L(g[0],t,n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error({onSendTipError:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[g]),H=null===s||void 0===s?void 0:s.isPinned,R=null===s||void 0===s?void 0:s.isLocked,Q=m===(null===s||void 0===s?void 0:s.id),$=Q&&_,z=B||_,q=_,W=Q&&(B||_),Y=l?Object.values(l):[],U=fn(),V=U.isFavorite,J=U.addFavorite,G=U.removeFavorite,X=!(!s||!V)&&V(s),K=Object(a.useCallback)((function(){s&&G&&J&&(X?G(s):J(s))}),[J,G,s,X]);return Object(h.jsxs)("span",{className:"max-w-95vw inline-flex flex-wrap items-center relative",children:[Q&&s?Object(h.jsx)("button",{className:"inline-block ".concat(X?"opacity-70 hover:opacity-100":"opacity-40 hover:opacity-70"),title:X?"Remove from watched":"Add to watched",onClick:K,children:Object(h.jsx)(Aa,{emoji:X?"\ud83c\udf1f":"\u2b50\ufe0f"})}):Object(h.jsx)("span",{}),Object(h.jsx)("span",{className:"px-0.5 whitespace-nowrap",children:Object(h.jsxs)("span",{className:"font-bold font-size-090rem ".concat(D?"text-red-600":P?"text-purple-600":"text-accent"),title:D?"This user is an administrator.":P?"This user is a moderator for this board.":"",children:[O&&""!==O?O:"Anonymous",D?" ## Admin":P?" ## Mod":""]})}),Object(h.jsxs)("span",{className:"px-1 whitespace-nowrap text-xs",children:["(ID: ",Object(h.jsx)(Na,{user:r.from})," )",v&&g&&g[0]?Object(h.jsx)(wc,{children:Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"dchan-link flex-grow opacity-50 hover:opacity-100",title:"Send MATIC tip",onClick:function(){return F(x)},children:"\ud83d\udcb8 Send Tip"})})}):""]}),Object(h.jsx)(ba,{post:r}),Object(h.jsxs)("span",{className:"whitespace-nowrap flex center",children:[Object(h.jsxs)("span",{className:"px-0.5 on-parent-target-font-bold text-sm whitespace-nowrap",children:[Object(h.jsx)(o.b,{className:"dchan-link",to:"".concat(Tn.post(r)).concat(b?"?block=".concat(b):""),title:"Link to this post",children:"No."}),Object(h.jsx)("span",{className:"dchan-link",title:"Reply to this post",onClick:function(){return M(r.from.id,r.n)},children:p})]}),Object(h.jsxs)("span",{children:[Q&&H?Object(h.jsx)("span",{title:"Thread pinned. This might be important.",children:Object(h.jsx)(Aa,{emoji:"\ud83d\udccc"})}):Object(h.jsx)("span",{}),Q&&R?Object(h.jsx)("span",{title:"Thread locked. You cannot reply anymore.",children:Object(h.jsx)(Aa,{emoji:"\ud83d\udd12"})}):Object(h.jsx)("span",{}),Bc(r,null===A||void 0===A||null===(c=A.content_filter)||void 0===c?void 0:c.score_threshold)?Object(h.jsx)("span",{title:"Post hidden due to reports. Click to show anyway.",children:Object(h.jsx)(Aa,{emoji:"\u26a0\ufe0f"})}):Object(h.jsx)("span",{})]}),Object(h.jsxs)(wc,{children:[Object(h.jsx)("div",{children:Object(h.jsxs)("a",{href:"https://polygonscan.com/tx/".concat(r.id),title:"TX Details",target:"_blank",rel:"noreferrer",children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udd0d"})," TX Details"]})}),Object(h.jsx)("div",{children:Object(h.jsxs)(o.b,{to:"".concat(Tn.post(r),"?block=").concat(r.createdAtBlock.number),children:[Object(h.jsx)(Aa,{emoji:"\u23f1\ufe0f"})," Time travel to"]})}),g&&g[0]?Object(h.jsxs)("div",{children:[W?Object(h.jsx)("div",{children:s&&s.isLocked?Object(h.jsxs)("span",{children:[Object(h.jsx)("input",{name:"lock",type:"hidden",value:"false"}),Object(h.jsxs)("button",{onClick:function(){return he(m,g,E)},children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udd13"})," Unlock"]})]}):Object(h.jsxs)("span",{children:[Object(h.jsx)("input",{name:"lock",type:"hidden",value:"true"}),Object(h.jsxs)("button",{onClick:function(){return je(m,g,E)},children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udd12"})," Lock"]})]})}):"",$?Object(h.jsx)("div",{children:s&&s.isPinned?Object(h.jsxs)("span",{children:[Object(h.jsx)("input",{name:"sticky",type:"hidden",value:"false"}),Object(h.jsxs)("button",{onClick:function(){return xe(m,g,E)},children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udccc"})," Unpin"]})]}):Object(h.jsxs)("span",{children:[Object(h.jsx)("input",{name:"sticky",type:"hidden",value:"true"}),Object(h.jsxs)("button",{onClick:function(){return pe(m,g,E)},children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udccc"})," Pin"]})]})}):"",z?Object(h.jsx)("div",{children:Object(h.jsxs)("button",{onClick:function(){return Z(m,g,E)},children:[Object(h.jsx)(Aa,{emoji:"\u274c"})," Remove"]})}):"",q?Object(h.jsx)("div",{children:Object(h.jsxs)("button",{onClick:function(){return ve(m,g,E)},children:[Object(h.jsx)(Aa,{emoji:"\ud83d\udd2b"})," Ban"]})}):"",Object(h.jsx)("div",{children:Object(h.jsxs)("button",{onClick:function(){return ne(m,g,E)},children:[Object(h.jsx)(Aa,{emoji:"\u26a0\ufe0f"})," Report"]})})]}):""]})]}),d,Object(h.jsx)("span",{className:"dchan-backlinks text-left text-xs flex flex-wrap",children:null===Y||void 0===Y?void 0:Y.map((function(e){return Object(h.jsx)(o.b,{className:"dchan-link px-1",to:"".concat(Tn.post(e)).concat(b?"?block=".concat(b):""),onMouseEnter:function(){return y("POST_HIGHLIGHT",e.id)},onMouseLeave:function(){return y("POST_DEHIGHLIGHT",e.id)},children:">>".concat(e.n)},e.id)}))}),Object(h.jsx)(va,{status:I})]})},ua=function(e){var t,n=e.post,c=on().timeTraveledToBlockNumber,r=Object(l.f)(),s="/".concat(n.id).concat(c?"?block=".concat(c):""),i=Object(a.useCallback)((function(){r.push(s)}),[r,s]);return Object(h.jsx)("div",{"data-theme":null!==n&&void 0!==n&&null!==(t=n.board)&&void 0!==t&&t.isNsfw?"nsfw":"blueboard",onDoubleClick:i,children:Object(h.jsx)(Sc,{post:n,showPostMarker:!1,header:Object(h.jsxs)("span",{children:[Object(h.jsxs)("span",{className:"p-1 whitespace-nowrap",children:["[",Object(h.jsx)(o.b,{to:s,className:"dchan-link inline",title:"View post in thread",children:"View"}),"]"]}),n.board?Object(h.jsx)("span",{className:"whitespace-nowrap",children:Object(h.jsx)(Sn,{board:n.board})}):""]})},n.id)})},ha=function(){return Object(h.jsx)(En,{title:Object(h.jsx)("span",{children:"The rules"}),className:"flex flex-col flex-grow flex-shrink-0",bodyClassName:"flex",collapsible:!1,children:Object(h.jsx)("div",{className:"p-8",children:Object(h.jsxs)("ul",{className:"list-disc text-wrap text-left m-auto",children:[Object(h.jsx)("li",{children:"Do not post anything that can get you in trouble with local or global jurisdictions."}),Object(h.jsx)("li",{children:"Be decent."})]})})})},ma=Object(d.b)([!1,function(){}],(function(){return Object(a.useState)(!1)})),pa=function(){var e=ma(),t=Object(i.a)(e,2),n=t[0],c=t[1];return n?Object(h.jsx)(Ac,{onExit:function(){return c(!1)},children:Object(h.jsx)(ha,{})}):null},Oa=function(e){var t=e.className,n=void 0===t?"":t,c=ma(),a=Object(i.a)(c,2)[1];return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("span",{className:"".concat(n," cursor-pointer dchan-link"),onClick:function(e){e.stopPropagation(),e.preventDefault(),a(!0)},children:"Rules"})})},xa=function(){var e,t,n,c,a=vn(),r=Object(i.a)(a,2),s=r[0],o=r[1];return Object(h.jsxs)("details",{children:[Object(h.jsx)("summary",{children:Object(h.jsxs)("span",{children:[Object(h.jsxs)("span",{className:"whitespace-nowrap",children:[Object(h.jsx)("label",{className:"pl-2",htmlFor:"dchan-input-view-mode",children:"Sort by"}),Object(h.jsxs)("select",{id:"dchan-input-view-mode",onChange:function(e){s&&o(Object(k.a)(Object(k.a)({},s),{},{content_view:Object(k.a)(Object(k.a)({},s.content_view),{},{board_sort_threads_by:e.target.value})}))},value:null===s||void 0===s||null===(e=s.content_view)||void 0===e?void 0:e.board_sort_threads_by,children:[Object(h.jsx)("option",{value:"lastBumpedAt",children:"Last bumped at"}),Object(h.jsx)("option",{value:"replyCount",children:"Reply count"}),Object(h.jsx)("option",{value:"imageCount",children:"File count"})]})]}),Object(h.jsxs)("span",{className:"whitespace-nowrap",children:[Object(h.jsx)("label",{className:"pl-2",htmlFor:"dchan-input-view-mode",children:"Sort direction"}),Object(h.jsxs)("select",{id:"dchan-input-view-mode",onChange:function(e){s&&o(Object(k.a)(Object(k.a)({},s),{},{content_view:Object(k.a)(Object(k.a)({},s.content_view),{},{board_sort_direction:e.target.value})}))},value:null===s||void 0===s||null===(t=s.content_view)||void 0===t?void 0:t.board_sort_direction,children:[Object(h.jsx)("option",{value:"asc",children:"Ascending"}),Object(h.jsx)("option",{value:"desc",children:"Descending"})]})]})]})}),Object(h.jsxs)("div",{className:"bg-secondary border border-tertiary-accent border-solid p-2",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"px-2",htmlFor:"dchan-input-view-mode",children:"Page size"}),Object(h.jsx)("input",{id:"dchan-input-page-size",type:"number",min:1,value:null===s||void 0===s||null===(n=s.content_view)||void 0===n?void 0:n.page_size,onChange:function(e){s&&o(Object(k.a)(Object(k.a)({},s),{},{content_view:Object(k.a)(Object(k.a)({},s.content_view),{},{page_size:Number(e.target.value)})}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"px-2",htmlFor:"dchan-input-view-mode",children:"Default board view mode"}),Object(h.jsxs)("select",{id:"dchan-input-view-mode",onChange:function(e){s&&o(Object(k.a)(Object(k.a)({},s),{},{content_view:Object(k.a)(Object(k.a)({},s.content_view),{},{board_default_view_mode:e.target.value})}))},value:null===s||void 0===s||null===(c=s.content_view)||void 0===c?void 0:c.board_default_view_mode,children:[Object(h.jsx)("option",{value:"catalog",children:"Catalog"}),Object(h.jsx)("option",{value:"index",children:"Index"})]})]})]})]})},fa=function(e){var t=e.speed,n=void 0===t?"slow":t,c=e.reverse,a=void 0!==c&&c,r=e.size,s=void 0===r?16:r;return Object(h.jsx)("span",{className:"center flex",children:Object(h.jsx)("img",{className:"spin-".concat(n," h-").concat(s," w-").concat(s," ").concat(a?"animation-direction-reverse":""," animation-spin pointer-events-none"),src:$n,alt:""})})},va=function(e){var t=e.status,n=e.className,c=void 0===n?"":n;return t?Object(h.jsx)("div",{className:c+" inline-block text-xs",children:Object(h.jsx)("div",{className:"bg-secondary px-1 border border-black",children:t.error?Object(h.jsx)("div",{className:"text-red-600",children:Object(h.jsxs)("details",{children:[Object(h.jsx)("summary",{children:"Error"}),Object(h.jsx)("pre",{className:"whitespace-pre-wrap",children:t.error.message?t.error.message:JSON.stringify(t.error,null,2)})]})}):t.progress?Object(h.jsxs)("div",{className:"text-gray-900 flex center",children:[Object(h.jsx)(fa,{size:4,speed:"faster"}),Object(h.jsx)("span",{className:"px-2",children:t.progress})]}):t.success?Object(h.jsx)("div",{className:"text-green-600",children:Object(h.jsx)("span",{className:"px-2",children:t.success})}):Object(On.isString)(t)?t:"{}"===JSON.stringify(t)?"No tx result returned by wallet, but it likely went through successfully.":JSON.stringify(t)})}):Object(h.jsx)("span",{})},ga=function(e){var t=e.ms,n=void 0===t?1e4:t,c=e.children,r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){l(!0)}),n);return function(){return clearTimeout(e)}}),[n]),o?c:Object(h.jsx)("span",{})},ka=function(e){var t=e.children,n=e.className,c=void 0===n?"":n,s=e.sectionClassName,o=void 0===s?"":s,l=e.containerClassName,d=void 0===l?"":l,b=Object(a.useState)(t.keys().next().value),j=Object(i.a)(b,2),u=j[0],m=j[1],p=u;return t.has(u)||(p=t.keys().next().value),Object(h.jsxs)("article",{className:"".concat(c),children:[Object(h.jsx)("header",{className:"bg-white border border-black flex flex-row justify-evenly",style:{flex:"0 1 auto"},children:Array.from(t.keys()).map((function(e,n){return Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)("button",{className:["bg-highlight py-1 px-4 w-full font-bold",e===p?"opacity-100":"opacity-80 hover:opacity-100"].join(" "),onClick:function(){m(e)},children:e}),n<t.size-1?Object(h.jsx)("div",{className:"border-l border-black"}):null]},e)}))}),Object(h.jsx)("section",{className:"bg-white border border-black flex flex-col border-t-0 ".concat(o),style:{flex:"1 1 auto"},children:Object(h.jsx)("div",{className:d,children:Array.from(t.entries()).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(h.jsx)("div",{className:["",n!==p?"hidden":""].join(" "),style:{flex:"0 0 auto"},children:c},n)}))})}),Object(h.jsx)("div",{})]})},ya=function(e){var t=e.className,n=void 0===t?"":t,c=e.limit,r=e.board,s=on(),i=s.currentBlock,o=s.timeTraveledToBlockNumber,l=Object(a.useMemo)((function(){return Math.floor((i?parseInt(i.timestamp):U.DateTime.now().toSeconds())-2592e3)}),[i]),d=Object(nn.a)(o?Kt:en,{pollInterval:3e4,fetchPolicy:o?"cache-first":"network-only",variables:{block:o,limit:c,cutoff:l,board:(null===r||void 0===r?void 0:r.id)||""}}),b=d.data;return d.loading?Object(h.jsx)("div",{className:"border border-solid border-black flex-grow p-2",children:Object(h.jsx)(gc,{})}):b?Object(h.jsx)(ka,{className:"".concat(n," w-auto"),children:new Map([["Most popular",b.mostPopular.length?Object(h.jsx)(uc,{threads:b.mostPopular,showBoard:!0}):Object(h.jsx)("div",{className:"p-4",children:"No active threads."})],["Last created",b.lastCreated.length?Object(h.jsx)(uc,{threads:b.lastCreated,showBoard:!0}):Object(h.jsx)("div",{className:"p-4",children:"No active threads."})],["Last bumped",b.lastBumped.length?Object(h.jsx)(uc,{threads:b.lastBumped,showBoard:!0}):Object(h.jsx)("div",{className:"p-4",children:"No active threads."})]])}):Object(h.jsx)("span",{})},wa=n(327),Aa=Object(a.memo)((function(e){var t=e.emoji;return Object(h.jsx)("span",{dangerouslySetInnerHTML:{__html:wa.a.parse(t,{folder:"svg",ext:".svg",base:"/vendors/twemoji/"})}})})),Na=function(e){var t=e.user,n=e.className,c=void 0===n?"":n;return Object(h.jsx)("a",{className:"dchan-link",href:"https://polygonscan.com/address/".concat(t.address),target:"_blank",children:Object(h.jsx)(bc,{id:t.address||"0x000000",className:c,children:t.b58id})})},Ca=function(){return Object(h.jsxs)("span",{children:[Object(h.jsx)(Sa,{}),Object(h.jsx)(Ba,{}),Object(h.jsx)(Ia,{}),Object(h.jsx)(Ea,{})]})},Ba=function(){var e,t=hn(),n=t.provider,c=t.accounts,a=t.balance,r=t.chainId,s=null===(e=mn().data)||void 0===e?void 0:e.user,i=c[0];return n&&i&&s&&Y(r)?Object(h.jsxs)("div",{className:"text-xs center grid",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{className:"px-1",children:"Connected as"}),Object(h.jsxs)("span",{children:["[",Object(h.jsx)(Na,{user:s}),"]"]},i)]}),Object(h.jsx)("div",{children:void 0!==a?Object(h.jsxs)("span",{children:["( ",a.toFixed(4),Object(h.jsx)("img",{className:"inline h-4 w-4 mx-1",alt:"MATIC",src:Kn}),")",void 0!==a&&a<.01?Object(h.jsx)("div",{className:"p-4",children:Object(h.jsxs)("details",{children:[Object(h.jsx)("summary",{children:"Need Matic?"}),Object(h.jsxs)("div",{className:"pt-2",children:["Free faucets:",Object(h.jsx)(Zn,{})]}),Object(h.jsxs)("div",{className:"pt-2",children:["Or ",Object(h.jsx)("a",{className:"dchan-link",href:"https://wallet.polygon.technology/gas-swap",target:"_blank",rel:"noreferrer",children:"swap tokens for Matic."})]}),Object(h.jsxs)("div",{className:"pt-2",children:["Or ",Object(h.jsx)("a",{className:"dchan-link",href:"https://presearch.com/search?q=buy+matic",target:"_blank",rel:"noreferrer",children:"buy some."})]})]})}):""]}):""})]}):Object(h.jsx)("span",{})},Ta=function(e){var t=e.className,n=void 0===t?"":t,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)(!1),d=Object(i.a)(l,2),b=d[0],m=d[1],p=hn(),O=p.provider,x=p.loadWeb3Modal,f=p.logoutOfWeb3Modal,v=Object(a.useCallback)(Object(u.a)(Object(j.a)().mark((function e(){var t,n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O){e.next=11;break}return o(!0),e.next=5,x();case 5:t=e.sent,n=t.success,o(!1),m(!n),e.next=12;break;case 11:f();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error({onClickError:e.t0});case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[O,x,f,o,m]);return Object(h.jsxs)("span",{className:"text-center select-none ".concat(n),children:[Object(h.jsxs)("div",{children:["[",Object(h.jsx)("button",{className:"dchan-link",onClick:v,children:s?"Connecting wallet...":O?"Disconnect Wallet":"Connect Wallet"}),"]"]}),Object(h.jsxs)("span",{className:"text-sm",children:[b?Object(h.jsxs)("span",{children:[Object(h.jsx)(Aa,{emoji:"\u26a0\ufe0f"})," Something went wrong. ",Object(h.jsx)("br",{}),"Check that your wallet is unlocked and doesn't have any pending modals, then try again."]}):"",!b&&s?Object(h.jsx)(ga,{ms:2e3,children:Object(h.jsx)("span",{children:"If the above button does not work, try unlocking your wallet first, then retry."})}):""]})]})},Sa=function(){var e=hn().provider;return Object(h.jsxs)("div",{children:[Object(h.jsx)(Ta,{}),e?"":Object(h.jsx)("div",{className:"text-xs px-2",children:Object(h.jsxs)("small",{className:"p-1 text-center",children:[Object(h.jsx)("div",{children:"You need to connect your wallet to interact with dchan."}),Object(h.jsxs)("div",{children:["Works with"," ",Object(h.jsx)("a",{className:"dchan-link",href:"//metamask.io",children:"Metamask"})," ","(for Desktop) or"," ",Object(h.jsx)("a",{className:"dchan-link",href:"//trustwallet.com/",children:"Trust Wallet"})," ","(for Mobile)."]}),Object(h.jsx)("div",{children:"Other wallets might not be supported."})]})})]})},Ia=function(){var e=hn(),t=e.provider,n=e.chainId,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useCallback)(Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,S();case 3:o(!1);case 4:case"end":return e.stop()}}),e)}))),[]);return t&&!Y(n)?Object(h.jsxs)("div",{className:"p-4",children:[Object(h.jsxs)("div",{children:["You need to be connected to the"," ",Object(h.jsx)("img",{className:"inline h-4 w-4 ml-1",alt:"MATIC",src:Kn})," ","Polygon chain in order to interact with dchan."]}),Object(h.jsxs)("div",{children:["[",Object(h.jsx)("button",{className:"dchan-link",onClick:l,children:"Switch chain"}),"]"]}),Object(h.jsx)("div",{className:"text-xs",children:"Polygon chain ID: 0x89"}),Object(h.jsxs)("div",{className:"text-xs",children:["Current chain ID: ",n]}),s?Object(h.jsx)(ga,{ms:3e3,children:Object(h.jsxs)("div",{className:"text-xs px-2",children:["If the button doesn't work, try switching the network from your wallet.",Object(h.jsx)(ga,{ms:6e3,children:Object(h.jsxs)("div",{children:["If you can't find the correct chain in your wallet, try manually adding it using"," ",Object(h.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.google.com/search?q=how+to+add+polygon+chain",className:"dchan-link",children:"this guide"}),"."]})})]})}):""]}):Object(h.jsx)("span",{})},Ea=function(){var e=hn(),t=e.balance,n=e.gasPrice,c=Object(a.useState)(NaN),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)(NaN),d=Object(i.a)(l,2),b=d[0],j=d[1];return Object(a.useEffect)((function(){n&&(j(Object(On.round)(5e4*parseFloat(H().utils.fromWei(n,"ether")),5)),o(Object(On.round)(parseFloat(H().utils.fromWei(n,"gwei")))))}),[n]),Object(h.jsx)("div",{className:"text-xs pt-1 text-gray-400 hover:text-gray-600",children:Object(h.jsx)("small",{children:Object(h.jsxs)("a",{href:"//polygonscan.com/gastracker",target:"_blank",rel:"noreferrer",children:[Object(h.jsx)("div",{children:"Posting costs gas."}),Object(h.jsxs)("div",{children:[Object(h.jsx)(Aa,{emoji:"\u26fd\ufe0f"})," Current est. tx price: ",b||"?"," ","MATIC @ ",s||"?"," gwei."," ",s>=100?Object(h.jsx)("span",{className:"px-1",title:s>1e3?"VERY high fees!":"High fees!",children:Object(_n.a)(Math.floor(s/100).toString()).map((function(e,t){return Object(h.jsx)(Aa,{emoji:"\ud83d\udd25"},"highfees-"+t)}))}):Object(h.jsx)(h.Fragment,{}),0!==b&&t?Object(h.jsxs)("span",{children:["(~",Math.floor(t/b)||"?"," posts left)"]}):""]})]})})})},_a=n(649),Da=function(e){var t,n,c=e.onRefresh,r=vn(),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),j=b[0],u=b[1],m=Object(a.useState)(U.DateTime.now()),p=Object(i.a)(m,2),O=p[0],x=p[1],f=Object(a.useCallback)((function(){x(U.DateTime.now()),c()}),[x,c]),v=Object(a.useCallback)((function(){var e,t,n=-O.diffNow().toMillis()/1e3;if(null!==o&&void 0!==o&&null!==(e=o.autorefresh)&&void 0!==e&&e.enabled&&n>((null===o||void 0===o||null===(t=o.autorefresh)||void 0===t?void 0:t.seconds)||Number.MAX_SAFE_INTEGER))f();else{if(0===n)return;u(O.toRelative()||"")}}),[o,O,u,f]);return Object(a.useEffect)((function(){v()}),[O,v]),Object(_a.a)((function(){v()}),1e3),Object(h.jsx)("span",{className:"mx-2 flex center relative whitespace-nowrap select-none",children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("span",{children:["[",Object(h.jsx)("button",{className:"dchan-link",onClick:f,children:j||"Refreshing..."}),"]"]}),Object(h.jsx)(wc,{children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"dchan-input-refresh-toggle",children:"Enable autorefresh"}),Object(h.jsx)("input",{id:"dchan-input-refresh-toggle",className:"mx-1 text-xs whitespace-nowrap",type:"checkbox",checked:null===o||void 0===o||null===(t=o.autorefresh)||void 0===t?void 0:t.enabled,onChange:function(e){o&&l(Object(k.a)(Object(k.a)({},o),{},{autorefresh:Object(k.a)(Object(k.a)({},o.autorefresh),{},{enabled:e.target.checked})}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"dchan-input-autorefresh-interval",children:"Autorefresh interval (seconds)"}),Object(h.jsx)("input",{id:"dchan-input-autorefresh-interval",className:"mx-1 text-xs whitespace-nowrap",type:"number",min:"10",value:null===o||void 0===o||null===(n=o.autorefresh)||void 0===n?void 0:n.seconds,onChange:function(e){o&&l(Object(k.a)(Object(k.a)({},o),{},{autorefresh:Object(k.a)(Object(k.a)({},o.autorefresh),{},{seconds:Number(e.target.value)})}))}})]})]})})]})})},Pa=function(e){var t=e.search,n=void 0===t?"":t,c=e.open,r=void 0===c||c,s=e.onSearch,o=void 0===s?function(){}:s,l=Object(a.useState)(n||""),d=Object(i.a)(l,2),b=d[0],j=d[1],u=Object(a.useCallback)((function(e){j(e)}),[j]),m=Object(a.useRef)(null),p=Object(a.useCallback)((function(){u(""),null!==m&&void 0!==m&&m.current&&(m.current.value="")}),[u]),O=Object(a.useMemo)((function(){return Object(On.debounce)(o,500)}),[o]),x=Object(a.useCallback)((function(e){var t=e.target.value;j(t),O(t)}),[O]);return Object(h.jsxs)("details",{className:"grid center self-center bg-secondary border border-secondary-accent p-1",open:r,children:[Object(h.jsx)("summary",{children:"Search"}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{id:"dchan-search",className:"text-center w-32",ref:m,type:"text",placeholder:"...",value:b,onChange:x,autoFocus:!0})}),Object(h.jsx)("div",{className:"relative",children:n?Object(h.jsxs)("span",{className:"text-xs",children:["[",Object(h.jsx)("button",{className:"dchan-link",onClick:p,children:"Cancel"}),"]"]}):""})]})},Ma=function(e){var t,n,c=e.onExit,r=vn(),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)(null===o||void 0===o||null===(t=o.subgraph)||void 0===t?void 0:t.endpoint),b=Object(i.a)(d,2),j=b[0],u=b[1],m=Object(a.useCallback)((function(e,t){var n=Object(k.a)({},e);e.subgraph.endpoint=t,l(n)}),[l]),p=Object(a.useMemo)((function(){return Object(On.debounce)(m,500)}),[m]),O=Object(a.useState)(null===o||void 0===o||null===(n=o.content_filter)||void 0===n?void 0:n.score_threshold),x=Object(i.a)(O,2),f=x[0],v=x[1],g=Object(a.useMemo)((function(){return Object(On.debounce)((function(e,t){var n=Object(k.a)({},e);e.content_filter.score_threshold=t,l(n)}),500)}),[l]),y=Object(a.useCallback)((function(){window.confirm("All settings will be reset to their default value. Are you sure?")||l(N),window.alert("Reset successful"),window.location.reload()}),[l]);return Object(h.jsxs)("div",{className:"bg-secondary border-secondary-accent border-2 flex flex-col h-full",children:[Object(h.jsxs)("div",{className:"mb-2 mt-1 px-3",style:{flex:"0 1 auto"},children:[Object(h.jsx)("div",{className:"float-left",children:Object(h.jsx)("span",{className:"font-bold",children:"dchan.network Settings"})}),Object(h.jsxs)("div",{className:"float-right",children:[Object(h.jsx)("button",{className:"dchan-link",onClick:y,children:"Reset settings"}),Object(h.jsx)("span",{className:"px-2",children:"|"}),Object(h.jsx)("button",{onClick:c,children:Object(h.jsx)(Aa,{emoji:"\u274c"})})]})]}),Object(h.jsxs)("div",{className:"h-full overflow-y-scroll overscroll-contain",style:{flex:"1 1 auto"},children:[Object(h.jsxs)("fieldset",{className:"border border-secondary-accent rounded px-4 pb-2 mx-2",children:[Object(h.jsx)("legend",{className:"font-bold",children:"Subgraph Endpoint"}),Object(h.jsx)("div",{children:"Endpoint used to query the subgraph for data."}),Object(h.jsx)("div",{children:"If you're having issues with boards/threads not loading, check if resetting to default fixes the issue first."}),Object(h.jsx)("button",{className:"border border-black px-1 mb-0.5 bg-primary",onClick:function(){u(N.subgraph.endpoint),m(o,N.subgraph.endpoint)},children:"Reset to default"}),Object(h.jsx)("textarea",{className:"w-full",spellCheck:!1,onChange:function(e){u(e.target.value),p(o,e.target.value)},value:j})]}),Object(h.jsxs)("fieldset",{className:"border border-secondary-accent rounded px-4 pb-2 mx-2",children:[Object(h.jsx)("legend",{className:"font-bold",children:"Filter Settings"}),Object(h.jsxs)("div",{className:"text-contrast",children:["\u26a0 By disabling/changing filters, it's possible you may view/download highly disturbing content, or content which may be illegal in your jurisdiction.",Object(h.jsx)("div",{children:"Do so at your own risk."})]}),Object(h.jsx)("input",{id:"dchan-input-show-below-threshold",className:"mx-1 text-xs whitespace-nowrap opacity-80 hover:opacity-100",type:"checkbox",checked:null===o||void 0===o?void 0:o.content_filter.show_below_threshold,onChange:function(e){if(o){var t=Object(k.a)({},o);o.content_filter.show_below_threshold=e.target.checked,l(t)}}}),Object(h.jsx)("label",{htmlFor:"dchan-input-show-below-threshold",children:"Show hidden content"}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{htmlFor:"dchan-input-score-threshold",children:"Score hide threshold"}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{id:"dchan-input-score-threshold",className:"mx-1 text-xs whitespace-nowrap opacity-80 hover:opacity-100",type:"range",min:0,max:1,step:.1,value:f,onChange:function(e){if(o){var t=parseFloat(e.target.value);v(t),g(o,t)}}})}),Object(h.jsx)("div",{className:"text-sm",children:{0:"Show everything",.1:"Hide heavily reported content",.2:"Hide heavily reported content",.3:"Hide heavily reported content",.4:"Hide reported content",.5:"Hide reported content",.6:"Hide reported content",.7:"Hide slighly reported content",.8:"Hide slighly reported content",.9:"Hide slighly reported content",1:"Only show content with no reports"}[null!==f&&void 0!==f?f:"1"]})]})]})]})},La=Object(a.forwardRef)((function(e,t){var n=e.startBlock,c=e.startRangeLabel,r=e.widgetClassName,s=e.open,o=e.onOpen,l=(e.onClose,Object(a.useState)(U.DateTime.now())),d=Object(i.a)(l,2),b=d[0],j=d[1],u=Object(a.useState)(),m=Object(i.a)(u,2),p=m[0],O=m[1],x=on(),f=x.currentBlock,v=x.travelToDateTime,g=x.travelToBlockNumber,k=x.travelToPreviousBlock,y=x.travelToNextBlock,w=x.travelToPresent,A=x.lastBlock,N=x.timeTraveledToBlockNumber,C=x.timeTraveledToDateTime,B=!!f,T=Object(a.useCallback)((function(e){v(U.DateTime.fromISO(e))}),[v]),S=Object(a.useMemo)((function(){return xn.a.debounce(g,300)}),[g]),I=Object(a.useCallback)((function(e){S(Number(e))}),[S]),E=Object(a.useCallback)((function(){if(null!=p){var e=prompt("Block number: (range: ".concat(p.min.number,"-").concat(p.max.number,")"),(N||(null===A||void 0===A?void 0:A.number)||0).toString());if(null!==e){var t=parseInt(e||"");isNaN(t)||t<parseInt(p.min.number)||t>parseInt(p.max.number)?alert("Invalid block number: ".concat(e)):g(Number(e))}}}),[p,g,N,A]);return Object(a.useEffect)((function(){var e=setInterval((function(){return j(U.DateTime.now())}),1e3);return function(){return clearInterval(e)}})),Object(a.useEffect)((function(){n&&A&&O({min:n,max:A})}),[n,A,O]),Object(h.jsxs)("details",{className:"sm:relative",open:s,ref:t,children:[Object(h.jsx)("summary",{className:"list-none cursor-pointer w-full whitespace-nowrap",onClick:function(e){e.preventDefault()},children:p?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"mx-1",children:Object(h.jsxs)("span",{className:"hidden sm:flex center",onClick:o,children:[Object(h.jsx)("span",{className:"select-none",children:B?Object(h.jsxs)("span",{children:[Object(h.jsxs)("div",{className:"inline-block relative",title:"Time traveled to ".concat(C,"!"),children:[Object(h.jsx)("span",{className:"animation-pulse absolute",children:Object(h.jsx)(Aa,{emoji:"\u23ea"})}),Object(h.jsx)(Aa,{emoji:"\u23ea"})]})," ","Time traveled to"]}):Object(h.jsx)("span",{className:"filter grayscale opacity-30 hover:opacity-100",title:"Currently at present time",children:Object(h.jsx)(Aa,{emoji:"\u23ea"})})}),Object(h.jsxs)("span",{className:"ml-1 text-xs",children:["[",Object(h.jsx)("span",{className:"inline-block min-w-3rem",children:(C||b).toLocaleString(U.DateTime.DATETIME_SHORT_WITH_SECONDS)}),"]"]})]})}),Object(h.jsx)("div",{className:"mx-1 sm:hidden",onClick:o,children:B?Object(h.jsxs)("abbr",{title:"You time traveled! The content is being displayed as it was shown to users at the specified date.",children:[Object(h.jsx)("span",{className:"animation-pulse absolute",children:Object(h.jsx)(Aa,{emoji:"\u23ea"})}),Object(h.jsx)(Aa,{emoji:"\u23ea"})]}):Object(h.jsx)("span",{className:"filter grayscale opacity-30",children:Object(h.jsx)(Aa,{emoji:"\u23ea"})})})]}):null}),Object(h.jsx)("div",{className:r,children:p?Object(h.jsxs)("div",{className:"bg-secondary border border-tertiary-accent border-solid p-1",children:[Object(h.jsx)("div",{className:"flex center text-xs my-1 ml-2",children:Object(h.jsxs)("span",{children:["[",Object(h.jsx)("input",{required:!0,type:"datetime-local",id:"dchan-timetravel-date-input",value:(C||b).toISO().slice(0,16),onChange:function(e){return T(e.target.value)},min:da(p.min.timestamp).toISODate(),max:da(p.max.timestamp).toISODate()}),"]"]})}),Object(h.jsx)("div",{className:"grid align-center text-xs w-full",children:Object(h.jsxs)("span",{className:"mx-auto",children:[Object(h.jsx)("span",{className:"dchan-link mr-2",onClick:k,children:"<"}),Object(h.jsx)("button",{className:"dchan-link",onClick:E,children:"Block #".concat(N||(null===A||void 0===A?void 0:A.number)||"????????")}),Object(h.jsx)("span",{className:"dchan-link ml-2",onClick:y,children:">"})]})}),Object(h.jsxs)("div",{className:"text-xs bg-secondary",children:[Object(h.jsxs)("div",{className:"grid grid-cols-4 center text-center",children:[Object(h.jsx)("span",{className:"mx-1",children:c}),Object(h.jsx)("input",{className:"col-span-2",id:"timetravel",type:"range",min:parseInt(p.min.number),max:parseInt(p.max.number),onChange:function(e){return I(e.target.value)},value:N||(null===A||void 0===A?void 0:A.number)})," ",Object(h.jsx)("span",{className:"mx-1",children:"Now"})]}),Object(h.jsxs)("div",{className:"grid grid-cols-4 center text-center",children:[Object(h.jsxs)("span",{className:"mx-1",children:[Object(h.jsx)("div",{children:da(p.min.timestamp).toLocaleString(U.DateTime.DATETIME_SHORT)}),Object(h.jsxs)("div",{children:["#",p.min.number]})]}),Object(h.jsx)("span",{className:"col-span-2"}),Object(h.jsxs)("span",{className:"mx-1",children:[Object(h.jsx)("div",{children:da(p.max.timestamp).toLocaleString(U.DateTime.DATETIME_SHORT)}),Object(h.jsxs)("div",{children:["#",p.max.number]})]})]}),Object(h.jsx)("div",{className:"flex center",children:B?Object(h.jsxs)("div",{className:"text-xs text-center",children:["[",Object(h.jsx)("button",{className:"dchan-link",onClick:w,children:"Return to present"}),"]"]}):Object(h.jsx)("div",{className:"mb-4"})})]})]}):Object(h.jsx)("div",{className:"bg-secondary border border-tertiary-accent border-solid p-1",children:"Cannot time travel here."})})]})})),Fa=function(){var e=fn(),t=e.favorites,n=e.removeFavorite,c=Object(a.useMemo)((function(){return t?Object.keys(t):[]}),[t]),r=Object(nn.a)(Zt,{pollInterval:3e4,variables:{ids:c},skip:!t}),s=r.data,i=r.loading,l=r.refetch,d=null===s||void 0===s?void 0:s.threads,b=Object(a.useCallback)((function(){return l({ids:c})}),[l,c]),j=Object(Fn.a)(b,1,!0),u=n||function(){};return t?Object(h.jsx)("div",{className:"bg-secondary border border-tertiary-accent p-1",children:i?Object(h.jsx)(gc,{}):c.length>0&&d&&d.length>0?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"mb-2",children:["Watched threads:",Object(h.jsxs)("span",{className:"text-xs pl-2",children:["[",Object(h.jsx)("button",{className:"dchan-link",onClick:j,children:"Refresh"}),"]"]})]}),Object(h.jsx)("div",{className:"text-sm",children:d.map((function(e){var t=e.board;return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){return u(e)},children:Object(h.jsx)(Aa,{emoji:"\u2716"})})," ",t?Object(h.jsx)("span",{children:Object(h.jsx)(Sn,{board:t})}):"",Object(h.jsxs)(o.b,{className:"dchan-link",to:"".concat(Tn.thread(e)),children:[" ","- (",e.replyCount,") -"," ",Object(On.truncate)(e.subject||e.op.comment,{length:32})," ",e.isLocked?Object(h.jsx)(Aa,{emoji:"\ud83d\udd12"}):""," ",e.isPinned?Object(h.jsx)(Aa,{emoji:"\ud83d\udccc"}):""]})]},e.id)}))})]}):Object(h.jsxs)("span",{children:["No threads are being watched. Use the ",Object(h.jsx)(Aa,{emoji:"\u2b50\ufe0f"})," button on threads to keep track of them here."]})}):Object(h.jsx)("div",{className:"bg-secondary border border-tertiary-accent p-1",children:"..."})},Ha=function(){var e=mn().isAdmin,t=hn().accounts;Object(a.useEffect)((function(){window.scrollTo({top:0})}),[]);var n=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("admin:claim",{},t[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=prompt("Whomst 0x?"),alert("Granting admin to ".concat(n)),e.next=4,P("admin:grant",{hex_address:n},t[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){var n,c,a,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=prompt("IPFS hash?"),c=prompt("Version?"),a=prompt("Channel?")||"",r=!!n&&!!c,alert("".concat(r?"Publishing":"Invalid"," '").concat(n,"', version '").concat(c,"' on channel '").concat(a,"'")),e.next=7,r;case 7:if(e.t0=e.sent,!e.t0){e.next=10;break}P("client:publish",{ipfs_hash:n,version:c,channel:a},t[0]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("chan:lock",{},t[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("chan:unlock",{},t[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"bg-primary min-h-100vh",children:[Object(h.jsx)(ic,{title:"Admin panel"}),Object(h.jsx)(Sa,{}),e()?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)("button",{onClick:r,children:"Publish Client"})}),Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)("button",{onClick:n,children:"Claim Admin"})}),Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)("button",{onClick:c,children:"Grant Admin"})}),Object(h.jsxs)("div",{className:"center grid",children:[Object(h.jsx)("button",{onClick:s,children:"Lock"}),Object(h.jsx)("button",{onClick:i,children:"Unlock"})]}),Object(h.jsx)(o.b,{className:"m-4 dchan-link",to:"/",children:"Home"}),Object(h.jsx)(nc,{})]}):""]})},Ra=n(650),Qa=function(e){var t,n=e.location,c=e.match.params,r=e.pageTheme,s=e.setPageTheme,o=c.board_id,d=c.board_name;o=o?"0x".concat(o):void 0;var b=on(),j=b.timeTraveledToBlockNumber,u=b.lastBlock,m=b.currentBlock,p=Object(sn.parse)(n.search),O=parseInt("".concat(p.page||"1")),x=Object(l.f)(),f=vn(),g=Object(i.a)(f,1)[0],k=Number(j||(null===u||void 0===u?void 0:u.number)),y=Object(a.useMemo)((function(){return Math.floor((m?parseInt(m.timestamp):U.DateTime.now().toSeconds())-2592e3)}),[m]),w={board:o,block:k,orderDirection:(null===g||void 0===g||null===(t=g.content_view)||void 0===t?void 0:t.board_sort_direction)||"desc",limit:100,cutoff:y,skip:100*(O-1)},A=Object(nn.a)(It,{variables:w}),N=A.refetch,C=A.data,B=A.loading,T=Object(nn.a)(Dt,{skip:!k,variables:{board:o,block:k}}),S=T.loading,I=T.data,E=null===I||void 0===I?void 0:I.board,_=Object(a.useMemo)((function(){return[].concat(Object(_n.a)((null===C||void 0===C?void 0:C.pinned)||[]),Object(_n.a)((null===C||void 0===C?void 0:C.threads)||[]))}),[C]);Object(a.useEffect)((function(){window.scrollTo({top:0})}),[null===E||void 0===E?void 0:E.id]),Object(a.useEffect)((function(){E&&E.name!==d&&x.replace("/".concat(E.id))}),[E,d,x]),Object(a.useEffect)((function(){N()}),[k,N]);(_||[]).filter((function(e){var t,n;return(null===g||void 0===g||null===(t=g.content_filter)||void 0===t?void 0:t.show_below_threshold)||!Dn(e,null===g||void 0===g||null===(n=g.content_filter)||void 0===n?void 0:n.score_threshold)}));return Object(Ra.a)(S?"Loading... - dchan.network - [".concat(o,"]"):E?"/".concat(E.name,"/ - dchan.network - [").concat(E.id,"]"):"??? - dchan.network - [".concat(o,"]")),Object(a.useEffect)((function(){E&&s(null!==E&&void 0!==E&&E.isNsfw?"nsfw":"blueboard")}),[E,s]),Object(h.jsxs)("div",{className:"bg-primary min-h-100vh flex flex-col","data-theme":r,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(Hn,{board:E,summary:B?Object(h.jsx)("span",{children:"..."}):Object(h.jsx)("span",{className:"font-bold",children:"Displaying threads without replies after 30 days"}),onRefresh:N,archive:!0}),Object(h.jsxs)("div",{children:[null===E?Object(h.jsxs)("div",{className:"center grid p-8",children:[Object(h.jsx)("div",{className:"text-xs p-2",children:o}),Object(h.jsx)("br",{}),"Board does not exist.",isNaN(k)?"":Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("br",{}),"You may have time traveled to before it was created, or after it was deleted."]})]}):B&&!C?Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)(gc,{})}):E&&_?0===_.length?Object(h.jsx)("div",{className:"center grid p-8",children:"No threads."}):Object(h.jsx)("div",{className:"center flex",children:Object(h.jsxs)("table",{className:"w-full md:w-4/5 xl:w-3/5 border-separate mt-4 text-xs",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"p-1 bg-highlight border border-solid border-black font-bold w-2",children:"No."}),Object(h.jsx)("td",{className:"p-1 bg-highlight border border-solid border-black font-bold w-full max-w-75vw",children:"Excerpt"}),Object(h.jsx)("td",{className:"p-1 bg-highlight border border-solid border-black font-bold w-2"})]})}),Object(h.jsx)("tbody",{children:_.map((function(e,t){return Object(h.jsxs)("tr",{className:t%2===1?"bg-primary":"bg-secondary",children:[Object(h.jsx)("td",{children:e.n}),Object(h.jsxs)("td",{className:"text-left whitespace-nowrap truncate max-w-75vw",children:[e.subject?Object(h.jsxs)("b",{children:[e.subject,":"]}):""," ",e.op.comment]}),Object(h.jsxs)("td",{children:["[",Object(h.jsx)("a",{className:"dchan-link",href:Tn.thread(e),children:"View"}),"]"]})]})}))})]})}):Object(h.jsx)("div",{}),E?Object(h.jsxs)("div",{children:[Object(h.jsx)("hr",{}),Object(h.jsx)(Nc,{url:n.pathname,page:O,hasNextPage:_.length>=100}),Object(h.jsx)(v,{to:"#board-header",label:"Top"})]}):""]})]}),Object(h.jsx)(nc,{showContentDisclaimer:!0})]})},$a=function(e){var t,n,c,r,s=e.location,o=e.match.params,d=e.pageTheme,b=e.setPageTheme,j=o.board_id,u=o.board_name;j=j?"0x".concat(j):void 0;var m=on(),p=m.timeTraveledToBlockNumber,O=m.lastBlock,x=Object(sn.parse)(s.search),f=parseInt("".concat(x.page||"1")),g=Object(l.f)(),k=vn(),y=Object(i.a)(k,1)[0],w=on().currentBlock,A=Object(a.useMemo)((function(){return Math.floor((w?parseInt(w.timestamp):U.DateTime.now().toSeconds())-2592e3)}),[w]),N=Number(p||(null===O||void 0===O?void 0:O.number)),C=o.view_mode||(null===y||void 0===y||null===(t=y.content_view)||void 0===t?void 0:t.board_default_view_mode)||"catalog",B=(null===y||void 0===y||null===(n=y.content_view)||void 0===n?void 0:n.board_sort_threads_by)||"lastBumpedAt",T=parseInt("".concat((null===y||void 0===y||null===(c=y.content_view)||void 0===c?void 0:c.page_size)||"100")),S={board:j,block:N,orderBy:B,orderDirection:(null===y||void 0===y||null===(r=y.content_view)||void 0===r?void 0:r.board_sort_direction)||"desc",limit:T,skip:T*(f-1),cutoff:A},I=Object(nn.a)(Et,{variables:S}),E=I.refetch,_=I.data,D=I.loading,P=Object(nn.a)(Dt,{skip:!N,variables:{board:j,block:N}}),M=P.loading,L=P.data,F=null===L||void 0===L?void 0:L.board,H=Object(a.useMemo)((function(){return[].concat(Object(_n.a)((null===_||void 0===_?void 0:_.pinned)||[]),Object(_n.a)((null===_||void 0===_?void 0:_.threads)||[]))}),[_]);Object(a.useEffect)((function(){window.scrollTo({top:0})}),[null===F||void 0===F?void 0:F.id]),Object(a.useEffect)((function(){F&&F.name!==u&&g.replace("/".concat(F.id))}),[F,u,g]),Object(a.useEffect)((function(){E()}),[N,B,E]);var R=(H||[]).filter((function(e){var t,n;return(null===y||void 0===y||null===(t=y.content_filter)||void 0===t?void 0:t.show_below_threshold)||!Dn(e,null===y||void 0===y||null===(n=y.content_filter)||void 0===n?void 0:n.score_threshold)}));return Object(Ra.a)(M?"Loading... - dchan.network - [".concat(j,"]"):F?"/".concat(F.name,"/ - dchan.network - [").concat(F.id,"]"):"??? - dchan.network - [".concat(j,"]")),Object(a.useEffect)((function(){F&&b(null!==F&&void 0!==F&&F.isNsfw?"nsfw":"blueboard")}),[F,b]),Object(h.jsxs)("div",{className:"bg-primary min-h-100vh flex flex-col","data-theme":d,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(Hn,{board:F,summary:D?Object(h.jsx)("span",{children:"..."}):Object(h.jsxs)("span",{children:["Threads: ",H.length," (Hidden:"," ",H.length-R.length,"), Posts: ",null===F||void 0===F?void 0:F.postCount]}),onRefresh:E}),Object(h.jsxs)("div",{children:[null===F?Object(h.jsxs)("div",{className:"center grid p-8",children:[Object(h.jsx)("div",{className:"text-xs p-2",children:j}),Object(h.jsx)("br",{}),"Board does not exist.",isNaN(N)?"":Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("br",{}),"You may have time traveled to before it was created, or after it was deleted."]})]}):D&&!_?Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)(gc,{})}):F&&H?0===H.length?Object(h.jsx)("div",{className:"center grid p-8",children:"No threads."}):Object(h.jsx)("div",{children:({catalog:function(){return Object(h.jsx)(Ln,{board:F,threads:R})},index:function(){return Object(h.jsx)(uc,{board:F,threads:R})}}[C]||function(){return Object(h.jsx)(h.Fragment,{})})()}):Object(h.jsx)("div",{}),F?Object(h.jsxs)("div",{children:[Object(h.jsx)("hr",{}),Object(h.jsx)(Nc,{url:s.pathname,page:f,hasNextPage:H.length>=T}),Object(h.jsx)(v,{to:"#board-header",label:"Top"})]}):""]})]}),Object(h.jsx)(nc,{showContentDisclaimer:!0})]})},za=function(e){var t=e.location,n=e.match.params,c=Object(sn.parse)(t.search),r="".concat((null===n||void 0===n?void 0:n.board_name)||"")||(Object(On.isString)(c.s)?c.s:""),s=on().timeTraveledToBlockNumber,i=Object(nn.a)(s?Mt:Lt,{pollInterval:3e4,fetchPolicy:s?"cache-first":"network-only",variables:{searchName:r,searchTitle:r.length>1?"".concat(r,":*"):"",block:s},skip:!r}),o=i.refetch,l=i.data,d=i.loading;Object(a.useEffect)((function(){o()}),[r,o]),Object(a.useEffect)((function(){window.scrollTo({top:0})}),[r]);var b=l&&(l.searchByTitle||l.searchByName)?Object(On.uniqBy)([].concat(Object(_n.a)(l.searchByName),Object(_n.a)(l.searchByTitle)),"id"):[];return Object(h.jsxs)("div",{className:"bg-primary min-h-100vh flex flex-col",children:[Object(h.jsx)(ic,{title:"Boards"}),Object(h.jsxs)("div",{className:"relative",children:[Object(h.jsx)("div",{className:"flex center",children:Object(h.jsx)(Pa,{baseUrl:"".concat(Tn.boards()).concat(s?"?block=".concat(s):""),search:r})}),Object(h.jsxs)("div",{className:"",children:[d?Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)(gc,{})}):r?Object(h.jsx)("div",{className:"center flex",children:Object(h.jsx)("div",{className:"p-2",children:b.length>0?Object(h.jsx)(En,{title:Object(h.jsxs)("span",{children:['Results for "',r,'"']}),className:"pt-4",children:Object(h.jsx)(yn,{boards:b})}):"No boards found"})}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"grid pt-2 justify-center",children:Object(h.jsx)(In,{})})}),Object(h.jsx)("div",{className:"center flex sticky bottom-0",children:Object(h.jsx)("div",{className:"",children:Object(h.jsx)(Nn,{})})})]})]}),Object(h.jsx)(nc,{})]})},qa=function(){Object(Ra.a)("dchan.network");var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(i.a)(r,2),o=s[0],l=s[1];Object(a.useEffect)((function(){window.scrollTo({top:0})}),[]);var d=Object(a.useCallback)((function(e){e.preventDefault(),l(void 0),c(void 0)}),[l]);return Object(a.useEffect)((function(){var e=Object(xt.subscribe)("BOARD_ITEM_SELECT",(function(e,t){l(t),c(t)}));return function(){Object(xt.unsubscribe)(e)}}),[l]),Object(h.jsxs)("div",{className:"h-screen bg-primary flex flex-col pb-2",children:[Object(h.jsx)(dc,{}),Object(h.jsx)(oc,{}),Object(h.jsxs)("div",{className:"flex flex-grow flex-col grid-cols-2 lg:grid px-4 text-sm",children:[Object(h.jsx)("div",{children:Object(h.jsx)(En,{title:"Boards",titleRight:Object(h.jsx)(h.Fragment,{children:null!=n?Object(h.jsxs)("div",{className:"absolute top-1/2 bottom-1/2 right-0 mr-4",children:["[",Object(h.jsx)("div",{className:"inline dchan-link",onClick:d,children:"Clear Board"}),"]"]}):""}),className:"md:px-1 w-full pb-4",bodyClassName:"p-none b-none",children:Object(h.jsx)(Cc,{highlight:o})})}),Object(h.jsx)("div",{children:Object(h.jsx)(En,{title:Object(h.jsxs)("span",{children:["Threads"," ",n?Object(h.jsxs)("span",{children:["on ",Object(h.jsx)(Sn,{board:n})]}):""]}),className:"md:px-1 w-full pb-4",bodyClassName:"p-none b-none",children:Object(h.jsx)(ya,{limit:10,board:n})})})]}),Object(h.jsx)(nc,{})]})},Wa=function(e){e.location;var t=e.match.params,n=Object(a.useState)(),c=Object(i.a)(n,2),r=c[0],s=c[1],o=Object(l.f)(),d="0x".concat(t.id),b=on().timeTraveledToBlockNumber,j=b?Yt:Ut,u=Object(nn.a)(j,{variables:{id:d,block:b},fetchPolicy:"cache-and-network",pollInterval:5e3}).data;return Object(a.useEffect)((function(){if(u){var e=null,t=u.boardRef,n=u.threadRef,c=u.postRef,a=u.board,r=u.thread,i=u.post;!a&&t?a=t.board:!r&&n?r=n.thread:!i&&c&&(i=c.post);var l=b?"?block=".concat(b):"";a?e="".concat(Tn.board(a)).concat(l):r?e="".concat(Tn.thread(r)).concat(l):i&&(e="".concat(Tn.post(i)).concat(l)),(a||r||i)&&!e&&s("Content not found. It may have been deleted, or the ID is invalid."),e&&o.replace(e)}}),[o,u,b]),Object(h.jsx)("div",{className:"bg-primary center grid w-screen h-screen",children:r?Object(h.jsx)(Qn,{subject:"Not found",children:Object(h.jsx)("span",{children:r})}):Object(h.jsxs)("div",{children:[Object(h.jsx)(gc,{}),Object(h.jsx)("div",{className:"text-xs dchan-link",children:d}),Object(h.jsx)("div",{children:Object(h.jsx)(ga,{children:Object(h.jsx)("span",{children:0===d.indexOf("0x")?"The content is being indexed, please wait...":"Are you sure it's a valid ID?"})})})]})})},Ya=function(e){var t=e.location,n=(e.match.params,Object(sn.parse)(t.search)),c=n.s||n.search,r=Object(On.isString)(c)?c:"",s=parseInt("".concat(n.page||"1")),d=on().timeTraveledToBlockNumber,b=vn(),j=Object(i.a)(b,1)[0],u=Object(l.f)(),m={block:d,search:r.length>1?"".concat(r,":*"):"*:*",limit:100,skip:100*(s-1)},p=Object(nn.a)(d?qt:Wt,{variables:m,pollInterval:6e4}),O=p.refetch,x=p.data,f=p.loading,v=Object(a.useMemo)((function(){var e,t=(x||{}).postSearch;return(e=(t||[]).filter((function(e){return e&&e.thread&&e.board})))&&e.length>0?Object(On.reverse)(Object(On.sortBy)(e,(function(e){return parseInt(e.createdAtBlock.timestamp)}))):void 0}),[x]);Object(a.useEffect)((function(){window.scrollTo({top:0})}),[r]),Object(a.useEffect)((function(){O()}),[r,d,O]);var g=Object(a.useCallback)((function(e){u.push(Tn.posts({search:e}))}),[u]),k=Object(a.useMemo)((function(){return x&&x.postSearch.length>=0}),[x]);return Object(h.jsxs)("div",{className:"bg-primary min-h-100vh flex flex-col","data-theme":"blueboard",children:[Object(h.jsx)(Hn,{board:null,title:"Posts",summary:v?Object(h.jsxs)("span",{children:["Found: ",v.length," posts (Hidden:"," ",v.filter((function(e){var t;return Bc(e,null===j||void 0===j||null===(t=j.content_filter)||void 0===t?void 0:t.score_threshold)})).length,")"]}):Object(h.jsx)("span",{children:"..."}),onRefresh:O}),Object(h.jsxs)("div",{className:"relative",children:[Object(h.jsxs)("div",{className:"flex justify-center md:justify-start p-2",children:[Object(h.jsx)(Pa,{baseUrl:"".concat(Tn.posts({search:r})).concat(d?"?block=".concat(d):""),search:r,open:!0,onSearch:g}),f?Object(h.jsx)("span",{}):Object(h.jsx)("span",{className:"grid center bg-secondary border border-secondary-accent mx-2",children:Object(h.jsx)(Nc,{page:s,url:Tn.posts({search:r}),hasNextPage:k})})]}),Object(h.jsx)("div",{className:"p-2",children:Object(h.jsx)("hr",{})}),f?Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)(gc,{})}):v&&v.length?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:null===v||void 0===v?void 0:v.map((function(e){var t,n,c,a;return Object(h.jsx)("div",{className:"p-2 flex flex-wrap",children:Object(h.jsx)(Sc,{post:e,header:Object(h.jsxs)("span",{children:[Object(h.jsxs)("span",{className:"p-1",children:["[",Object(h.jsx)("span",{className:"p-1",children:Object(h.jsxs)(o.b,{className:"dchan-link",to:"/".concat(null===(t=e.board)||void 0===t?void 0:t.name,"/").concat(null===(n=e.board)||void 0===n?void 0:n.id),children:["/",null===(c=e.board)||void 0===c?void 0:c.name,"/",Object(h.jsx)(bc,{id:(null===(a=e.board)||void 0===a?void 0:a.id)||"0x000000"})]})}),"]"]}),Object(h.jsxs)("span",{className:"p-1",children:["[",Object(h.jsx)(o.b,{to:"/".concat(e.id),className:"dchan-link",children:"View"}),"]"]})]})},e.id)},e.id)}))}),Object(h.jsx)(Nc,{page:s,url:Tn.posts({search:r}),hasNextPage:k})]}):r?Object(h.jsx)("div",{className:"py-4",children:"No results"}):Object(h.jsxs)("div",{children:[Object(h.jsx)(vc,{limit:25,skip:s>1?25*s:0}),Object(h.jsx)(Nc,{page:s,url:Tn.posts({search:r}),hasNextPage:k})]})]}),Object(h.jsx)(nc,{showContentDisclaimer:!0})]})},Ua=function(e){e.location;var t=e.match.params,n=Object(a.useState)(),c=Object(i.a)(n,2),r=c[0],s=c[1],o=Object(l.f)(),d="0x".concat(t.id),b=t.post_n,j="".concat(d,"/").concat(b),u=on().timeTraveledToBlockNumber,m=Object(nn.a)(u?Jt.query_ref_by_block:Jt.query_ref,{variables:{id:d,post_n:b,post_ref:j,block:u}}),p=m.loading,O=m.data;return Object(a.useEffect)((function(){if(O){var e=null,t=null,n=null,c=O.threads,a=O.posts,r=O.postRef;c&&c.length>0?t=c[0]:a&&a.length>0?n=a[0]:r&&(n=r.post);var i=u?"?block=".concat(u):"";t?e="".concat(Tn.thread(t)).concat(i):n&&(e="".concat(Tn.post(n)).concat(i)),(t||n||r)&&!e&&s("Content not found. It may have been deleted, or the ID is invalid."),e&&o.replace(e)}}),[o,O,u]),Object(h.jsx)("div",{className:"bg-primary center grid w-screen h-screen",children:r?Object(h.jsx)(Qn,{subject:"Not found",children:Object(h.jsx)("span",{children:r})}):Object(h.jsxs)("div",{children:[p?Object(h.jsx)(gc,{}):"",Object(h.jsxs)("div",{className:"text-xs",children:[d,"/",b]})]})})},Va=function(e){var t,n,c=e.match.params,r=e.pageTheme,s=e.setPageTheme,i=c.board_name,o=c.board_id,d=c.user_id,b=c.thread_n;o=o?"0x".concat(o):void 0;var j=Object(l.f)(),u=ft().publish,m=on().timeTraveledToBlockNumber,p=c.focus_user_id?"0x".concat(c.focus_user_id):"",O=c.focus_post_n||"",x={board:o,n:b,block:m},f=Object(nn.a)(m?Xt:Gt,{variables:x}),g=f.refetch,k=f.data,y=f.loading,w=null===k||void 0===k||null===(t=k.posts)||void 0===t?void 0:t[0],A=null===k||void 0===k||null===(n=k.threads)||void 0===n?void 0:n[0],N=null===k||void 0===k?void 0:k.board,C=Object(a.useMemo)((function(){return A?[A.op].concat(Object(_n.a)(A.replies)):[]}),[A]);return Object(a.useEffect)((function(){window.scrollTo({top:0})}),[null===A||void 0===A?void 0:A.id]),Object(a.useEffect)((function(){var e=!A&&w?Tn.post(w):void 0;e&&j.replace("".concat(e).concat(m?"?block=".concat(m):""))}),[j,A,m,w]),Object(a.useEffect)((function(){var e=y||!p&&!O?[]:C.filter((function(e){var t=!p||e.from.id===p||"0x".concat(wn(e.from.id).replace("-",""))===p,n=!O||e.n===O;return t&&n}));if(e.length>0){var t=e[0];j.replace("".concat(Tn.post(t)).concat(m?"?block=".concat(m):"")),u("POST_FOCUS",t)}else!y&&p&&O&&j.replace("/".concat(p,"/").concat(O))}),[C,p,O,m,y,u,j]),Object(a.useEffect)((function(){if(N&&A&&(i!==N.name||d!==A.op.from.id)){var e=Tn.thread(A);e&&j.replace("".concat(e).concat(m?"?block=".concat(m):""))}}),[N,A,i,d,j,m]),Object(a.useEffect)((function(){g({block:m})}),[m,g]),Object(a.useEffect)((function(){N&&s(null!==N&&void 0!==N&&N.isNsfw?"nsfw":"blueboard")}),[N,s]),Object(Ra.a)(N&&A?"/".concat(N.name,"/ - ").concat(A.subject||A.op.comment," - dchan.network - [").concat(A.id,"]"):"/".concat(o,"/ - Loading... - dchan.network")),Object(h.jsxs)("div",{className:"bg-primary min-h-100vh flex flex-col","data-theme":r,children:[Object(h.jsx)(Hn,{board:N,thread:A,summary:y?Object(h.jsx)("span",{children:"..."}):Object(h.jsxs)("span",{children:["Posts: ",C.length]}),onRefresh:g}),Object(h.jsx)("div",{className:"flex-grow",children:y&&!k?Object(h.jsx)("div",{className:"center grid",children:Object(h.jsx)(gc,{})}):C&&A?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:C.map((function(e){var t;return Object(h.jsx)(Sc,{post:e,thread:A,enableBacklinks:!0,showNsfw:null===(t=A.board)||void 0===t?void 0:t.isNsfw},e.id)}))}),Object(h.jsx)("div",{className:"flex text-xs pr-1 sticky bottom-0 z-40",children:Object(h.jsxs)("span",{className:"flex bg-primary pl-2 rounded select-none",children:[Object(h.jsx)("span",{className:"pr-1",children:Object(h.jsx)(v,{to:"#board-header",label:"Top"})}),Object(h.jsx)("span",{className:"pr-1",children:Object(h.jsxs)("div",{children:["[",Object(h.jsx)("button",{className:"dchan-link",onClick:function(){var e,t;null===(e=document.getElementById("board-header"))||void 0===e||e.scrollIntoView(),null===(t=document.getElementById("dchan-post-form-textarea"))||void 0===t||t.focus()},children:"Reply"}),"]"]})})]})})]}):"Post not found."}),Object(h.jsx)(nc,{showContentDisclaimer:!!C&&!!A})]})};var Ja=function(){var e=pt(),t=Object(i.a)(e,1)[0],n=Object(a.useState)("blueboard"),c=Object(i.a)(n,2),r=c[0],s=c[1],j=Object(a.useMemo)((function(){return rn}),[]);return!1===t?Object(h.jsx)(zn,{}):Object(h.jsx)(b.a,{client:j,children:Object(h.jsxs)(o.a,{basename:"/",children:[Object(h.jsx)(d.a,{}),Object(h.jsx)(yc,{}),Object(h.jsxs)("div",{className:"App text-center",children:[Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{exact:!0,path:"/",component:qa}),Object(h.jsx)(l.a,{exact:!0,path:"/_/boards",component:za}),Object(h.jsx)(l.a,{path:"/_/admin",component:Ha}),Object(h.jsx)(l.a,{path:"/_/posts",component:Ya}),Object(h.jsx)(l.a,{path:"/0x:id/:post_n",component:Ua}),Object(h.jsx)(l.a,{path:"/0x:id",component:Wa}),Object(h.jsx)(l.a,{path:"/:board_name/0x:board_id/archive",render:function(e){return Object(h.jsx)(Qa,{location:e.location,match:e.match,pageTheme:r,setPageTheme:s})}}),Object(h.jsx)(l.a,{path:"/:board_name/0x:board_id/:view_mode(index|catalog)",render:function(e){return Object(h.jsx)($a,{location:e.location,match:e.match,pageTheme:r,setPageTheme:s})}}),Object(h.jsx)(l.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n/0x:focus_user_id/:focus_post_n",render:function(e){return Object(h.jsx)(Va,{location:e.location,match:e.match,pageTheme:r,setPageTheme:s})}}),Object(h.jsx)(l.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n/0x:focus_user_id",render:function(e){return Object(h.jsx)(Va,{location:e.location,match:e.match,pageTheme:r,setPageTheme:s})}}),Object(h.jsx)(l.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n/:focus_post_n",render:function(e){return Object(h.jsx)(Va,{location:e.location,match:e.match,pageTheme:r,setPageTheme:s})}}),Object(h.jsx)(l.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n/:post_n",render:function(e){return Object(h.jsx)(Va,{location:e.location,match:e.match,pageTheme:r,setPageTheme:s})}}),Object(h.jsx)(l.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n",render:function(e){return Object(h.jsx)(Va,{location:e.location,match:e.match,pageTheme:r,setPageTheme:s})}}),Object(h.jsx)(l.a,{path:"/:board_name/0x:board_id",render:function(e){return Object(h.jsx)($a,{location:e.location,match:e.match,pageTheme:r,setPageTheme:s})}}),Object(h.jsx)(l.a,{exact:!0,path:"/:board_name",component:za})]}),Object(h.jsx)(Gn,{}),Object(h.jsx)(pa,{}),Object(h.jsx)(O,{})]})]})})},Ga=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,659)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};Object(s.createRoot)(document.getElementById("root")).render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(Ja,{})})),Ga()}},[[638,1,2]]]);