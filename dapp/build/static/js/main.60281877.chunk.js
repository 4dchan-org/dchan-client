(this["webpackJsonpdchan-react"]=this["webpackJsonpdchan-react"]||[]).push([[0],{205:function(e,t){},206:function(e,t){},354:function(e,t){},357:function(e,t){},368:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"string","name":"jsonMessage","type":"string"}],"name":"Message","type":"event"},{"inputs":[{"internalType":"string","name":"jsonMessage","type":"string"}],"name":"message","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},380:function(e,t,n){},381:function(e,t,n){},399:function(e,t){},422:function(e,t){},424:function(e,t){},442:function(e,t){},446:function(e,t){},480:function(e,t){},482:function(e,t){},597:function(e,t){},599:function(e,t){},606:function(e,t){},607:function(e,t){},657:function(e,t){},659:function(e,t){},760:function(e,t){},767:function(e,t){},772:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(126),s=n.n(r),i=n(791),o=(n(380),n(8)),l=n(16),d=n(40),b=(n(381),n(0));function j(e){var t=e.className,n=void 0===t?"":t,c=e.title,a=e.children;return Object(b.jsx)("div",{className:"".concat(n," grid max-w-2xl"),children:Object(b.jsxs)("article",{className:"grid md-grid mt-4",children:[Object(b.jsx)("header",{className:"bg-highlight w-full py-1 bg-white border border-black",children:Object(b.jsx)("div",{className:"text-xl text-center font-semibold",children:c})}),Object(b.jsx)("section",{className:"bg-white border border-black border-t-0 w-full p-4",children:a})]})})}function u(){var e=Object(d.f)(),t=Object(c.useCallback)((function(){e.goBack()}),[e]);return Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 m-4",onClick:t,children:"Go back"})}function h(){return Object(b.jsxs)("div",{className:"p-4",children:[Object(b.jsx)("div",{children:Object(b.jsx)(u,{})}),Object(b.jsx)("div",{children:Object(b.jsx)(l.b,{className:"block text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"/",children:"Home"})})]})}function x(){return Object(b.jsx)("div",{className:"center grid w-full min-h-screen bg-primary",children:Object(b.jsxs)("div",{className:"grid bg-primary",children:[Object(b.jsx)(j,{title:Object(b.jsx)("div",{className:"",children:"Abuse (DMCA/CSAM)"}),children:Object(b.jsxs)("div",{className:"text-left p-4",children:["This is a decentralized application: the content shown here is not hosted on this website's servers, but is instead retrieved via ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"https://ipfs.io/",rel:"nofollow",children:"IPFS"}),".",Object(b.jsx)("br",{}),"Please refer to the IPFS Gateway Service's ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"https://ipfs.io/legal/",rel:"nofollow",children:"legal page"})," to report any offending content."]})}),Object(b.jsx)(h,{})]})})}var p=n(2),m=n.n(p),O=n(14),v=n.p+"static/media/polygon.1140771b.png",f=n.p+"static/media/thegraph.101ddbcb.png",A=n(794),g=n(33);function y(e){return g.DateTime.fromSeconds(parseInt(e))}var w,k,N=n(20),C=n(796),B=Object(C.a)(w||(w=Object(N.a)(["\n  fragment Client on Client {\n    id\n    ipfsHash\n    version\n    publishedAtBlock {\n      timestamp\n      number\n    }\n  }\n"]))),I=Object(C.a)(k||(k=Object(N.a)(["\n  ",'\n\n  query IPFSClient {\n    dev: clients(first: 1, orderBy: publishedAt, orderDirection: desc, where: {channel: ""}) {\n      ...Client\n    }\n    stable: clients(first: 1, orderBy: publishedAt, orderDirection: desc, where: {channel: "stable"}) {\n      ...Client\n    }\n  }  \n'])),B);function S(){var e,t,n=Object(A.a)(I,{}).data,c=null===n||void 0===n||null===(e=n.stable)||void 0===e?void 0:e[0],a=null===n||void 0===n||null===(t=n.dev)||void 0===t?void 0:t[0];return Object(b.jsx)("div",{children:Object(b.jsxs)("details",{className:"text-xs text-gray-400 hover:text-gray-600",children:[Object(b.jsx)("summary",{className:"pb-1",children:"IPFS clients"}),c?Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"Latest stable version, published @ ".concat(y(c.publishedAtBlock.timestamp).toLocaleString(g.DateTime.DATETIME_SHORT))}),Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 border border-black px-2 mx-1 bg-white",href:"//ipfs.io/ipfs/".concat(c.ipfsHash),target:"_blank",rel:"noreferrer",children:c.version}),Object(b.jsx)("hr",{})]}):Object(b.jsx)("span",{}),a?Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"Latest dev version, published @ ".concat(y(a.publishedAtBlock.timestamp).toLocaleString(g.DateTime.DATETIME_SHORT))}),Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 border border-black px-2 mx-1 bg-white",href:"//ipfs.io/ipfs/".concat(a.ipfsHash),target:"_blank",rel:"noreferrer",children:a.version}),Object(b.jsx)("hr",{})]}):Object(b.jsx)("span",{})]})})}function E(e){var t=e.showContentDisclaimer,n=void 0!==t&&t;return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{id:"bottom"}),Object(b.jsxs)("footer",{className:"mt-4",children:[n?Object(b.jsx)("div",{className:"text-xs text-gray-400 hover:text-gray-600",children:"All trademarks and copyrights on this page are owned by their respective parties. Posted content is responsibility of the poster."}):"",Object(b.jsxs)("div",{className:"grid items-start grid-cols-3 mt-1 border-t border-black text-xs relative w-100vw overflow-visible",children:[Object(b.jsxs)("div",{className:"text-left px-6",children:[Object(b.jsx)("div",{children:"Powered by"}),Object(b.jsxs)("div",{className:"flex m-1",children:[Object(b.jsx)("a",{className:"mx-1",href:"//polygon.technology/",target:"_blank",rel:"noreferrer",children:Object(b.jsx)("img",{className:"w-4 h-4",src:v,alt:"Polygon"})}),Object(b.jsx)("a",{className:"mx-1",href:"//thegraph.com/",target:"_blank",rel:"noreferrer",children:Object(b.jsx)("img",{className:"w-4 h-4",src:f,alt:"The Graph"})})]})]}),Object(b.jsxs)("div",{className:"justify-center flex h-6 items-end",children:[Object(b.jsxs)("details",{className:"bg-primary",children:[Object(b.jsx)("summary",{children:Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 border border-black py-1 px-4 mx-1 bg-white",to:"/_/rules",rel:"noreferrer",children:"Rules"})}),Object(b.jsx)("div",{className:"pt-4",children:Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 border border-black my-4 py-1 px-4 mx-1 bg-white whitespace-nowrap",to:"/_/abuse",rel:"noreferrer",children:"Abuse (DMCA/CSAM)"})})]}),Object(b.jsx)("div",{children:Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 border border-black py-1 px-4 mx-1 bg-white",to:"/_/faq",rel:"noreferrer",children:"FAQ"})}),Object(b.jsx)("div",{children:Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 border border-black py-1 px-4 mx-1 bg-white",href:"//github.com/dchan-network",target:"_blank",rel:"noreferrer",children:"git"})})]}),Object(b.jsx)("div",{className:"justify-end text-right px-6 text-xs text-gray-600 flex",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:"v0.0.1"}),Object(b.jsx)("div",{children:Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"//github.com/dchan-network/dchan-client/issues/new",target:"_blank",rel:"noreferrer",children:"Report a bug"})}),Object(b.jsx)("div",{children:Object(b.jsx)(S,{})})]})})]})]})]})}var T=n(159),D=n.n(T),Q=n(368),P={contract:{address:"0x5a139ee9f56c4F24240aF366807490C171922b0E".toLowerCase()},subgraph:{endpoint:"https://api.thegraph.com/subgraphs/name/dchan-network/dchan-alpha"},ipfs:{endpoint:"https://api.thegraph.com/ipfs/api/v0/add"},content_view:{page_size:25,board_default_view_mode:"catalog",board_sort_threads_by:"lastBumpedAt",board_sort_direction:"desc"},content_filter:{score_threshold:1,show_below_threshold:!1},autorefresh:{enabled:!0,seconds:60},eula:{agreed:!1},favorites:{}};function F(e){var t=0===e.indexOf("0x")?2:0;return"".concat(e.substring(t,t+3),"-").concat(e.substring(e.length-3))}function L(e){return"#".concat(F(e).replace("-",""))}function _(e,t){return JSON.stringify({ns:"dchan",v:0,op:e,data:t})}function H(e,t,n){return M.apply(this,arguments)}function M(){return(M=Object(O.a)(m.a.mark((function e(t,n,c){var a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new D.a(window.web3.currentProvider),r=new a.eth.Contract(Q,P.contract.address),e.next=4,r.methods.message(_(t,n));case 4:return s=e.sent,e.abrupt("return",s.send({from:c}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,n){return q.apply(this,arguments)}function q(){return(q=Object(O.a)(m.a.mark((function e(t,n,c){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new D.a(window.web3.currentProvider),r=c*Math.pow(10,18),e.abrupt("return",a.eth.sendTransaction({from:t,to:n,value:r}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return R.apply(this,arguments)}function R(){return(R=Object(O.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new D.a(window.web3.currentProvider),e.abrupt("return",n.eth.getBalance(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return!!e&&("0x89"===e||137===e)}var U=n(9),J=n(11),V=function(){function e(){Object(U.a)(this,e)}return Object(J.a)(e,null,[{key:"post",value:function(e){var t,n,c=e.n,a=e.board,r=e.thread,s=e.from,i=null===r||void 0===r||null===(t=r.op)||void 0===t||null===(n=t.from)||void 0===n?void 0:n.id;return a&&a&&a.name&&a.id?r&&i?"/".concat(a.name,"/").concat(a.id,"/").concat(i,"/").concat(r.n,"/").concat(s.id,"/").concat(c):"/".concat(a.name,"/").concat(a.id,"/").concat(s.id,"/").concat(c):void 0}},{key:"thread",value:function(e){var t=e.n,n=e.op,c=e.board;return c&&c.name&&c.id&&t?"/".concat(c.name,"/").concat(c.id,"/").concat(n.from.id,"/").concat(t):void 0}},{key:"board",value:function(e,t){var n=e.name,c=e.id;return n&&c?"/".concat(n,"/").concat(c).concat("catalog"===t?"/catalog":""):void 0}},{key:"posts",value:function(){return"/_/posts"}},{key:"boards",value:function(){return"/_/boards"}}]),e}(),Z=n(35),X=n.n(Z),G=n(653);function K(e){var t=e.address,n=e.className,c=void 0===n?"":n,a=e.etherscannable,r=void 0===a||a;return Object(b.jsxs)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:r?"https://polygonscan.com/address/".concat(t):"javascript:void(0)",target:r?"_blank":"",children:[Object(b.jsx)("span",{className:[c,ee].join(" "),style:{backgroundColor:L(t)},children:Object(Z.trim)(btoa(G(t).toString("hex")),"=").substr(-8,8)}),Object(b.jsxs)("abbr",{style:{textDecoration:"none"},title:t,children:[Object(b.jsx)("img",{className:"inline h-4 w-4 mx-1",alt:"MATIC",src:v}),F(t)]})]})}var $,ee="font-mono text-readable-anywhere pt-0.5 px-0.5 mx-0.5 rounded opacity-75 hover:opacity-100 text-xs whitespace-nowrap";function te(e){var t=e.board;return Object(b.jsx)(l.b,{style:{backgroundColor:L(t.id)},className:ee+" text-blue-600 visited:text-purple-600 hover:text-blue-500 hover:text-opacity-100",title:t.title,to:"".concat(V.board(t)),children:t.name})}var ne=Object(C.a)($||($=Object(N.a)(["\n  fragment Board on Board {\n    id\n    title\n    postCount\n    name\n    isLocked\n    isNsfw\n  }\n\n  query Boards {\n    boards(orderBy: postCount, orderDirection: desc, first: 10) {\n      ...Board\n    }\n  }\n"])));function ce(){var e=Object(A.a)(ne,{variables:{},pollInterval:3e4}).data,t=null===e||void 0===e?void 0:e.boards;return Object(b.jsxs)("div",{className:"text-sm py-1 border-solid border-secondary border-0 border-b-2",children:["[",Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"/",children:"dchan.network"}),"]",Object(b.jsxs)("span",{className:"text-black text-opacity-50",children:["[",!!t&&t.map((function(e){return Object(b.jsx)("span",{className:"dchan-navigation-board",children:Object(b.jsx)(te,{board:e})},e.id)})),"][",Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"/_/boards",children:"+"}),"]"]})]})}var ae=n.p+"static/media/dchan.35747f56.png",re=function(e){var t=e.speed,n=void 0===t?"slow":t,c=e.size,a=void 0===c?16:c;return Object(b.jsx)("span",{className:"center flex",children:Object(b.jsx)("img",{className:"spin-".concat(n," h-").concat(a," w-").concat(a," animation-spin pointer-events-none"),src:ae,alt:""})})},se=function(){return Object(b.jsx)(l.b,{to:"/",children:Object(b.jsxs)("span",{className:"h-24 font-mono center grid grid-cols-2 relative",children:[Object(b.jsx)("span",{className:"text-right mr-8",children:"dchan"}),Object(b.jsx)("span",{className:"absolute left-0 right-0 bottom-0 top-0 m-auto h-16",children:Object(b.jsx)(re,{size:16})}),Object(b.jsx)("span",{className:"text-left ml-8",children:"network"})]})})},ie=function(e){var t=e.title;return Object(b.jsxs)("header",{children:[Object(b.jsx)(ce,{}),Object(b.jsx)(se,{}),Object(b.jsx)("div",{className:"text-4xl text-contrast font-weight-800 font-family-tahoma",children:t}),Object(b.jsx)("div",{className:"p-2",children:Object(b.jsx)("hr",{})})]})},oe=n(793),le=n(78),de=n(369),be=n.n(de),je=Object(le.a)({provider:void 0,chainId:void 0,accounts:[],loadWeb3Modal:function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logoutOfWeb3Modal:function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},(function(){var e=Object(c.useState)(new be.a({network:"matic",cacheProvider:!0,providerOptions:{injected:{display:{name:"Injected",description:"Connect with the provider in your Browser"},package:null}}})),t=Object(o.a)(e,1)[0],n=Object(c.useState)(),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(),l=Object(o.a)(i,2),d=l[0],b=l[1],j=Object(c.useState)([]),u=Object(o.a)(j,2),h=u[0],x=u[1];return{provider:r,chainId:d,accounts:h,loadWeb3Modal:Object(c.useCallback)(Object(O.a)(m.a.mark((function e(){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.connect();case 3:return n=e.sent,s(new oe.a(n)),b(window.ethereum.chainId),e.next=8,window.ethereum.request({method:"eth_accounts"});case 8:c=e.sent,x(c),window.ethereum.on("accountsChanged",(function(e){0===e.length&&s(void 0),x(e)})),window.ethereum.on("chainChanged",(function(e){b(e)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error({error:e.t0});case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[s,b,x,t]),logoutOfWeb3Modal:Object(c.useCallback)(Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.clearCachedProvider();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),[t])}}));function ue(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],r=je(),s=r.provider,i=r.loadWeb3Modal,l=r.logoutOfWeb3Modal,d=Object(c.useCallback)(Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=7;break}return a(!0),e.next=4,i();case 4:a(!1),e.next=8;break;case 7:l();case 8:case"end":return e.stop()}}),e)}))),[s,i,l,a]);return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:["[",Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",onClick:d,children:n?"Connecting wallet...":s?"Disconnect Wallet":"Connect Wallet"}),"]"]}),s?"":Object(b.jsx)("div",{className:"text-xs px-2",children:Object(b.jsxs)("small",{className:"p-1 text-center",children:[Object(b.jsx)("div",{children:"You need to connect your wallet to interact with dchan."}),Object(b.jsxs)("div",{children:["Works with"," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"//metamask.io",children:"Metamask"})," ","(for Desktop) or"," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"//trustwallet.com/",children:"Trust Wallet"})," ","(for Mobile)."]}),Object(b.jsx)("div",{children:"Other wallets might not be supported."})]})})]})}var he,xe=n(7),pe=Object(C.a)(he||(he=Object(N.a)(["\n  query User($address: String!, $userId: String!) {\n    admin(id: $address) {\n      id\n    }\n    user(id: $userId) {\n      id\n      jannies {\n        board {\n          id\n        }\n      }\n    }\n  }\n"]))),me=function(){var e=je().accounts,t=e.length>0?e[0]:"",n=Object(A.a)(pe,{variables:{address:t,userId:"0x".concat(t.substr(2,3)).concat(t.substr(-3,3))},skip:!t}),a=n.refetch,r=n.loading,s=n.data,i=Object(c.useCallback)((function(){var e;if(!r)return!!(null===s||void 0===s||null===(e=s.admin)||void 0===e?void 0:e.id)}),[r,s]),o=Object(c.useCallback)((function(e){var t,n;if(!r)return i()||!!(null===s||void 0===s||null===(t=s.user)||void 0===t||null===(n=t.jannies)||void 0===n?void 0:n.filter((function(t){var n=t.board;return(null===n||void 0===n?void 0:n.id)===e})).length)}),[i,r,s]);return Object(c.useEffect)((function(){a()}),[a]),Object(xe.a)(Object(xe.a)({},n),{},{isJannyOf:o,isAdmin:i})};function Oe(){var e=me().isAdmin,t=je().accounts,n=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("admin:claim",{},t[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(O.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=prompt("Whomst 0x?"),alert("Granting admin to ".concat(n)),e.next=4,H("admin:grant",{hex_address:n},t[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(O.a)(m.a.mark((function e(){var n,c,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=prompt("IPFS hash?"),c=prompt("Version?"),a=prompt("Channel?")||"",r=!!n&&!!c,alert("".concat(r?"Publishing":"Invalid"," '").concat(n,"', version '").concat(c,"' on channel '").concat(a,"'")),e.next=7,r;case 7:if(e.t0=e.sent,!e.t0){e.next=10;break}H("client:publish",{ipfs_hash:n,version:c,channel:a},t[0]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("chan:lock",{},t[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("chan:unlock",{},t[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"bg-primary min-h-100vh",children:[Object(b.jsx)(ie,{title:"Admin panel"}),Object(b.jsx)(ue,{}),e()?Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"center grid",children:Object(b.jsx)("button",{onClick:a,children:"Publish Client"})}),Object(b.jsx)("div",{className:"center grid",children:Object(b.jsx)("button",{onClick:n,children:"Claim Admin"})}),Object(b.jsx)("div",{className:"center grid",children:Object(b.jsx)("button",{onClick:c,children:"Grant Admin"})}),Object(b.jsxs)("div",{className:"center grid",children:[Object(b.jsx)("button",{onClick:r,children:"Lock"}),Object(b.jsx)("button",{onClick:s,children:"Unlock"})]}),Object(b.jsx)(l.b,{className:"m-4 text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"/",children:"Home"}),Object(b.jsx)(E,{})]}):""]})}var ve=n(31);function fe(e){var t=e.id,n=e.className,c=void 0===n?"":n,a=F(t);return Object(b.jsx)("span",{style:{backgroundColor:L(a)},className:[c,ge].join(" "),children:a})}var Ae,ge="font-mono text-readable-anywhere pt-0.5 px-0.5 mx-0.5 rounded opacity-75 hover:opacity-100 text-xs whitespace-nowrap";function ye(e){var t=e.id,n=e.title,c=e.postCount,a=e.name,r=e.isLocked,s=e.isNsfw;return Object(b.jsxs)("tr",{className:"p-4",children:[Object(b.jsx)("td",{children:Object(b.jsx)(fe,{id:t})}),Object(b.jsx)("td",{className:"px-2 whitespace-nowrap",children:Object(b.jsx)("span",{children:Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 mx-4 inline-block overflow-hidden overflow-ellipsis max-w-12rem",to:"/".concat(a,"/").concat(t),children:n})})}),Object(b.jsx)("td",{className:"px-2 whitespace-nowrap",children:Object(b.jsx)("span",{children:Object(b.jsxs)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 mx-4",to:"/".concat(a,"/").concat(t),children:["/",a,"/"]})})}),Object(b.jsx)("td",{className:"px-2 whitespace-nowrap",children:Object(b.jsxs)("span",{children:[c," posts"]})}),Object(b.jsxs)("td",{className:"px-2 whitespace-nowrap",children:[r?Object(b.jsx)("span",{title:"Board locked. You cannot post.",children:"\ud83d\udd12"}):"",s?Object(b.jsx)("span",{title:"NSFW Board",children:"\ud83d\udd1e"}):""]})]},t)}function we(e){var t=e.className,n=void 0===t?"":t,c=e.loading,a=void 0!==c&&c,r=e.boards;return Object(b.jsx)("div",{className:"".concat(n," grid center"),children:Object(b.jsx)("table",{children:Object(b.jsx)("tbody",{children:a?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{className:"p-4",children:"Loading..."})}):r?r.length>0?r.map(ye):"No boards":""})})})}function ke(e){var t=e.className,n=void 0===t?"":t;return Object(b.jsxs)("div",{className:"".concat(n," grid center"),children:[Object(b.jsx)(re,{speed:"sanic"}),Object(b.jsx)("div",{children:"Loading..."})]})}var Ne,Ce=Object(C.a)(Ae||(Ae=Object(N.a)(["\n  fragment Board on Board{\n    id\n    title\n    threadCount\n    postCount\n    name\n    isLocked\n    isNsfw\n    createdAt\n    createdAtBlock {\n      timestamp\n      number\n    }\n    lastBumpedAtBlock {\n      timestamp\n      number\n    }\n    jannies {\n      user {\n        address\n      }\n    }\n  }\n"]))),Be=Object(C.a)(Ne||(Ne=Object(N.a)(["\n  ",'\n  \n  query Boards {\n    mostPopular: boards(orderBy: postCount, orderDirection: desc, where: {score_gt: "900000000"}) {\n      ...Board\n    }\n    lastBumped: boards(orderBy: lastBumpedAt, orderDirection: desc, where: {score_gt: "900000000"}) {\n      ...Board\n    }\n    lastCreated: boards(orderBy: createdAt, orderDirection: desc, where: {score_gt: "900000000"}) {\n      ...Board\n    }\n  }\n'])),Ce);function Ie(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(O.a)(m.a.mark((function e(t,n){var c,a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=27;break}if(!(c=t[0])){e.next=27;break}return n({progress:"Uploading image..."}),e.prev=4,(a=new FormData).append("file",c),e.next=9,fetch(P.ipfs.endpoint,{method:"POST",body:a,referrer:""});case 9:return r=e.sent,e.next=12,r.json();case 12:if(s=e.sent,console.log({ipfs:s}),!s.Hash){e.next=19;break}return n({success:"File uploaded"}),e.abrupt("return",{ipfs:{hash:s.Hash},name:s.Name,byte_size:parseInt(s.Size)});case 19:s.error?n({error:s.error}):n({error:"File upload failed!"});case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(4),console.error({ipfsUpload:e.t0}),n({error:"File upload failed!"}),e.abrupt("return");case 27:case"end":return e.stop()}}),e,null,[[4,22]])})))).apply(this,arguments)}function Ee(e,t,n){return Te.apply(this,arguments)}function Te(){return(Te=Object(O.a)(m.a.mark((function e(t,n,c){var a,r,s,i,o,l,d,b,j,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.board,r=t.thread,s=t.comment,i=t.name,o=t.subject,l=t.sage,d=t.nonce,!(t.file.length>0)){e.next=7;break}return e.next=4,Ie(t.file,c);case 4:if(b=e.sent){e.next=7;break}return e.abrupt("return");case 7:return j={comment:s,name:i,nonce:d},b&&(j.file=Object(xe.a)(Object(xe.a)({},b),{},{is_nsfw:t.is_nsfw,is_spoiler:t.is_spoiler})),r?j.thread=r:j.subject=o,a&&(j.board=a),l&&(j.sage=!0),c({progress:"Waiting tx confirmation..."}),e.next=15,H("post:create",j,n[0]);case 15:return u=e.sent,c({success:"Sent ;)"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return(De=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Removing..."}),e.next=4,H("post:remove",{id:t},n[0]);case 4:c({success:"Removed"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Qe(){return(Qe=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Reporting..."}),e.next=4,H("post:report",{id:t},n[0]);case 4:c({success:"Reported"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Pe(e,t,n){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(O.a)(m.a.mark((function e(t,n,c){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Creating..."}),e.next=4,H("board:create",t,n[0]);case 4:return a=e.sent,c({success:"Created"}),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function Le(){return(Le=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Removing..."}),e.next=4,H("board:remove",{id:t},n[0]);case 4:c({success:"Removed"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _e(){return(_e=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Locking..."}),e.next=4,H("board:lock",{id:t},n[0]);case 4:c({success:"Locked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function He(){return(He=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Unlocking..."}),e.next=4,H("board:unlock",{id:t},n[0]);case 4:c({success:"Unlocked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Me(){return(Me=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Locking..."}),e.next=4,H("thread:lock",{id:t},n[0]);case 4:c({success:"Locked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ze(){return(ze=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Unlocking..."}),e.next=4,H("thread:unlock",{id:t},n[0]);case 4:c({success:"Unlocked"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function qe(){return(qe=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Pinning..."}),e.next=4,H("thread:pin",{id:t},n[0]);case 4:c({success:"Pinned"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function We(){return(We=Object(O.a)(m.a.mark((function e(t,n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({progress:"Unpinning..."}),e.next=4,H("thread:unpin",{id:t},n[0]);case 4:c({success:"Unpinned"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Re(){return(Re=Object(O.a)(m.a.mark((function e(t,n,c){var a,r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c({progress:"Banning..."}),a=window.prompt("How many seconds?"),r=parseInt(a||""),!isNaN(r)){e.next=7;break}return c({error:"Not a number: ".concat(a)}),e.abrupt("return");case 7:if(s=window.prompt("Reason?"),i=g.DateTime.fromSeconds(g.DateTime.now().toSeconds()+r),!window.confirm("Banning until ".concat(i.toISO()))){e.next=15;break}return e.next=12,H("post:ban",{id:t,seconds:r,reason:s},n[0]);case 12:c({success:"Banned"}),e.next=16;break;case 15:c("Canceled");case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),c({error:e.t0}),console.error({error:e.t0});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}var Ye=n(156);function Ue(){var e=je(),t=e.accounts,n=e.provider,a=Object(d.f)(),r=Object(c.useState)(),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(c.useState)(!1),h=Object(o.a)(u,2),x=h[0],p=h[1],v=Object(Ye.a)(),f=v.register,A=v.handleSubmit,g=function(){var e=Object(O.a)(m.a.mark((function e(n){var c,r,s,i,o,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,Pe(n,t,l);case 3:c=e.sent,(r=null===c||void 0===c?void 0:c.events)&&r.length>0&&(s=r[0],i=s.transactionHash,o=s.logIndex,d="/".concat(i,"-").concat(o),a.push(d)),p(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(j,{title:Object(b.jsx)("span",{children:"Create a board!"}),children:Object(b.jsxs)("form",{onSubmit:A(g),children:[Object(b.jsx)(ue,{}),Object(b.jsx)("div",{className:"border center flex",children:n?Object(b.jsxs)("tr",{className:"p-4 text-center",children:[Object(b.jsx)("td",{className:"px-2",children:Object(b.jsx)("input",Object(xe.a)({className:"text-center",type:"text",placeholder:"Videogames",maxLength:70},f("title")))}),Object(b.jsxs)("td",{className:"px-2",children:["/",Object(b.jsx)("input",Object(xe.a)({className:"text-center w-16",type:"text",placeholder:"v",maxLength:7},f("name"))),"/"]}),Object(b.jsxs)("td",{className:"px-2",children:[Object(b.jsx)("input",Object(xe.a)({id:"dchan-input-is_nsfw",className:"mx-1",type:"checkbox"},f("nsfw"))),Object(b.jsx)("label",{htmlFor:"dchan-input-is_nsfw",className:"text-black font-weight-800 font-family-tahoma",children:"NSFW"})]}),Object(b.jsx)("td",{className:"px-2",children:Object(b.jsx)("button",{className:"px-2 mx-1 bg-gray-100 border",type:"submit",disabled:x,children:"string"===typeof i?i:"Create"})})]}):Object(b.jsx)("tr",{})})]})})}function Je(e){var t=e.baseUrl,n=e.search,a=Object(d.f)(),r=Object(c.useState)(!!n),s=Object(o.a)(r,2),i=s[0],l=s[1],j=Object(c.useCallback)((function(e){a.push("".concat(t).concat(e?"?s=".concat(e):""))}),[a,t]),u=Object(c.useCallback)((function(){return l(!0)}),[l]);return Object(b.jsxs)("details",{open:i,children:[Object(b.jsx)("summary",{children:Object(b.jsx)("label",{htmlFor:"dchan-search",onClick:u,children:"\ud83d\udd0d"})}),Object(b.jsxs)("div",{className:"mx-1 text-center bg-primary",children:[Object(b.jsx)("div",{children:"Search:"}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{id:"dchan-search",className:"text-center w-32",type:"text",placeholder:"...",value:n,onChange:function(e){return j(e.target.value)},autoFocus:!0})}),Object(b.jsx)("div",{className:"relative",children:n?Object(b.jsxs)("span",{className:"text-xs",children:["[",Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",onClick:function(){return j("")},children:"Cancel"}),"]"]}):""})]})]})}var Ve,Ze,Xe=n(77),Ge=Object(C.a)(Ve||(Ve=Object(N.a)(["\n  ","\n\n  query BoardsSearch($searchName: String!, $searchTitle: String!) {\n    searchByTitle: boardSearch(text: $searchTitle) {\n      ...Board\n    }\n    searchByName: boards(where: {name: $searchName}) {\n      ...Board\n    }\n  }\n"])),Ce);function Ke(e){var t=e.location,n=e.match.params,a=Object(Xe.parse)(t.search),r="".concat((null===n||void 0===n?void 0:n.board_name)||"")||(Object(Z.isString)(a.s)?a.s:""),s=Object(A.a)(Ge,{pollInterval:3e4,variables:{searchName:r,searchTitle:r.length>1?"".concat(r,":*"):""},skip:!r}),i=s.refetch,o=s.data,l=s.loading,d=Object(A.a)(Be,{pollInterval:3e4}),u=d.data,h=d.loading;Object(c.useEffect)((function(){i()}),[r,i]);var x=o&&(o.searchByTitle||o.searchByName)?Object(Z.uniqBy)([].concat(Object(ve.a)(o.searchByName),Object(ve.a)(o.searchByTitle)),"id"):[];return Object(b.jsxs)("div",{className:"bg-primary min-h-100vh",children:[Object(b.jsx)(ie,{title:"Boards"}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"flex center",children:Object(b.jsx)(Je,{baseUrl:V.boards(),search:r})}),l||h?Object(b.jsx)("div",{className:"center grid",children:Object(b.jsx)(ke,{})}):r?Object(b.jsx)("div",{className:"center flex",children:Object(b.jsx)("div",{className:"p-2",children:x.length>0?Object(b.jsx)(j,{title:Object(b.jsxs)("span",{children:['Results for "',r,'"']}),children:Object(b.jsx)(we,{boards:x})}):"No boards found"})}):u?Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"center flex",children:Object(b.jsx)("div",{children:Object(b.jsx)(j,{title:Object(b.jsx)("span",{children:"Most popular"}),children:Object(b.jsx)(we,{boards:u.mostPopular})})})}),Object(b.jsxs)("div",{className:"center flex flex-wrap",children:[Object(b.jsx)("span",{className:"px-2",children:Object(b.jsx)(j,{title:Object(b.jsx)("span",{children:"Last created"}),children:Object(b.jsx)(we,{boards:u.lastCreated})})}),Object(b.jsx)("span",{className:"px-2",children:Object(b.jsx)(j,{title:Object(b.jsx)("span",{children:"Last bumped"}),children:Object(b.jsx)(we,{boards:u.lastBumped})})})]}),Object(b.jsx)("div",{className:"center flex",children:Object(b.jsx)("div",{children:Object(b.jsx)(Ue,{})})})]}):""]}),Object(b.jsx)(E,{})]})]})}var $e,et=Object(C.a)(Ze||(Ze=Object(N.a)(["\n  query LatestBlock {\n    blocks(first: 1, orderBy: timestamp, orderDirection: desc) {\n        timestamp\n        number\n    }\n  }\n"])));function tt(){var e,t=Object(A.a)(et,{pollInterval:1e4});return Object(xe.a)(Object(xe.a)({},t),{},{lastBlock:null===(e=t.data)||void 0===e?void 0:e.blocks[0]})}var nt,ct,at,rt=Object(C.a)($e||($e=Object(N.a)(["\n  fragment Post on Post{\n    id\n    n\n    from {\n      id\n      address\n    }\n    thread {\n      board {\n        id\n        name\n      }\n      id\n      n\n      op {\n        from {\n          id\n          address\n        }\n      }\n    }\n    board {\n      id\n      name\n    }\n    name\n    comment\n    image {\n      id\n      name\n      byteSize\n      ipfsHash\n      score\n      isSpoiler\n      isNsfw\n    }\n    createdAt\n    createdAtBlock {\n      timestamp\n      number\n    }\n    bans {\n      ban {\n        reason\n        expiresAt\n      }\n    }\n    score\n  }\n"]))),st=Object(C.a)(nt||(nt=Object(N.a)(["\n  fragment User on User{\n    id\n    address\n  }\n"]))),it=Object(C.a)(ct||(ct=Object(N.a)(["\n  ","\n  ","\n\n  fragment Thread on Thread{\n    id\n    n\n    isPinned\n    isLocked\n    from {\n      ...User\n    }\n    op {\n      ...Post\n    }\n    board {\n      id\n      name\n    }\n    subject\n    replyCount\n    imageCount\n    score\n    createdAt\n    createdAtBlock {\n      timestamp\n      number\n    }\n  }\n"])),rt,st),ot=Object(C.a)(at||(at=Object(N.a)(["\n  ","\n  ","\n  \n  query BoardCatalog($board: String!, $block: Int!, $orderBy: String!, $orderDirection: String!, $limit: Int!, $skip: Int!) {\n    pinned: threads(where: {board: $board, isPinned: true}, orderBy: lastBumpedAt, orderDirection: $orderDirection, block: {number: $block}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: $orderDirection) {\n        ...Post\n      }\n    }\n    threads(where: {board: $board, isPinned: false}, orderBy: $orderBy, orderDirection: $orderDirection, first: $limit, skip: $skip, block: {number: $block}) {\n      ...Thread\n      replies(first: 3, orderBy: n, orderDirection: $orderDirection) {\n        ...Post\n      }\n    }\n  }\n"])),it,rt);var lt=Object(le.a)([void 0,void 0],(function(){var e=function(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return console.log(c),t}})),a=Object(o.a)(n,2),r=a[0],s=a[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;s(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(c){console.log(c)}}]}("dchan.config",P),t=Object(o.a)(e,2),n=t[0],a=t[1];return[Object(xe.a)(Object(xe.a)({},P),n),Object(c.useCallback)((function(e){return a(e)}),[a])]}));function dt(e,t){var n=e.score;return parseInt(n)/1e9<parseInt("".concat(t||1))}var bt=n(158),jt=n(370);function ut(e){var t=e.label,n=e.to;return Object(b.jsxs)("div",{children:["[",Object(b.jsx)(jt.a,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",to:n,children:t}),"]"]})}function ht(e){var t=e.status,n=e.className,c=void 0===n?"":n;return t?Object(b.jsx)("div",{className:c+" inline-block text-xs",children:Object(b.jsx)("div",{className:"bg-secondary px-1 border border-black",children:t.error?Object(b.jsx)("div",{className:"text-red-600",children:Object(b.jsxs)("details",{children:[Object(b.jsx)("summary",{children:"Error"}),Object(b.jsx)("pre",{className:"whitespace-pre-wrap",children:t.error.message?t.error.message:JSON.stringify(t.error,null,2)})]})}):t.progress?Object(b.jsxs)("div",{className:"text-gray-900 flex center",children:[Object(b.jsx)(re,{size:4,speed:"faster"}),Object(b.jsx)("span",{className:"px-2",children:t.progress})]}):t.success?Object(b.jsx)("div",{className:"text-green-600",children:Object(b.jsx)("span",{className:"px-2",children:t.success})}):Object(Z.isString)(t)?t:"{}"===JSON.stringify(t)?"No tx result. Maybe it went through anyway?":JSON.stringify(t)})}):Object(b.jsx)("span",{})}function xt(e){var t=e.children;return Object(b.jsxs)("details",{className:"z-20 text-sm inline text-left opacity-10 hover:opacity-100",children:[Object(b.jsx)("summary",{className:"top-0 px-1 h-4 relative"}),Object(b.jsx)("div",{className:"bg-secondary border border-solid border-black p-1 w-24 absolute z-50",children:t.map((function(e){return e}))})]})}function pt(e){var t=e.board,n=je().accounts,a=me().isJannyOf,r=!!t&&a(t.id),s=Object(c.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1];return Object(b.jsxs)("header",{id:"board-header",children:[Object(b.jsx)(ce,{}),Object(b.jsx)(se,{}),Object(b.jsxs)("div",{className:"text-4xl text-contrast font-weight-800 font-family-tahoma relative",children:[Object(b.jsx)("div",{className:"text-xs pb-2",children:Object(b.jsx)(fe,{id:(null===t||void 0===t?void 0:t.id)||"0x0000000000000000000000000000000000000000"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:(null===t||void 0===t?void 0:t.isLocked)?Object(b.jsx)("span",{title:"Board locked. You cannot reply anymore.",children:"\ud83d\udd12"}):Object(b.jsx)("span",{})})," ",Object(b.jsx)("span",{className:"font-semibold",children:Object(b.jsxs)(l.b,{to:t?"/".concat(t.name,"/").concat(t.id):"#",children:["/",(null===t||void 0===t?void 0:t.name)||"?","/ - ",(null===t||void 0===t?void 0:t.title)||"..."]})}),t&&r?Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{children:Object(b.jsxs)(xt,{children:[Object(b.jsx)("div",{children:t.isLocked?Object(b.jsxs)("span",{children:[Object(b.jsx)("input",{name:"lock",type:"hidden",value:"false"}),Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return He.apply(this,arguments)}(null===t||void 0===t?void 0:t.id,n,j)},children:"\ud83d\udd13 Unlock"})]}):Object(b.jsxs)("span",{children:[Object(b.jsx)("input",{name:"lock",type:"hidden",value:"true"}),Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return _e.apply(this,arguments)}(t.id,n,j)},children:"\ud83d\udd12 Lock"})]})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return Le.apply(this,arguments)}(t.id,n,j)},children:"\u274c Remove"})})]})}),Object(b.jsx)(ht,{className:"p-4",status:d})]}):""]})]}),Object(b.jsx)("div",{className:"p-2",children:Object(b.jsx)("hr",{})})]})}function mt(e){var t=e.value,n=e.className,c=void 0===n?"":n,a=e.maxLength;return Object(b.jsx)("span",{className:["absolute bottom-0 right-0 text-xs bg-white pointer-events-none",c,t<.1*a?"opacity-0":t<.5*a?"opacity-25":t<.9*a?"opacity-50":t<a?"opacity-75":"opacity-100 text-contrast"].join(" "),children:"".concat(t,"/").concat(a)})}var Ot=n(91),vt=Object(le.a)({publish:Ot.publish,subscribe:Ot.subscribe,unsubscribe:Ot.unsubscribe},(function(){return{publish:Ot.publish,subscribe:Ot.subscribe,unsubscribe:Ot.unsubscribe}}));function ft(){return Object(b.jsx)("div",{className:"text-xs text-gray-400 hover:text-gray-600 pt-1",children:Object(b.jsx)("small",{children:"Using dchan is free. Est. base tx gas price: 0.0001 MATIC (~$0.0001)"})})}function At(){var e=je(),t=e.provider,n=e.accounts,a=e.chainId,r=n[0],s=Object(c.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=13;break}return e.t0=d,e.t1=parseInt,e.next=6,W(r);case 6:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=Math.pow(10,18),e.t5=e.t3/e.t4,(0,e.t0)(e.t5),e.next=14;break;case 13:d(void 0);case 14:e.next=19;break;case 16:e.prev=16,e.t6=e.catch(0),console.error({refreshBalance:e.t6});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),t=setInterval(e,1e4);return e(),function(){return clearInterval(t)}}),[r]),t&&r&&Y(a)?Object(b.jsxs)("div",{className:"text-xs center grid",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"px-1",children:"Connected as"}),Object(b.jsxs)("span",{children:["[",Object(b.jsx)(K,{address:r}),"]"]},r)]}),Object(b.jsx)("div",{children:void 0!==l?Object(b.jsxs)("span",{children:["( ",l.toFixed(4),Object(b.jsx)("img",{className:"inline h-4 w-4 mx-1",alt:"MATIC",src:v}),")",void 0!==l&&l<5e-4?Object(b.jsxs)("div",{className:"p-4",children:[Object(b.jsx)("div",{children:"Need Matic?"}),Object(b.jsxs)("div",{children:["Free faucets:",Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"https://matic.supply/",target:"_blank",rel:"noreferrer",className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 px-2",children:"https://matic.supply"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"https://macncheese.finance/matic-polygon-mainnet-faucet.php",target:"_blank",rel:"noreferrer",className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 px-2",children:"https://macncheese.finance"})})]})]})]}):""]}):""})]}):Object(b.jsx)("span",{})}var gt="0x".concat(137..toString(16)),yt={chainId:gt,chainName:"Matic Mainnet",rpcUrls:["https://rpc-mainnet.matic.network","https://matic-mainnet.chainstacklabs.com","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet-full-rpc.bwarelabs.com","https://matic-mainnet-archive-rpc.bwarelabs.com"],iconUrls:["https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0/logo.png"],blockExplorerUrls:["https://polygonscan.com/"],nativeCurrency:{name:"Matic Token",symbol:"MATIC",decimals:18}},wt=[-32603,4902];function kt(){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:gt}]});case 3:e.next=12;break;case 5:if(e.prev=5,e.t0=e.catch(0),!wt.includes(e.t0.code)){e.next=11;break}Ct(),e.next=12;break;case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Ct(){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"wallet_addEthereumChain",params:[yt]});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(){var e=je(),t=e.provider,n=e.chainId,a=Object(c.useState)(!1),r=Object(o.a)(a,2),s=r[0],i=r[1],l=Object(c.useCallback)(Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){i(!0)}),2e3),e.next=3,kt();case 3:case"end":return e.stop()}}),e)}))),[i]);return t&&!Y(n)?Object(b.jsxs)("div",{className:"p-4",children:[Object(b.jsx)("div",{children:"You need to be connected to the Polygon chain in order to interact with dchan."}),Object(b.jsxs)("div",{className:"text-xs",children:["Current chain ID: ",n]}),Object(b.jsxs)("div",{children:["[",Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",onClick:l,children:"Switch chain"}),"]"]}),s?Object(b.jsxs)("div",{className:"text-xs px-2",children:["In case the above button does not seem to work, refer to"," ",Object(b.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.google.com/search?q=how+to+connect+to+polygon+chain",className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",children:"this guide"}),"."]}):""]}):Object(b.jsx)("span",{})}function St(){return Object(b.jsxs)("span",{children:[Object(b.jsx)(ue,{}),Object(b.jsx)(At,{}),Object(b.jsx)(It,{}),Object(b.jsx)(ft,{})]})}var Et=n(670);function Tt(e){var t=e.baseUrl,n=e.thread,a=e.board,r=je(),s=r.provider,i=r.chainId,j=r.accounts,u=Object(d.f)(),h=Object(c.useRef)(null),x=Object(c.useState)(!1),p=Object(o.a)(x,2),v=p[0],f=p[1],A=Object(c.useState)(Object(Z.uniqueId)()),g=Object(o.a)(A,2),y=g[0],w=g[1],k=Object(c.useState)(),N=Object(o.a)(k,2),C=N[0],B=N[1],I=Object(c.useState)(0),S=Object(o.a)(I,2),E=S[0],T=S[1],D=Object(c.useState)(0),Q=Object(o.a)(D,2),P=Q[0],F=Q[1],L=Object(c.useState)(0),_=Object(o.a)(L,2),H=_[0],M=_[1],z=Object(c.useState)(0),q=Object(o.a)(z,2),W=q[0],R=q[1],Y=Object(c.useState)(),U=Object(o.a)(Y,2),J=U[0],V=U[1],X=vt(),G=X.subscribe,$=X.unsubscribe,ee=Object(Ye.a)(),te=ee.register,ne=ee.handleSubmit,ce=ee.formState.errors,ae=ee.setValue,re=ee.getValues,se=ee.reset,ie=ee.trigger,oe=ee.setFocus,le=ee.watch,de=Object(c.useMemo)((function(){return(null===n||void 0===n?void 0:n.id)||(null===a||void 0===a?void 0:a.id)||"form"}),[n,a]);Et(de,{watch:le,setValue:ae},{storage:window.localStorage,exclude:["file","thread","board","nonce"],include:["name"]}),Object(c.useLayoutEffect)((function(){return function(){ie()}}),[ie]);var be=re().file,ue=!!s&&("0x89"===i||137===i),he=Object(c.useState)(!1),pe=Object(o.a)(he,2),Oe=pe[0],ve=pe[1],fe=Object(c.useCallback)((function(e,t){var n=t.from,c=t.n,a=re().comment,r=">>".concat(n,"/").concat(c);ae("comment","".concat(a||"").concat(a&&a.substr(-1,1).match(/\w/)?" ":"").concat(r," "));try{var s;null===h||void 0===h||null===(s=h.current)||void 0===s||s.scrollIntoView(),ue&&oe("comment")}catch(i){console.error({e:i})}}),[re,ae,h,oe,ue]);Object(c.useEffect)((function(){var e=G("FORM_QUOTE",fe);return function(){$(e)}})),Object(c.useEffect)((function(){ve(v)}),[v,ve]);var Ae=Object(c.useCallback)((function(){w(Object(Z.uniqueId)())}),[w]),ge=Object(c.useCallback)((function(){se(),ie(),Ae()}),[se,ie,Ae]),ye=Object(c.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t){var n,c,a,r,s,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),c=null,e.prev=2,e.next=5,Ee(t,j,B);case 5:c=e.sent,e.next=14;break;case 8:e.prev=8,e.t0=e.catch(2),(c={error:e.t0}).error.message.match(/failed.*check.*transaction.*receipt/i)&&delete c.error,B(c),console.log(c);case 14:f(!1),c&&!c.error&&ge(),(a=null===(n=c)||void 0===n?void 0:n.events)&&a.Message&&(r=a.Message,s=r.transactionHash,i=r.logIndex,o="/".concat(s,"-").concat(i),u.push(o));case 18:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[j,u,B,f,ge]),we=Object(c.useCallback)(Object(O.a)(m.a.mark((function e(){var t,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=re().file)&&t.length>0?(n=t[0],(c=new FileReader).readAsDataURL(n),c.onload=function(){var e=c.result;V(e)}):V(void 0);case 2:case"end":return e.stop()}}),e)}))),[re,V]),ke=Object(c.useCallback)(Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:we(),(t=re().file)&&t.length>0?M(t[0].size/1024):M(0);case 3:case"end":return e.stop()}}),e)}))),[we,M,re]),Ne=Object(c.useCallback)((function(){ae("file",void 0),ke()}),[ae,ke]),Ce=Object(c.useCallback)((function(){var e=re().file;if(e&&e.length>0){var t=e[0],n=prompt("Rename in",t.name);if(n){if(n.length>1e3)return void alert("Filename too long, 1000 chars max");var c=t.slice(0,t.size,t.type),a=new DataTransfer;a.items.add(new File([c],n,{type:t.type})),ae("file",a.files)}}}),[re,ae]),Be=Object(c.useCallback)((function(e){var t=e.clipboardData||e.originalEvent.clipboardData,n=t.files,c=t.items;if(c&&c.length>0){var a=c[0];if("file"===a.kind){var r=a.getAsFile(),s=new FileReader;s.onload=function(){var e=Object(O.a)(m.a.mark((function e(t){var n,c,a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.result,!Object(Z.isString)(c)){e.next=10;break}return a=c.substring(c.indexOf(":")+1,c.indexOf(";")),e.next=5,fetch(c).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],"file.".concat(a.split("/")[1]),{type:a})}));case 5:r=e.sent,(s=new DataTransfer).items.add(r),ae("file",s.files),ke();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.readAsDataURL(r)}}else n&&n.length>0&&(ae("file",n),ke())}),[ke,ae]),Ie=Object(c.useState)(t),Se=Object(o.a)(Ie,2),Te=Se[0],De=Se[1];Object(c.useEffect)((function(){t&&t!==Te&&(De(t),ge())}),[t,Te,De,ge]),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=Object(c.useRef)();Object(c.useEffect)((function(){a.current=t}),[t]),Object(c.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return a?a.current(e):""};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}("paste",Be);var Qe=me().isJannyOf,Pe=!!a&&Qe(a.id),Fe=function(){return Object(b.jsxs)(xt,{children:[Object(b.jsx)("div",{children:"Options:"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({id:"dchan-input-sage",className:"mx-1",type:"checkbox"},te("sage")),{},{disabled:Oe})),Object(b.jsx)("label",{htmlFor:"dchan-input-sage",className:"text-black font-weight-800 font-family-tahoma",children:Object(b.jsx)("abbr",{title:"Does not bump the thread",children:"sage"})})]})]})};return Object(b.jsxs)("div",{children:[Object(b.jsx)(St,{}),!Pe&&(null===n||void 0===n?void 0:n.isLocked)?Object(b.jsxs)("div",{className:"text-contrast font-weight-800 font-family-tahoma",children:[Object(b.jsx)("div",{children:"Thread locked."}),Object(b.jsx)("div",{children:"You cannot reply."})]}):!Pe&&(null===a||void 0===a?void 0:a.isLocked)?Object(b.jsxs)("div",{className:"text-contrast font-weight-800 font-family-tahoma",children:[Object(b.jsx)("div",{children:"Board locked."}),Object(b.jsx)("div",{children:"You cannot post."})]}):Object(b.jsx)("div",{children:ue?Object(b.jsx)("div",{className:"grid center w-full text-left sticky top-0 min-h-200px",children:Object(b.jsxs)("form",{ref:h,id:"dchan-post-form",className:"grid center bg-primary p-2 pointer-events-auto bg-primary",onSubmit:ne(ye),children:[Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({type:"hidden"},te("nonce")),{},{disabled:Oe,value:y})),a?Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({type:"hidden"},te("board")),{},{disabled:Oe,value:a.id})):"",n?Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({type:"hidden"},te("thread")),{},{disabled:Oe,value:n.id})):"",Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[n?Object(b.jsx)("tr",{}):Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Name"}),Object(b.jsx)("td",{children:Object(b.jsxs)("span",{className:"relative",children:[Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({className:"dchan-input-name px-1 border border-solid border-gray focus:border-indigo-300",type:"text",placeholder:"Anonymous"},te("name")),{},{disabled:Oe,onChange:function(e){return F(e.target.value.length)},maxLength:70})),Object(b.jsx)(mt,{maxLength:70,value:P})]})})]}),n?Object(b.jsx)("tr",{}):Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Subject"}),Object(b.jsx)("td",{children:Object(b.jsxs)("div",{className:"flex items-center justify-start",children:[Object(b.jsxs)("span",{className:"relative",children:[Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({className:"dchan-input-subject px-1 border border-solid border-gray focus:border-indigo-300",type:"text"},te("subject")),{},{disabled:Oe,onChange:function(e){return R(e.target.value.length)},maxLength:140,placeholder:"..."})),Object(b.jsx)(mt,{maxLength:140,value:W})]}),Object(b.jsx)("button",{className:"dchan-post-submit px-2 mx-1 bg-gray-100 border",type:"submit",disabled:v,children:"New thread"}),Fe(),Object(b.jsx)(ht,{status:C})]})})]}),n?Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Name"}),Object(b.jsx)("td",{children:Object(b.jsxs)("div",{className:"flex items-center justify-start",children:[Object(b.jsxs)("span",{className:"relative",children:[Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({className:"dchan-input-name px-1 border border-solid border-gray focus:border-indigo-300",type:"text",placeholder:"Anonymous"},te("name")),{},{disabled:Oe,onChange:function(e){return F(e.target.value.length)},maxLength:70})),Object(b.jsx)(mt,{maxLength:70,value:P})]}),Object(b.jsx)("button",{className:"dchan-post-submit px-2 mx-1 bg-gray-100 border",type:"submit",disabled:Oe,children:"Post reply"}),Fe(),Object(b.jsx)(ht,{status:C})]})})]}):Object(b.jsx)("tr",{}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"Comment"}),Object(b.jsxs)("td",{children:[Object(b.jsxs)("span",{className:"relative",children:[Object(b.jsx)("textarea",Object(xe.a)(Object(xe.a)({className:"dchan-input-comment px-1 font-sans border border-solid border-gray focus:border-indigo-300",cols:40,rows:4},te("comment",{required:!n})),{},{disabled:Oe,onChange:function(e){return T(e.target.value.length)},maxLength:2e3,placeholder:"..."})),Object(b.jsx)(mt,{className:"pr-4",maxLength:2e3,value:E})]}),ce.comment&&Object(b.jsx)("div",{className:"px-1 text-contrast",children:"This field is required"})]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"px-2 border border-solid border-black bg-highlight font-semibold text-sm",children:"File"}),Object(b.jsx)("td",{className:"flex text-xs",children:Object(b.jsxs)("div",{className:"flex-grow mx-0.5",children:[Object(b.jsx)("span",{className:"text-xs float-right bg-primary",children:"(1000kb max)"}),Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({className:"w-64",type:"file",accept:"image/*"},te("file",{required:!1})),{},{disabled:Oe,onChange:ke})),be&&be.length>0?Object(b.jsxs)("div",{className:"flex",children:[J?Object(b.jsxs)("details",{className:"mx-0.5",open:!0,children:[Object(b.jsx)("summary",{children:"\ud83d\uddbc"}),Object(b.jsx)("img",{alt:"",className:"max-h-24 max-w-24",src:J}),Object(b.jsxs)("span",{className:"text-xs ".concat(H>1e3?"text-contrast":""),children:[Math.round(H)," kb"]})]}):"",Object(b.jsxs)("span",{children:[Object(b.jsx)("button",{className:"dchan-input-file-rename mx-0.5",title:"Rename file",type:"button",onClick:Ce,children:"\u270e"}),Object(b.jsx)("button",{className:"dchan-input-file-remove mx-0.5",title:"Remove file",type:"button",onClick:Ne,children:"\u274c"})]}),Object(b.jsxs)("details",{className:"mx-0.5",children:[Object(b.jsx)("summary",{className:"marker-closed-hide",children:"\u2699\ufe0f"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({id:"dchan-input-is_spoiler",className:"mx-1",type:"checkbox"},te("is_spoiler")),{},{disabled:Oe})),Object(b.jsx)("label",{htmlFor:"dchan-input-is_spoiler",className:"text-black font-weight-800 font-family-tahoma",children:"Spoiler"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({id:"dchan-input-is_nsfw",className:"mx-1",type:"checkbox"},te("is_nsfw")),{},{disabled:Oe})),Object(b.jsx)("label",{htmlFor:"dchan-input-is_nsfw",className:"text-black font-weight-800 font-family-tahoma",children:"NSFW"})]})]})]}):""]})}),ce.file&&Object(b.jsx)("div",{className:"px-1 text-contrast",children:"This field is required"})]})]})}),Object(b.jsxs)("div",{className:"p-1 text-xs flex center",children:[Object(b.jsx)("input",Object(xe.a)(Object(xe.a)({id:"dchan-input-rules",className:"mx-1",type:"checkbox"},te("rulesAccepted",{required:!0})),{},{disabled:Oe})),Object(b.jsx)("label",{htmlFor:"dchan-input-rules",className:"text-black font-weight-800 font-family-tahoma",children:Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:["I've read the"," ",Object(b.jsx)(l.b,{to:"/_/rules",target:"_blank",className:"text-blue-600 visited:text-purple-600 hover:text-blue-400",children:"rules"})," ","and the"," ",Object(b.jsx)(l.b,{to:"/_/faq",target:"_blank",className:"text-blue-600 visited:text-purple-600 hover:text-blue-400",children:"FAQ"})," ","before posting."]}),Object(b.jsxs)("li",{children:["I understand that"," ",Object(b.jsxs)("abbr",{title:"Other users will be able to view all past transactions you ever made using this address. Be mindful of the security risks this entails.",children:[Object(b.jsx)("i",{children:"my posts will be public and signed by my address"}),j&&j.length>0?Object(b.jsx)(K,{address:j[0]}):""," "]})]}),Object(b.jsxs)("li",{children:["and that"," ",Object(b.jsx)("abbr",{title:"Posts are stored on the blockchain and images are uploaded to IPFS. _This_cannot_be_undone_. Content can be removed, but will still be obtainable.",children:Object(b.jsx)("i",{children:"I won't be able to delete the content I post."})})]})]})}),ce.rulesAccepted&&Object(b.jsx)("div",{className:"px-1 text-contrast",children:"This field is required"})]})]})}):""})]})}var Dt,Qt=n(785);function Pt(e){var t,n,a,r,s=e.onRefresh,i=lt(),l=Object(o.a)(i,2),d=l[0],j=l[1],u=Object(c.useState)(""),h=Object(o.a)(u,2),x=h[0],p=h[1],m=Object(c.useState)(g.DateTime.now()),O=Object(o.a)(m,2),v=O[0],f=O[1],A=Object(c.useCallback)((function(){f(g.DateTime.now()),s()}),[f,s]),y=Object(c.useCallback)((function(){var e,t,n=-v.diffNow().toMillis()/1e3;if((null===d||void 0===d||null===(e=d.autorefresh)||void 0===e?void 0:e.enabled)&&n>((null===d||void 0===d||null===(t=d.autorefresh)||void 0===t?void 0:t.seconds)||Number.MAX_SAFE_INTEGER))A();else{if(0===n)return;p(v.toRelative()||"")}}),[d,v,p,A]);return Object(c.useEffect)((function(){y()}),[v,y]),Object(Qt.a)((function(){y()}),1e3),Object(b.jsx)("span",{className:"mx-4 flex items-start relative whitespace-nowrap",children:Object(b.jsx)("div",{children:Object(b.jsxs)("details",{children:[Object(b.jsxs)("summary",{children:[Object(b.jsxs)("span",{children:["[",Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",onClick:A,children:x||"Refreshing..."}),"]"]}),Object(b.jsxs)("div",{className:"text-xs",children:[Object(b.jsx)("input",{id:"dchan-input-refresh-toggle1",className:"mx-1 text-xs whitespace-nowrap",type:"checkbox",checked:null===d||void 0===d||null===(t=d.autorefresh)||void 0===t?void 0:t.enabled,onChange:function(e){j(Object(xe.a)(Object(xe.a)({},d),{},{autorefresh:Object(xe.a)(Object(xe.a)({},null===d||void 0===d?void 0:d.autorefresh),{},{enabled:e.target.checked})}))}}),Object(b.jsxs)("label",{htmlFor:"dchan-input-refresh-toggle1",children:["Refresh every ",null===d||void 0===d||null===(n=d.autorefresh)||void 0===n?void 0:n.seconds,"s"]})]})]}),Object(b.jsxs)("div",{className:"bg-secondary p-2",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"dchan-input-refresh-toggle",children:"Enable autorefresh"}),Object(b.jsx)("input",{id:"dchan-input-refresh-toggle",className:"mx-1 text-xs whitespace-nowrap",type:"checkbox",checked:null===d||void 0===d||null===(a=d.autorefresh)||void 0===a?void 0:a.enabled,onChange:function(e){j(Object(xe.a)(Object(xe.a)({},d),{},{autorefresh:Object(xe.a)(Object(xe.a)({},null===d||void 0===d?void 0:d.autorefresh),{},{enabled:e.target.checked})}))}})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"dchan-input-autorefresh-interval",children:"Autorefresh interval (seconds)"}),Object(b.jsx)("input",{id:"dchan-input-autorefresh-interval",className:"mx-1 text-xs whitespace-nowrap",type:"number",min:"10",value:null===d||void 0===d||null===(r=d.autorefresh)||void 0===r?void 0:r.seconds,onChange:function(e){j(Object(xe.a)(Object(xe.a)({},d),{},{autorefresh:Object(xe.a)(Object(xe.a)({},null===d||void 0===d?void 0:d.autorefresh),{},{seconds:e.target.value})}))}})]})]})]})})})}var Ft,Lt,_t=Object(C.a)(Dt||(Dt=Object(N.a)(["\n  query BlockByDate($timestampMin: String!, $timestampMax: String!) {\n    blocks(first: 1, orderBy: timestamp, orderDirection: asc,\n            where: {timestamp_gte: $timestampMin, timestamp_lte: $timestampMax}) {\n        timestamp\n        number\n    }\n}\n"]))),Ht=Object(C.a)(Ft||(Ft=Object(N.a)(["\n  query BlockByNumber($number: BigInt!) {\n    blocks(first: 1, orderBy: timestamp, orderDirection: desc,\n            where: {number_lte: $number}) {\n        timestamp\n        number\n    }\n}\n"]))),Mt=n(792),zt=n(795),qt=new Mt.a({uri:P.subgraph.endpoint,cache:new zt.a});function Wt(e){var t=e.startBlock,n=e.dateTime,a=e.block,r=e.startRangeLabel,s=e.baseUrl,i=g.DateTime.now(),l=Object(d.f)(),j=tt().lastBlock,u=Object(c.useState)(),h=Object(o.a)(u,2),x=h[0],p=h[1],m=Object(c.useState)(),O=Object(o.a)(m,2),v=O[0],f=O[1],A=Object(c.useState)(n),w=Object(o.a)(A,2),k=w[0],N=w[1],C=Object(c.useState)(a?"".concat(a):null===j||void 0===j?void 0:j.number),B=Object(o.a)(C,2),I=B[0],S=B[1],E=Object(c.useCallback)((function(e){f(e),N(g.DateTime.fromSeconds(parseInt(e.timestamp)))}),[f,N]),T=Object(c.useCallback)((function(e){(function(e){return qt.query({query:_t,variables:{timestampMin:"".concat(null===e||void 0===e?void 0:e.toSeconds().toFixed(0)),timestampMax:"".concat((((null===e||void 0===e?void 0:e.toSeconds())||0)+1e6).toFixed(0))}})})(e).then((function(e){var t,n,c=null===(t=e.data)||void 0===t||null===(n=t.blocks)||void 0===n?void 0:n[0];if(null!=c){var a=s?"".concat(s,"?block=").concat(c.number):void 0;a&&l.replace(a),S("".concat(c.number)),E(c)}}))}),[E,S,l,s]),D=Object(c.useCallback)((function(e){var t=s?e?"".concat(s,"?block=").concat(e):"".concat(s):void 0;t&&l.replace(t),e&&function(e){return qt.query({query:Ht,variables:{number:e}})}(e).then((function(e){var t,n,c=null===(t=e.data)||void 0===t||null===(n=t.blocks)||void 0===n?void 0:n[0];null!=c&&E(c)}))}),[E,s,l]);Object(c.useEffect)((function(){v||(null!=k?T(k):null!=I?D(I):null!=j&&(S(j.number),D(j.number)))}),[v,T,D,k,I,j]),Object(c.useEffect)((function(){t&&j&&p({min:t,max:j})}),[t,j,p]);var Q=Object(c.useCallback)((function(e){T(g.DateTime.fromISO(e))}),[T]),P=Object(c.useMemo)((function(){return X.a.debounce(D,300)}),[D]),F=Object(c.useCallback)((function(e){S(e),P(e)}),[S,P]),L=Object(c.useCallback)((function(){S(null===j||void 0===j?void 0:j.number),D("")}),[S,j,D]),_=Object(c.useCallback)((function(){if(null!=x){var e=prompt("Block number: (range: ".concat(x.min.number,"-").concat(x.max.number,")"),I);if(null!==e){var t=parseInt(e||"");isNaN(t)||t<parseInt(x.min.number)||t>parseInt(x.max.number)?alert("Invalid block number: ".concat(e)):(S(e),D(e))}}}),[x,I,S,D]),H=!(!a||!j||"".concat(a)===(null===j||void 0===j?void 0:j.number));return x?Object(b.jsxs)("span",{className:"bg-primary",children:[Object(b.jsxs)("details",{className:"mx-1 sm:text-right",open:H,children:[Object(b.jsxs)("summary",{children:[Object(b.jsx)("span",{className:"mx-1 text-xs",children:H?Object(b.jsx)("abbr",{title:"You're currently viewing a past version of the board. The content is displayed as it was shown to users at the specified date.",children:"Time traveled to"}):""}),Object(b.jsxs)("span",{className:"mx-1 text-xs text-left",children:["[",Object(b.jsx)("input",{required:!0,type:"date",id:"dchan-timetravel-date-input",value:(H&&k?k:i).toISODate(),onChange:function(e){return Q(e.target.value)},min:y(x.min.timestamp).toISODate(),max:y(x.max.timestamp).toISODate()}),","," ",Object(b.jsx)("span",{className:"inline-block min-w-3rem",children:(H&&k?k:i).toLocaleString(g.DateTime.TIME_SIMPLE)}),"]"]})]}),Object(b.jsxs)("div",{className:"text-xs bg-primary",children:[Object(b.jsxs)("div",{className:"grid grid-cols-4 center text-center",children:[Object(b.jsx)("span",{className:"mx-1",children:r}),Object(b.jsx)("input",{className:"col-span-2",id:"timetravel",type:"range",min:parseInt(x.min.number),max:parseInt(x.max.number),onChange:function(e){return F(e.target.value)},value:I})," ",Object(b.jsx)("span",{className:"mx-1",children:"Now"})]}),Object(b.jsxs)("div",{className:"grid grid-cols-4 center text-center",children:[Object(b.jsxs)("span",{className:"mx-1",children:[Object(b.jsx)("div",{children:y(x.min.timestamp).toLocaleString(g.DateTime.DATETIME_SHORT)}),Object(b.jsxs)("div",{children:["#",x.min.number]})]}),Object(b.jsx)("span",{className:"col-span-2"}),Object(b.jsxs)("span",{className:"mx-1",children:[Object(b.jsx)("div",{children:y(x.max.timestamp).toLocaleString(g.DateTime.DATETIME_SHORT)}),Object(b.jsxs)("div",{children:["#",x.max.number]})]})]})]})]}),Object(b.jsxs)("span",{className:"grid center text-xs",children:[Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",onClick:_,children:"Block #".concat(I||"?")}),H?Object(b.jsxs)("div",{className:"text-xs",children:["[",Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",onClick:L,children:"Return to present"}),"]"]}):""]})]}):Object(b.jsx)("span",{})}function Rt(){var e,t,n,c,a=lt(),r=Object(o.a)(a,2),s=r[0],i=r[1];return Object(b.jsx)("span",{className:"flex flex-wrap text-xs justify-end",children:Object(b.jsxs)("details",{children:[Object(b.jsx)("summary",{children:Object(b.jsxs)("span",{className:"inline-block",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"px-2",htmlFor:"dchan-input-view-mode",children:"Sort by"}),Object(b.jsxs)("select",{id:"dchan-input-view-mode",onChange:function(e){i(Object(xe.a)(Object(xe.a)({},s),{},{content_view:Object(xe.a)(Object(xe.a)({},null===s||void 0===s?void 0:s.content_view),{},{board_sort_threads_by:e.target.value})}))},value:null===s||void 0===s||null===(e=s.content_view)||void 0===e?void 0:e.board_sort_threads_by,children:[Object(b.jsx)("option",{value:"lastBumpedAt",children:"Last bumped at"}),Object(b.jsx)("option",{value:"replyCount",children:"Reply count"}),Object(b.jsx)("option",{value:"imageCount",children:"File count"})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"px-2",htmlFor:"dchan-input-view-mode",children:"Sort direction"}),Object(b.jsxs)("select",{id:"dchan-input-view-mode",onChange:function(e){i(Object(xe.a)(Object(xe.a)({},s),{},{content_view:Object(xe.a)(Object(xe.a)({},null===s||void 0===s?void 0:s.content_view),{},{board_sort_direction:e.target.value})}))},value:null===s||void 0===s||null===(t=s.content_view)||void 0===t?void 0:t.board_sort_direction,children:[Object(b.jsx)("option",{value:"asc",children:"Ascending"}),Object(b.jsx)("option",{value:"desc",children:"Descending"})]})]})]})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"px-2",htmlFor:"dchan-input-view-mode",children:"Page size"}),Object(b.jsx)("input",{id:"dchan-input-page-size",type:"number",min:1,value:null===s||void 0===s||null===(n=s.content_view)||void 0===n?void 0:n.page_size,onChange:function(e){i(Object(xe.a)(Object(xe.a)({},s),{},{content_view:Object(xe.a)(Object(xe.a)({},null===s||void 0===s?void 0:s.content_view),{},{page_size:e.target.value})}))}})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"px-2",htmlFor:"dchan-input-view-mode",children:"Default board view mode"}),Object(b.jsxs)("select",{id:"dchan-input-view-mode",onChange:function(e){i(Object(xe.a)(Object(xe.a)({},s),{},{content_view:Object(xe.a)(Object(xe.a)({},null===s||void 0===s?void 0:s.content_view),{},{board_default_view_mode:e.target.value})}))},value:null===s||void 0===s||null===(c=s.content_view)||void 0===c?void 0:c.board_default_view_mode,children:[Object(b.jsx)("option",{value:"catalog",children:"Catalog"}),Object(b.jsx)("option",{value:"index",children:"Index"})]})]})]})})}function Yt(){var e,t,n,c=lt(),a=Object(o.a)(c,2),r=a[0],s=a[1];return Object(b.jsxs)("details",{children:[Object(b.jsx)("summary",{children:"Filter settings"}),Object(b.jsxs)("div",{className:"bg-secondary p-2 max-w-sm center grid",children:[Object(b.jsxs)("div",{className:"text-contrast text-xs text-center",children:["\u26a0 By disabling/changing filters, it's possible you may view/download highly disturbing content, or content which may be illegal in your jurisdiction.",Object(b.jsx)("div",{children:"Do so at your own risk."})]}),Object(b.jsxs)("div",{className:"py-2",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{id:"dchan-input-show-below-threshold",className:"mx-1 text-xs whitespace-nowrap opacity-50 hover:opacity-100",type:"checkbox",checked:null===r||void 0===r||null===(e=r.content_filter)||void 0===e?void 0:e.show_below_threshold,onChange:function(e){s(Object(xe.a)(Object(xe.a)({},r),{},{content_filter:Object(xe.a)(Object(xe.a)({},null===r||void 0===r?void 0:r.content_filter),{},{show_below_threshold:e.target.checked})}))}}),Object(b.jsx)("label",{htmlFor:"dchan-input-show-below-threshold",children:"Show hidden content"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"dchan-input-score-threshold",children:"Score hide threshold"}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{id:"dchan-input-score-threshold",className:"mx-1 text-xs whitespace-nowrap opacity-50 hover:opacity-100",type:"range",min:0,max:1,step:.1,value:null===r||void 0===r||null===(t=r.content_filter)||void 0===t?void 0:t.score_threshold,onChange:function(e){return s(Object(xe.a)(Object(xe.a)({},r),{},{content_filter:Object(xe.a)(Object(xe.a)({},null===r||void 0===r?void 0:r.content_filter),{},{score_threshold:e.target.value})}))}})}),Object(b.jsx)("div",{className:"text-sm",children:{0:"Show everything",.1:"Hide heavily reported content",.2:"Hide heavily reported content",.3:"Hide heavily reported content",.4:"Hide reported content",.5:"Hide reported content",.6:"Hide reported content",.7:"Hide slighly reported content",.8:"Hide slighly reported content",.9:"Hide slighly reported content",1:"Only show content with no reports"}[(null===r||void 0===r||null===(n=r.content_filter)||void 0===n?void 0:n.score_threshold)||"1"]})]})]}),Object(b.jsx)("div",{className:"text-xs text-left",children:"\u2139 Content score is based on quantity of user reports. Experimental feature, may be abusable."})]})]})}var Ut=Object(C.a)(Lt||(Lt=Object(N.a)(["\n  ","\n\n  query Threads($ids: [String!]!) {\n    threads(orderBy: lastBumpedAt, orderDirection: desc, where: {id_in: $ids}) {\n      ...Thread\n    }\n  }\n"])),it),Jt=n(63),Vt=Object(le.a)({},(function(){var e=lt(),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useMemo)((function(){return(null===n||void 0===n?void 0:n.favorites)||{}}),[n]),s=Object(c.useCallback)((function(e){a(Object(xe.a)(Object(xe.a)({},n),{},{favorites:Object(Z.omit)((null===n||void 0===n?void 0:n.favorites)||{},e.id)}))}),[n,a]),i=Object(c.useCallback)((function(e){a(Object(xe.a)(Object(xe.a)({},n),{},{favorites:Object(xe.a)(Object(xe.a)({},null===n||void 0===n?void 0:n.favorites),{},Object(Jt.a)({},e.id,!0))}))}),[n,a]);return{isFavorite:Object(c.useCallback)((function(e){return!!r[e.id]}),[r]),removeFavorite:s,addFavorite:i,favorites:r}}));function Zt(){var e=Vt(),t=e.favorites,n=e.removeFavorite,a=Object(c.useState)(!1),r=Object(o.a)(a,2),s=r[0],i=r[1],d=Object(c.useCallback)((function(){return i(!0)}),[i]),j=Object(c.useMemo)((function(){return t?Object.keys(t):[]}),[t]),u=Object(A.a)(Ut,{pollInterval:3e4,variables:{ids:j},skip:!t}),h=u.data,x=u.loading,p=u.refetch,m=null===h||void 0===h?void 0:h.threads,O=Object(c.useCallback)((function(){return p({ids:j})}),[p,j]),v=Object(bt.a)(O,1,!0),f=n||function(){};return t?Object(b.jsxs)("details",{open:s,children:[Object(b.jsx)("summary",{children:Object(b.jsx)("label",{htmlFor:"dchan-favorites",onClick:d,children:"\u2b50"})}),Object(b.jsx)("div",{className:"mx-1 text-center bg-primary",children:x?"Loading...":j.length>0&&m?Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"mb-2",children:"Favorite threads:"}),Object(b.jsx)("div",{className:"text-sm",children:m.map((function(e){var t=e.board;return Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){return f(e)},children:"\u2716"})," ",t?Object(b.jsxs)("span",{children:["/",Object(b.jsx)(te,{board:t}),"/"]}):"",Object(b.jsxs)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"".concat(V.thread(e)),children:[" ","- (",e.replyCount,") -"," ",Object(Z.truncate)(e.subject||e.op.comment,{length:32})," ",e.isLocked?"\ud83d\udd12":""," ",e.isPinned?"\ud83d\udccc":""]})]})}))}),Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"text-xs",children:["[",Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",onClick:v,children:"Refresh"}),"]"]})})]}):"No favorites. Use the \u2b50 button on threads to keep track of them here."})]}):Object(b.jsx)("span",{})}function Xt(e){var t=e.board,n=e.thread,a=e.search,r=e.baseUrl,s=e.block,i=e.dateTime,d=e.summary,j=e.onRefresh,u=tt().lastBlock,h=Object(bt.a)(j,1,!0),x=Object(c.useState)(),p=Object(o.a)(x,2),m=p[0],O=p[1];Object(c.useEffect)((function(){O(n?n.createdAtBlock:t?t.createdAtBlock:void 0)}),[n,t,O]);var v={};s&&(v.block="".concat(s)),null!=i&&(v.date=i.toISODate());var f=v?"?".concat(Object.entries(v).map((function(e){return e[0]+"="+e[1]})).join("&")):"";return Object(b.jsxs)("div",{children:[Object(b.jsx)(pt,{board:t}),Object(b.jsx)(Tt,{baseUrl:r,thread:n,board:t}),Object(b.jsx)("div",{className:"p-2",children:Object(b.jsx)("hr",{})}),Object(b.jsx)("div",{className:"fixed z-20 top-0 right-4 opacity-50 hover:opacity-100 flex flex-wrap text-right",children:Object(b.jsxs)("details",{open:!0,children:[Object(b.jsx)("summary",{}),Object(b.jsxs)("div",{className:"bg-primary",children:[Object(b.jsx)(Wt,{baseUrl:r||"",startBlock:m,dateTime:i,block:s,startRangeLabel:n?"Thread creation":t?"Board creation":"?"}),Object(b.jsx)(Je,{baseUrl:V.posts(),search:a}),Object(b.jsx)(Zt,{})]})]})}),Object(b.jsxs)("div",{className:"text-center sm:text-left grid md:grid-cols-3",children:[Object(b.jsxs)("div",{className:"mx-2 flex flex-wrap sm:flex-nowrap justify-center md:justify-start items-center",children:[Object(b.jsxs)("span",{className:"whitespace-nowrap sm:flex",children:[t?Object(b.jsxs)("span",{children:[Object(b.jsxs)("span",{children:["[",Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"".concat(V.board(t),"/index").concat(f),children:"Index"}),"]"]}),Object(b.jsxs)("span",{children:["[",Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"".concat(V.board(t),"/catalog").concat(f),children:"Catalog"}),"]"]})]}):"",Object(b.jsx)(ut,{to:"#bottom",label:"Bottom"})]}),!s||u&&"".concat(u.number)==="".concat(s)?Object(b.jsx)(Pt,{onRefresh:h}):""]}),Object(b.jsx)("div",{className:"center grid",children:Object(b.jsxs)("details",{children:[Object(b.jsx)("summary",{className:"py-2 text-xs text-gray-600",children:d}),Object(b.jsx)("div",{children:Object(b.jsx)(Yt,{})})]})}),Object(b.jsx)("div",{className:"flex justify-end",children:n?"":Object(b.jsx)(Rt,{})})]}),Object(b.jsx)("div",{className:"p-2",children:Object(b.jsx)("hr",{})})]})}var Gt=n.p+"static/media/spoiler.6b76e9d2.png",Kt=n.p+"static/media/ipfs.c10ee176.png",$t=n.p+"static/media/ipfs_error.1c48d4ab.png";function en(e){var t=e.hash,n=e.style,a=e.htmlLoading,r=void 0===a?"lazy":a,s=e.className,i=void 0===s?"":s,l=e.isSpoiler,d=void 0!==l&&l,j=e.isNsfw,u=void 0!==j&&j,h=e.expandable,x=void 0!==h&&h,p=e.thumbnail,m=void 0!==p&&p,O="https://ipfs.io/ipfs/".concat(t),v=Object(c.useState)(!1),f=Object(o.a)(v,2),A=f[0],g=f[1],y=Object(c.useState)(!0),w=Object(o.a)(y,2),k=w[0],N=w[1],C=Object(c.useState)(O),B=Object(o.a)(C,2),I=B[0],S=B[1],E=Object(c.useState)(!1),T=Object(o.a)(E,2),D=T[0],Q=T[1],P=Object(c.useState)(!1),F=Object(o.a)(P,2),L=F[0],_=F[1],H=Object(c.useState)(!m),M=Object(o.a)(H,2),z=M[0],q=M[1],W=m?"max-w-8rem max-h-32":"",R=(!u||L)&&(!d||D),Y=Object(c.useCallback)((function(){N(!0),S("".concat(O,"?t=").concat((new Date).getTime())),g(void 0)}),[O,N,S,g]);return Object(b.jsxs)("span",{children:[Object(b.jsx)("img",{className:"".concat(i," ").concat(!z||A?W:""," animation-fade-in"),style:k?Object(xe.a)(Object(xe.a)({},n),{},{visibility:"hidden",position:"absolute"}):A||!R?{display:"none"}:n,src:I,onLoad:function(){return N(!1)},loading:r,onClick:function(){x&&q(!z)},onError:function(e){N(!1),g(e)},alt:""}),Object(b.jsx)("div",{className:"".concat(i," relative"),children:Object(b.jsx)("span",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"opacity-50",children:k?Object(b.jsxs)("div",{className:"relative center grid",children:[Object(b.jsx)("img",{className:"h-150px w-150px animation-download",style:n,src:Kt,onClick:Y,alt:""}),Object(b.jsx)("div",{className:"p-2",children:"Loading..."})]}):A?Object(b.jsxs)("div",{className:"relative center grid",children:[Object(b.jsx)("img",{className:"h-150px w-150px animation-fade-in",style:n,src:$t,onClick:Y,alt:""}),Object(b.jsx)("div",{className:"p-2",children:"IPFS image load error"})]}):""}),Object(b.jsxs)("div",{children:[k||A||D||!d?"":Object(b.jsx)("img",{className:W,src:Gt,alt:"SPOILER",onClick:function(){return Q(!0)}}),k||A||!D&&d||L||!u?"":Object(b.jsx)("img",{className:W,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAFACAYAAADNkKWqAAALvHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7Zlbdtw6DkX/OYoeAkESfAyHz7V6Bj383pDkJPZ1chPbn3Etl8oqCQSBg4MD2e3//fe4//CTUs4uaam55ez5SS210PlQ/f3Tr3fx6Xq/ftLLJ3l93n37InCMHOP9Rc2Psc35wEXhOT/vo3TO6w+G2n6+GK+/6I+hUJ8FnvMvC0W5F/DrMdQfQzE8K6f77/GsnFstP27huc+2L8/x+nX2lmIJWbOUxHsKvpTc+FyDT4W4LXP0zNDsPh23nbd/u5dLAz6FHSX6673eXkb7ldg5Vt45z3VyfbYfO5Ov+HpHynABz9sT22erFs1XsXk5/uTH/c62Hji8Srd/AwP3jy/ewCDv53x8k7387Xidd2+/EH0/3VdOf/CopG8Lh1ceneLPq03X77/nrHrOvnfXU2bL+dnUy07EXUbOGgaC67bMq/CrfC7Xq/GqlMsEY8tPP3hNaRJI8ZEkS7ocJ/v6MGXiYwo7FI4hTLJu5yq5aGFGS3qyl5xQYosLCIQ4gUrkbDjHPb7ItW671ptSWXkJlwbBmHDLv77c71z0q9c5Vksi7qkZuRMcrAxxwzJn71xm9HCeoOoV4JfXa0A+iY2kUK8wVzbY/bhNDJXv2IpXoiPXKce7uKWs+34zlFhbcUYiKfBZokoWX0IoIgSykqAuvoaYwiADohoWToYUYyY3FAFLO+4pcl0bNNznYUkyoTHHQm5a7CQrJQU/JVUw1DVqUtWsRas27Tnm5KiwnEs2uu0lllS05FJKLa30GmuqWnMttdZWewstwsbaKMdWW2u9s2bHcs+uc33nzAgjjjR05FFGHW30CXxmmjrzLLPONvsKKy7qeOVVVl1t9S0bKO201e28y6677X7A2oknHT35lFNPO/1b1p6s/uP1B1mTJ2vhypRdV75ljbOl3Ed34QUjljMyFpKQ8WIZANDBcuarpBQsc5Yz3wJVoQEn1XKzxHfJIbmYtgQ98i133zP3R3lzOf0yb+F3M+csdZ/M3JU3t/WHvL2TtWVte14Zu6vQYuoj1cf3u/ZQu3XR7l4+fPb419BfQx+5caUDKGvKQ7d9ct2H3PU6SWEDaKV1+LryWOdAFivBKLQXu8/YJZe455yjh6HxbJG+ygDizrfeCn09JBAvqaDEonZKhO5gbEHbSi1ytvqfGjEb7iuMmA33FUbMhvsKI2bDfYURs+G+wojZcF9hxGy4rzBiNtxXGDEb7iuMmA33FUbMhvsKI2bDfYURs+E+b+T0vG8+Wv4w/vWLbPwPx4Ya15BW8HWHRBuPS6z/tz7iWU2Lkc+Jmz5/ljvMiBI2EmLTgBO2kQahT1V0SDL5UXDZrGMAtTlTnXsXGj4dvDNMaR519uD6MrtZOXCcp00+lSm9t+Q7smYOfMG/rjWsnkfLaPyZTpCTVBorEpGZHAwo7QwLSWeObIpu0dXZUIzbpEVBVtSR4xm7hlRtubU1hJYF0dFGS2ilKfARJLx9U50nJpTBjsayjIA4scvJqm99xWboV3x2mTvbp7EdU0c6Q2s5CLRGNLNGTszGUJJGblq7rL6qxsleupYV88lI7n3yiKFbqIICSEYnpAvuZeDUF3nSIZ2QNfQb+WVPa+Iqu6kT/ZUJlthaaCghXGXSL3Zcbi0GKYal1Ji80ylstaL5EaSHUMXIxmPrMe9MjJIJvv7KKXy6nHKatkcN0pUi0n812hHJSLO/A6x3jzg3I/MaIQsyRjkdJKuuvVC/W64AN7/WOHcrJPKIOY+gJe6+cPtmxkqx5QMMW3Q1ZAqCXWIGJ0mEtoagfwwxMZJxrOwEZDdTWMqyY5PCVONXidHvlksC2YyYMmzCZBCdhL8XWaESEPNLdC5kbwJNPe1Z1Jcu/cS5wp7jDGYf6ofCrI60DhGwNph7cVXZcEWephqVhTYCf4NUiXskBDzNmxEb1LGcmVKTwWWUSolkYSxD4V+CX3WjfZHF0lDFQfGHgt6+skgfAwd3L1sqtaql7QWE+pxUh0tIYwAoPRVO1hUNwBcQ25gQRipWKQxBTXSVyeTduSKUirggbg1iWQWwuVm1hAHwDvhSpkSJCHeJs8mqhzCsgpcS7uBn0ya6rooLuA8DJZszVZ1N+HXqWni9CoxCzE+IDAYkaRbSLmeQybveLIuQnNckME238PRMOSWmI0AaorRY99E5jRHDMZI0f69y3MxDdbB0qCvVBY8N0DSQWFAXAFCpkJfN/SMfDX7j4zl79DVGrWduApXD2aeLnjm1gAwhfjmvzIc2qZpFrQtIZSJyQHEbH0Fk3fLp4yT3FCOUgJTDaciVkltQCz5Dozo7IMvkfCYplYC1zOA3fdnk4CzcXRB08UMS1JITvDJEbX4JrMjswwC3OmVL+gD2tCcd8KMvjFoZQ/BulFGBIdAnQn2cCvRstQirM5SxP3w6yMoMQ1eIY1EzOc4M2AP4YcfqWJAQM2zVWYvMAScf9kqVgK+ZLyYcEhkDr7wJgDZannWJwWjnFEDyaSa0RtW+WwEDRXATAphCS8MjKmB6IwWWBJpdW1Eg3X07ZaVbLPc45m/r7IXfN3NThutQJYe2Vpg89YV03Husk3rNhaGY64XBlqooFWFOthlNGX9P42IgW4bRODVN+RBskkcTgWL2zGPOKnTWYHVq1Ep7ZRrHf/VDF9CEAVPK0U8m29Ih3co9pBpDZ0ErO+fedjVLEG8DkAQieBzbS3ebRkNsYUIze9DM98Zk6AzgraTD6E2DbNYQ8A/zZyptwPcha/XS7CnL2v7Mqxuvwi7C3EbNmxbChWs0f2Rvb+kfdUHgm7SHuXyeOa7lN50JmdDS9SSpRWvB+JJ4FeBJHaIwAKg/SnLJ6HLwAiHOA7DhRm6FXqwsSUvZIKGR33KxyMMh3l8sAoeAyBR7TYXqLdM1e8ybM/y5PK1aFpCBJyj/WWlQZAcywUon6EXgzBpKWZ0CHrFooV7aBB7JzTXwDtYj2tVIhFxkjgc4Xp0+HbFndiQzk/JzIkHPlaxnimfSdPtJa3YHv1uJzYAMa9WeptNVvbHDSVypcCWiqI8lKxGSCyF7DHobgLNHGJBknB0a8abwFvKhdTRgoeFuuI/eQJghA5hKkIghb8TfpdF0Dx8VFqalkaJGvYc1nHUEeIQy9ew46gb5XSdhQKiNSt6AbAnC2uiAVLfOQf+E3FBG6I579izdCdU/dvdkh9640FSoEXoe4EOOnG74TVf55Ap70OgMBZNOzzf2LAooC3TtVgDh3QQYDYkyoMkCVeIghZI4e8HyduNOqCd2QRsDvBkDmwLYdK1Jz2qKYF+q0E1INJWSbo3R0HWmSdT+vfHrI7GEfcJyLDCQOoBgWZ0bAxoG1BoJGLCR25dZ+6Ta0V5zW32TtRZoyzQTevFCj1VnEhfyiIPssgJtxmQ0fZ9khmDD+i6j3o0pQfmQLk6cQElLyYRpedpG3Q7eqkQRxqBBsde56AT06k7tE26EIEVnur3tAHP0REYbidy7d685mVike3UHrqkM+A6liCYXAOvHrPtS5Y3iDNnqd/eBfoxCQk2hgBDqX5AWEc2DM8tllMMEKLPlCsraylSClV+1AqTjUE6D3n5lgX7P1aLIVt5LngePx0B7dGgElsjGQBPiQ0ExP6AMkeEEKrcwjBxPBV4B5qQaqMFtwR+XZRYong7FCDHxQxfNOU/7l9lEEa5Er6uUcVvoK9MB0du/COaEBKwlDQu7pb/CihTYHM0NY6y7W1D/P0MLwujqa+Rqj4sv0Yv38xc6xk5XF7GZwB6z3vNaLPe8pty5ozEyMAZI6EWaGWtdMBv3BGfqwya4gaqFGOr9JIjmd2lZUrCfB0FS7EHQYnZiQCi/NHVN2V9hyplbX2HK3Tv8vCn3EqzPmnLf4/45U+7HFH7GlHuNho+bcm+B9VFT7p8Y/Zgp9x7cP2LKvV85f27K/awI/9SU+3k9/5kp9ytq+BNT7trhw1/J37O6/8DRffTGv4b+Gno5iv2bvnnv/g9fXgt/9MVFjgAAAYVpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfW6VFKop2EOmQobpoQVTEUapYBAulrdCqg8mlX9CkIUlxcRRcCw5+LFYdXJx1dXAVBMEPEDc3J0UXKfF/SaFFjAfH/Xh373H3DvA2KkwxuiYARTX1VDwmZHOrgv8VAQygH2GMiczQEunFDFzH1z08fL2L8iz3c3+OXjlvMMAjEM8xTTeJN4hnNk2N8z5xiJVEmficeFynCxI/cl1y+I1z0WYvzwzpmdQ8cYhYKHaw1MGspCvE08QRWVEp35t1WOa8xVmp1FjrnvyFwby6kuY6zTDiWEICSQiQUEMZFZiI0qqSYiBF+zEX/7DtT5JLIlcZjBwLqEKBaPvB/+B3t0ZhatJJCsaA7hfL+hgB/LtAs25Z38eW1TwBfM/Aldr2VxvA7Cfp9bYWOQL6toGL67Ym7QGXO8DQkybqoi35aHoLBeD9jL4pBwzeAj1rTm+tfZw+ABnqavkGODgERouUve7y7kBnb/+eafX3A6cIcrxiMvoOAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5QgSECEQzTNSswAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAABG2SURBVHja7d3pbxznYcfx3zO7y2OX5HK5OihKlEmddi3J8iE1sRMHbZw6aeskLxIEaBMEbVH0Tf+Nom/bFwHaV0VaoICTF0UTpUmato6S1orqI7Icu7Zo6uQpcnktucvd5czTFyPaOnjMzB7clb4fwIBkkdzlDOfLmWeemTGSrADgEeSwCAAQQAAggABAAAGAAAIAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBAACCAAEEAAIIAAQQAAggABAAAGAAAIggABAAAGAAAIAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBAACCAAEEAAIIAAQQAAggABAAAGAAAIAAQQAAgiAAAIAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBAACCAAEEAAIIAAQQAAggABAAAGAAAIAAQQAAggABBAAAWQRACCAAEAAAYAAAgABBAACCAAEEAAIIAAQQAAggABAAAGAAAIAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBEAAAYAAAgABBIBHQLz4Vz9kKQB4NAOYcOIsBQAcAgMAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAaAhuBsqfFaSZyVrP/m7ufNvxvh/dgzLCQTwoZVKyAz2huvG+KKUL1f3uj3tMgM9wT9+zZP9KFfda3pWSrfLDPVJ/d0ymS4p1S7T2S7FHD921kquJ1tek1bL0kpJdqko5VZkb+el8fy9odz0OMPIHM36IW1Ey2eWpVxRspI5vitSuO18QZpeCf4Je1MymWT4N+t6siMB12WmU2ZvV7jvY3FVmsyzbRPA7ZnBXjlffTbcD9jUvLzv/u8ne05RXvdwVs7Lp4J/QrEs92/+a/vwbKQtJnN2UObYPpldPYHiYDb6s7VSxZWdWZQdn5O9PCnNFjb+AomYnK8827A9SO9XV2R/flWyVuZzx2Wy3eEDODol7/uXAn+884XfkjmQjfR+3b/9D6m4tv16ODMo55lD4ZcFASSAdYtmf0bmpSOy/z4SLUjrh5v1lojJvDgs56khqa0Gq90YqS0usz8rsz/rHz2/NrrNN9ngQ2jHSJMLUoQAqrsz1OuYvb3RF+Vwn+z7t7f/uN5UhJDPspFutepYBDVYiE8fkjmWbd43ONSr2J+/IOfMkdrEr4XYW3PRotTV6Q8FBDGckRKx6G9yfzrgUElnuK+7WpamVthACWD99zScL56SutqabOuXzDMDin39rNSTfCRXTeQ9oGSb1BZs8zCHd1W3M723d/ujACuZkOvQzixJpTW2TwLYAKl2Oa+cbPhR3pYb1jMDcr5wMviezMNouSItFqJ97q4Ah5yeldnfV9162t2z/RhyT3vovXc7NseZewLYwOA8tlvmM0PN8WYGuuV8/kTDzrw29V7g5HzEMAU445pM+CeTqtEWlwa2Hqc0/V3hv++rOTZKAtjgBfqpY9Jgeuffx5dOSHFWr78nFC2Aym5/yGkO9VW/h22MzIF09Xujd1utSBNLrHwC2GAxR7FXTkvtO3eywZzsl9mdZl2sBzDiOKBJbx8dM7yrNutsILP1v2fCBdDeXpQqHiufAO6Ank45rzzZmOktD/zkW5mnBqv7Gp6VVkrSUkHKF6Vi2f9/rWqxJOVXI63HLbk28ty/B+zpkdxNlrGVFHIKjB3LMf4XAPMA67UXdmSfzNmc7BtjjX3hZFv0OWmlirw3R/1JzfmytOb5G1HCkToT0t4umaGszGDW38Ns1u3LPBh0e3tRprsj3Jfp6dx6+mK2M/zUlK32NrsSG0+I9qxMb4gzwFay1+bYCAngDu9ev/iE3JsL0vRy4150byranDTPk/u9N6Txu8aN1vcgKp5UKUlLJdmRnKyRlE3KPDco54kDUnuiLt+K++rFaONYaw8e+tnxOZnDe8N9nY42qSMmldyNozWUqd0Z9kRM6u+Wrm0wXhl3pFSIeJcr0s3F5v0FxSHwIyIRk/Plpxp6MsLs6or0eXZmSbq1GHgPQ7MF2Z98KPc7P5d3cUQqVmr/zVRcPz5h/9vgUDLyGdHNrr21khneXdt1t9l16LuToQ5n7dQC2x4BbJKjsWy3nC8+0bgX7Iy4NxaPeCVD2ZV9bVT2wo3mXhGzBX8sM/QvlNSmW47Zl6ntz0p/74bzAU02GWo6kx3LsfdHAJsogicGZU7ubdCLRfy0vi7p8Sr2aJp9vmHZlZ2NcDjdt0kA+5LBrhfOFwPfKMPs3uTmFCGnwFR9pyACiJov6JdOSJmO+r9Q1ENRYxR75bTMbw8+pCvAyI6HPzFg0huffDBHsoF+2dhcXnIDTkdJdfhXfNz/WpkQwxqrZW5/RQCbUHtCzleeqvvUBDtTxQmXRFzO7zyp2F98VubpgYfuKhJ7PcKZ0XRywylA5rFg8/9sLu+PZQaMtLn/xgielUKcAbaTjP8RwGY9FO7PyHz+aH1fZHpZqlR5AXwmJeflU4r95edkfvdw893kIaqJvFQOt2xMT/LBQ9iY8cfrgpgKeUOCwfvGFe3me6EbBnCcw98wmAZTDc+G3qNznh6Wez0njdTpB7VQkZ1ckDlYgysUUh1yzh6Vnj0sOzIp78JV//ZKDdoxNF3tsn0h59ktljY/5Fxdk83lw528aItL3e1S4a6hhd0pKdkeoEZWdjIvu1wMPI/P7E3fO3++u01qC35iy17h/n8EsFGHVPP+3pbpD7FBOUaxL52SO/k/0nK5DtUwsm/fqE0AP97jcWQe36/YsQE/hK9dkRZW6758w96dW5Lcf77gz4HbZNnbyflwATRG2pW852uaYwFPFq1WpNsr0mxeCnjFiOnr9qdNrc9l7O0IPq9zpSTlCmyYHAI3aA+lLS7vp+8FH+Rel2yX8+VTdXtf9oOZSAP+QeJtjg8o9mefkXlxuDWnWtwIuVyMZO47Exz08jc74d+Oyt4IsbffkZDu2us12RCHv9MLm19OBwJYczFHmliW99Zo+Hge3HXXrbNq/0Pr/du7UqlSn+87EZfz/HE53zrrH6K10l779fnwv7DujpAxMvuCjf+th8+OLUprbvCfjaG77i8YYmK7HePyNwLY0KXnLz57/mqk2ffOp45J+7rqc6OBXFHeuUsbXhZWsz3ggT7Fvv28tCfVOuusuCY7F+5MuUmnPvkdNdwrJYKNHNmRGf8PCyVpqRj89dYDa8PdBcZ+xPgfAWzo0rtzDOhaeecuhz7DqLgj5/dPht8jCbpBjOTk/etb9dsTlKSuDsW+cUZKt7fOOgv7yyrd+fEvqcC3v18qSHN3xkljRnYixD0J99y5waq1/jScIFZWGf8jgA129zy52YK8194P/yV2p2WO76vfId9ITu4/XfDHh+ol1SHnq6dbZkzQ3gx3qGh6kv735lmZ/QHH/8bn71ke9mbwcUCT6fJPhMQd/+FMQV5verGue/sEEBv8pN73Q/j2hOyHE+G/zNH++r7P2YK8716U94v3I10PG+ywLSPz3IHWCOBoyClIiZh/hUZn3L9cLchrXL/3cNRemw8+1OEYmaFeKZnwT4oEinqOxx8QwJ0PonfuN9JCyEcRNuIH17Oyr9+U+3fn5b3+oX+Naq1/mJ471Bo34SxUwq2jeExKdwS//b21D47HLayGW+YHMn50g74e9/8jgE2h4sn94aXmPRwpubK/uCb3O+fl/cubslenazcGmU5KB3tbYjWFvWTM9HZIB4M9/c3m8vdOnJZCjwOabJdMb8BJ4IWyNLXMtkcAm8R43t/LavYIfDgr79Vfy/378/5UnhqcLDFHd7XEKgr9wPRUe+DDX03Mbzizyd4Kcejdm5QC3sHaTs2zzUXElSD12sBevyE7mJUZ3tP0h+1aKsn+bETuhRty/uBEVe/Z9HXXbFaj95PLsrmQwwkB774d+gapqbbAU1Ls6MzG//+jnPR7AZdjT0o2FWb8j22OADYZ79y7iv3JC1JXR2NfuCMurUa4IcJyWd733pbzjWdkhiJGsDOx9XM0wvwSmV2Wxur0aMelkj8m1x3sMNP0poJdk1txZTe7s/binfmAQZ4jknCC3QaL8T8OgZvWSkXujy839olqnpXzR2f821lFqo7k/fdHgW/i+WApWmRXxLP+1JGg0slAjzawufzm13ibEA9pNybYITfjfwSwqY3OyXv7amOPajsScl4+JeebZ6T+CM8IWViNfnVexW2ZVRPmemnT3xso7ts9jjLw5WrGBHoUpp2c4/GXBLDJN7T/HAl3JUCtQnggq9i3X5DztdPSYPAHpZvBdPSNKr/aOhOir9b+lmTbPYS91perhZ3UDQK4A1ua5P3gHf/2SA2voJE50q/YH39azp9+Wuazw/6jM61/GPjxnt763w9l5Lz0ZPRvtZWeSJYrSoVS7b5eqSKNbXNYvViq6RxMrv+tDidBGmVhVd7PfiPnD0/v2DiZ2ZOW2ZOWnj8mFcuyCyv+PeRcT2qLy2S7/QH6qO/Ps7IjLbRBVlzZmSWZx2rzeEt7e8l/LOdWe88fP6S9Bg9UXy76EecImAC2xI7ge9OyQ7dkTh7c2TdijJRsl0nW9gYGdnKutTZIY2Qn5moXwFuzgYYO7NiczOHqL3+0EwvEj0Pg1uL99AMp9xA+tctaea+PttwGaa/P1+z7DzqmGPpa5M2+zk2e/0EAW82aJ/cHl1rqbGmgjfHKpNSKz6OdCPnQos2UKtKtgNNqcgV/6KHaZc74HwFsSdMr8s7/38MTv9kleT96rzXvRlJyZXPVT7a2E/PBv/81T3ZmsboXXCz4k7lBAFsyGm+OyY5Mtv73kcvLe/VNqdyie7SOqckUpVCHo8ZUfft6O7XQ2An2BBC15p17L9St0psufqPT8v7xopQvt/aKqMFcOntlJtzHX68ygDcY/yOAra60JvfcpZrfEt+W1+r7vhcL8n50Sd73f12b8bOdDvn1herWQf7OdJQwJvLR54VaK3uNANYC02B22o1FeRdH5Dx/vGaHdN4//ErmyT0yj++TGegLfFfhLVVc2al52XfHZN+dqseD7HbO+gPT96Qjfbodnwt/9vvOOKAZjHD7sKWiNL/KtkMAa7wnMFeQfee6bNAbAbhe9dM+jGR/eU2eY4KHqry29eu6nuzlKdl3Jv0L+Pf3yBzM+Bt4JimT7JDaYlIs9uC8NdfzH+FYqsguFWVnl6Rb8/4t3ZfL0S6Rcz15l66H+lwjI+UbNMjvGNk3rsnujxjAD6ajveZbN6TcsmzY3ya3l2t2x51HnVn76x8zkvrIFN4/fFLckdpj/rMuYsY/e7n+b2ueP0Vn1fX/zoX2YA8QD8evO/mx86xUXPP/2+5jgYcYJ0EAEEAAIIAAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBAACCAA7KF7x1lgKAB5JRg/X0x0AgENgACCAAEAAAYAAAgABBEAAAYAAAgABBAACCAAEEAAIIAAQQAAggABAAAGAAAIAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBAACCAAEEAABBAACCAAEEAAIIAAQQAAggABAAAGAAAIAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBAACCAAEEAAIIAACyCIAQAABgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBAACCAAEEAAIIAAQQAAggABAAAGAAAIAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIgAACAAEEAAIIAAQQAAggABBAACCAAEAAAYAAAgABBAACCAAEEAAIIAAQQAAggABAAAGAAAIAAQQAAggABBAACCAAEEAAIIAAQAABgAACAAEEAAIIAHf5f139IbamDHKDAAAAAElFTkSuQmCC",alt:"NSFW",onClick:function(){return _(!0)}})]})]})})})]})}var tn=n(220),nn=n(42),cn=tn.regexp.bind({});function an(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];return nn.or.apply(void 0,n)(e)}function rn(e){var t=[];if(0===e.length)return e;for(var n=e[0],c=1;c<e.length;c++){var a=e[c];"text"===n.type&&"text"===a.type?n.value+=a.value:(t.push(n),n=e[c])}return t.push(n),t}var sn=cn(/.[^[\n>hfQ]*/g).pipe(Object(nn.map)((function(e){return{type:"text",value:e[0]}}))),on=cn(/(Qm[1-9A-Za-z]{44})/).pipe(Object(nn.map)((function(e){return{type:"ipfs",hash:e[0]}}))),ln=Object(tn.string)("\n").pipe(Object(nn.mapConst)({type:"newline"})),dn=cn(/>>(0[xX][0-9a-fA-F]+)/).pipe(Object(nn.map)((function(e){return{type:"ref",id:e[1]}}))),bn=cn(/>>(0[xX][0-9a-fA-F]+)\/(\d+)/).pipe(Object(nn.map)((function(e){return{type:"postref",id:e[1],n:e[2]}}))),jn=an(cn(/>>(\/[a-zA-Z]+\/)(0[xX][0-9a-fA-F]+(?:\/\d+)?)?/).pipe(Object(nn.map)((function(e){return{type:"boardref",board:e[1],id:e[2]}}))),bn,dn),un=cn(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/i).pipe(Object(nn.map)((function(e){return{type:"link",value:e[0]}}))),hn=Object(nn.later)(),xn=hn.pipe(Object(nn.many)(),Object(nn.between)("[spoiler]","[/spoiler]"),Object(nn.map)((function(e){return{type:"spoiler",value:rn(e)}}))),pn=cn(/[^[][^[\n>hfQ]*/g).pipe(Object(nn.map)((function(e){return{type:"text",value:e[0]}})));hn.init(an(jn,xn,un,on,ln,pn));var mn=an(xn,un,on,sn),On=cn(/^>/m).pipe(Object(nn.qthen)(an(jn,mn).pipe(Object(nn.many)())),Object(nn.thenq)(cn(/$/m).pipe(Object(nn.backtrack)())),Object(nn.map)((function(e){return{type:"textquote",value:rn(e)}}))),vn=an(jn,On,ln,mn).pipe(Object(nn.many)(),Object(nn.map)(rn));function fn(e){var t=e.children,n=e.post,c=e.thread;return Object(b.jsxs)("span",{className:"text-quote",children:[">",t.map((function(e){return Nn(e,n,c)}))]})}function An(e){var t=e.link,n=e.children;return Object(b.jsxs)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:t,children:[">>",n]})}function gn(e){var t=e.post,n=e.thread,a=e.value,r=vt().publish,s="".concat(a.id,"/").concat(a.n),i=n&&[n.op].concat(Object(ve.a)(n.replies)).find((function(e){return"".concat(e.from.id,"/").concat(e.n)===s}));Object(c.useEffect)((function(){var e={from:t,to:{userId:a.id,n:a.n}};r("POST_BACKLINK",e)}),[t,a,r]);var o=Object(c.useCallback)((function(){null!=i&&r("POST_HIGHLIGHT",i.id)}),[r,i]),l=Object(c.useCallback)((function(){null!=i&&r("POST_DEHIGHLIGHT",i.id)}),[r,i]),d="".concat(t.thread?V.thread(t.thread):t.board?V.board(t.board):"","/"),j=je().accounts,u=n&&i&&n.op.id===i.id,h=j&&j[0]&&i&&j[0]===i.from.address;return Object(b.jsxs)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"#".concat(d).concat(s),onMouseEnter:o,onMouseLeave:l,children:[">>",s,u?" (OP)":"",h?" (You)":""]})}function yn(e){var t=e.children,n=e.post,c=e.thread;return Object(b.jsx)("span",{className:"dchan-post-spoiler",children:t.map((function(e){return Nn(e,n,c)}))})}function wn(e){var t=e.link;return Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:t,target:"_blank",rel:"noreferrer",children:t})}function kn(e){var t=e.hash;return Object(b.jsxs)("details",{className:"inline",children:[Object(b.jsx)("summary",{children:Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"//ipfs.io/ipfs/".concat(t),target:"_blank",rel:"noreferrer",children:t})}),Object(b.jsx)("img",{src:"//ipfs.io/ipfs/".concat(t),alt:""})]})}function Nn(e,t,n){switch(e.type){case"text":return e.value;case"link":return Object(b.jsx)(wn,{link:e.value});case"ipfs":return Object(b.jsx)(kn,{hash:e.hash});case"newline":return Object(b.jsx)("br",{});case"textquote":return Object(b.jsx)(fn,{post:t,thread:n,children:e.value});case"ref":return Object(b.jsx)(An,{link:"#/".concat(e.id),children:e.id});case"postref":return Object(b.jsx)(gn,{post:t,thread:n,value:e});case"boardref":return Object(b.jsxs)(An,{link:"#/".concat(e.id),children:[e.board,e.id]});case"spoiler":return Object(b.jsx)(yn,{post:t,thread:n,children:e.value})}}function Cn(e){var t,n=e.post,c=e.thread,a=e.style,r=void 0===a?{}:a;return Object(b.jsx)("div",{className:"block text-left break-words font-sans text-sm max-w-100vw",style:r,children:(t=n.comment,""===t?[]:vn.parse(t).value).map((function(e){return Nn(e,n,c)}))})}var Bn=function(e){var t,n,a=e.thread,r=e.block,s=e.showBoard,i=void 0!==s&&s,j=a.id,u=a.isPinned,h=a.isLocked,x=a.subject,p=a.op,m=a.replyCount,O=a.imageCount,v=a.replies,f=a.board,A=p.image||{ipfsHash:"",isNsfw:!1,isSpoiler:!1},y=A.ipfsHash,w=A.isNsfw,k=A.isSpoiler,N=lt(),C=Object(o.a)(N,1)[0],B=dt(a,null===C||void 0===C||null===(t=C.content_filter)||void 0===t?void 0:t.score_threshold),I=Object(c.useState)(!1),S=Object(o.a)(I,2),E=S[0],T=S[1],D=Object(d.f)(),Q=Object(c.useCallback)((function(){var e=V.thread(a);e&&D.push("".concat(e).concat(r?"?block=".concat(r):""))}),[a,D,r]),P=Object(c.useCallback)((function(){T(!0)}),[T]),F=Object(c.useCallback)((function(){T(!1)}),[T]);return Object(b.jsx)("div",{className:"relative max-w-150px w-full",style:{minHeight:"20rem"},children:Object(b.jsxs)("article",{id:j,className:"dchan-post justify-self-center text-decoration-none leading-4 text-black m-0.5 border-black overflow-hidden max-w-150px break-word w-full place-items-center flex",style:E?{maxWidth:"initial",zIndex:900,marginLeft:"-2rem",marginRight:"-2rem",width:"14rem",position:"absolute"}:{minHeight:"20rem",position:"relative"},onMouseEnter:P,onMouseLeave:F,children:[B&&!E?Object(b.jsxs)("button",{onClick:P,className:"absolute text-2xl text-gray-800 top-0 left-0 right-0 bottom-0",children:[Object(b.jsx)("div",{children:"\u26a0\ufe0f"}),Object(b.jsx)("div",{children:"Post hidden due to reports."}),Object(b.jsx)("div",{className:"text-sm text-gray-600",children:"Click to show anyway."})]}):"",Object(b.jsx)("button",{className:"h-full w-full",onClick:Q,children:Object(b.jsxs)("div",{className:[E?"relative top-0 z-10 bg-tertiary border border-black h-full":"absolute top-0 right-0",!E&&B?"dchan-censor":""].join(" "),style:{maxHeight:"initial"},children:[Object(b.jsxs)("div",{className:"absolute top-0 right-0 z-10",children:[u?Object(b.jsx)("span",{title:"Thread pinned. This might be important.",children:"\ud83d\udccc"}):"",h?Object(b.jsx)("span",{title:"Thread locked. You cannot post.",children:"\ud83d\udd12"}):""]}),!y||B&&!E?"":Object(b.jsx)("div",{children:Object(b.jsx)(en,{className:"w-full pointer-events-none shadow-xl object-contain max-h-320px",hash:y,expandable:!1,thumbnail:!1,isSpoiler:k,isNsfw:w||(null===(n=a.board)||void 0===n?void 0:n.isNsfw)||!1})}),Object(b.jsxs)("div",{className:"p-1",children:[i&&f?Object(b.jsxs)("div",{children:["/",Object(b.jsx)(te,{board:f}),"/"]}):"",Object(b.jsxs)("div",{children:["R:",Object(b.jsx)("strong",{children:m}),", I:",Object(b.jsx)("strong",{children:O})]}),Object(b.jsxs)("div",{className:"word-wrap",children:[Object(b.jsx)("div",{children:Object(b.jsx)("strong",{children:x})}),Object(b.jsx)(Cn,{style:{minWidth:E?"12rem":"initial",textAlign:"center"},post:p}),E&&v&&Object(ve.a)(v).reverse().map((function(e){return Object(b.jsxs)("div",{className:"mt-1 p-1 border-0 border-t border-black border-solid text-xs text-left",children:[Object(b.jsx)("div",{children:g.DateTime.fromSeconds(parseInt(e.createdAtBlock.timestamp)).toRelative()}),Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"".concat(V.post(e)||"").concat(r?"?block=".concat(r):""),children:Object(b.jsx)(Cn,{post:e})})]},e.id)}))]})]})]})})]})})};function In(e){var t=e.threads,n=e.block,c=e.showBoard,a=void 0!==c&&c;return Object(b.jsx)("div",{className:"grid grid-template-columns-ram-150px place-items-start font-size-090rem px-4 sm:px-8",children:t.filter((function(e){return!!e&&!!e.board})).map((function(e){return Object(b.jsx)(Bn,{thread:e,block:n,showBoard:a},e.id)}))})}function Sn(e,t){var n=e.score;return parseInt(n)/1e9<parseInt("".concat(t||1))}function En(e){var t,n,a=e.post,r=e.thread,s=e.backlinks,i=e.children,d=a.id,j=a.n,u=a.name,h=a.from.address,x=a.createdAtBlock.timestamp,p=je(),v=p.provider,f=p.accounts,A=vt().publish,w=lt(),k=Object(o.a)(w,1)[0],N=me().isJannyOf,C=f.length>0&&f[0]===h,B=Object(c.useState)(),I=Object(o.a)(B,2),S=I[0],E=I[1],T=y(x),D=!!(null===r||void 0===r||null===(t=r.board)||void 0===t?void 0:t.id)&&N(r.board.id),Q=Object(c.useCallback)((function(e,t){A("FORM_QUOTE",{from:e,n:t})}),[A]),P=Object(c.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=n||parseFloat(prompt("How much? (MATIC)")||""),!isNaN(n)){e.next=5;break}return alert("Invalid amount"),e.abrupt("return");case 5:return e.next=7,z(f[0],t,n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error({onSendTipError:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[f]),F=Object(c.useCallback)((function(e){A("POST_FOCUS",e)}),[A]),L=null===r||void 0===r?void 0:r.isPinned,_=null===r||void 0===r?void 0:r.isLocked,H=d===(null===r||void 0===r?void 0:r.id),M=H&&D,q=C||D,W=D,R=H&&(C||D),Y=s?Object.values(s):[];return Object(b.jsxs)("span",{className:"max-w-95vw inline-flex flex-wrap items-center",children:[Object(b.jsx)("span",{className:"px-0.5 whitespace-nowrap",children:Object(b.jsx)("span",{className:"text-accent font-bold",children:u&&""!==u?u:"Anonymous"})}),Object(b.jsxs)("span",{className:"px-1 whitespace-nowrap text-sm",children:["(ID: ",Object(b.jsx)(K,{etherscannable:!0,address:h}),v?Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 flex-grow opacity-10 hover:opacity-100",title:"Send MATIC tip",onClick:function(){return P(h)},children:"\ud83d\udcb8"}):"",")"]}),Object(b.jsxs)("span",{className:"px-0.5 whitespace-nowrap text-xs",children:[T.toLocaleString(g.DateTime.DATETIME_SHORT)," (",T.toRelative(),")"]}),Object(b.jsxs)("span",{className:"px-0.5 on-parent-target-font-bold text-sm whitespace-nowrap",children:[Object(b.jsx)("button",{onClick:function(){return F(a)},title:"Link to this post",children:"No."}),Object(b.jsx)("button",{title:"Reply to this post",onClick:function(){return Q(a.from.id,a.n)},children:j})]}),Object(b.jsxs)("span",{children:[H&&L?Object(b.jsx)("span",{title:"Thread pinned. This might be important.",children:"\ud83d\udccc"}):Object(b.jsx)("span",{}),H&&_?Object(b.jsx)("span",{title:"Thread locked. You cannot reply anymore.",children:"\ud83d\udd12"}):Object(b.jsx)("span",{}),Sn(a,null===k||void 0===k||null===(n=k.content_filter)||void 0===n?void 0:n.score_threshold)?Object(b.jsx)("span",{title:"Post hidden due to reports. Click to show anyway.",children:"\u26a0\ufe0f"}):Object(b.jsx)("span",{})]}),f&&f[0]?Object(b.jsxs)(xt,{children:[R?Object(b.jsx)("div",{children:r&&r.isLocked?Object(b.jsxs)("span",{children:[Object(b.jsx)("input",{name:"lock",type:"hidden",value:"false"}),Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return ze.apply(this,arguments)}(d,f,E)},children:"\ud83d\udd13 Unlock"})]}):Object(b.jsxs)("span",{children:[Object(b.jsx)("input",{name:"lock",type:"hidden",value:"true"}),Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return Me.apply(this,arguments)}(d,f,E)},children:"\ud83d\udd12 Lock"})]})}):"",M?Object(b.jsx)("div",{children:r&&r.isPinned?Object(b.jsxs)("span",{children:[Object(b.jsx)("input",{name:"sticky",type:"hidden",value:"false"}),Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return We.apply(this,arguments)}(d,f,E)},children:"\ud83d\udccc Unpin"})]}):Object(b.jsxs)("span",{children:[Object(b.jsx)("input",{name:"sticky",type:"hidden",value:"true"}),Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return qe.apply(this,arguments)}(d,f,E)},children:"\ud83d\udccc Pin"})]})}):"",q?Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return De.apply(this,arguments)}(d,f,E)},children:"\u274c Remove"})}):"",W?Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return Re.apply(this,arguments)}(d,f,E)},children:"\ud83d\udd2b Ban"})}):"",Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){return function(e,t,n){return Qe.apply(this,arguments)}(d,f,E)},children:"\u26a0\ufe0f Report"})})]}):"",Object(b.jsx)("span",{className:"px-0.5 text-xs opacity-10 hover:opacity-100",children:Object(b.jsx)(l.b,{to:"/".concat(a.id),title:"Permalink",children:"\ud83d\udd17"})}),i,Object(b.jsx)("span",{className:"dchan-backlinks text-sm",children:null===Y||void 0===Y?void 0:Y.map((function(e){return Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 px-1",onClick:function(){return F(e)},onMouseEnter:function(){return A("POST_HIGHLIGHT",e.id)},onMouseLeave:function(){return A("POST_DEHIGHLIGHT",e.id)},children:">>".concat(e.n)},e.id)}))}),Object(b.jsx)(ht,{status:S})]})}var Tn=n(373),Dn=n.n(Tn);function Qn(e){var t,n,a=e.children,r=e.post,s=e.thread,i=e.header,l=e.enableBacklinks,j=void 0!==l&&l,u=Object(d.f)(),h=Object(c.useState)(!1),x=Object(o.a)(h,2),p=x[0],m=x[1],O=Object(c.useState)(!1),v=Object(o.a)(O,2),f=v[0],A=v[1],g=Object(c.useState)({}),y=Object(o.a)(g,2),w=y[0],k=y[1],N=Object(c.useRef)(null),C=vt(),B=C.subscribe,I=C.unsubscribe,S=r.id,E=r.from.id,T=r.n,D=r.image,Q=r.bans,P=r.comment,F=Object(c.useCallback)((function(){var e;A(!0),null===(e=N.current)||void 0===e||e.scrollIntoView();var t=V.post(r);t&&u.push(t)}),[r,N,u,A]);Object(c.useEffect)((function(){var e=B("POST_FOCUS",(function(e,t){var n=Object(Z.isArray)(t)?!!t.find((function(e){return r.id===e.id})):r.id===t.id;A(n),n&&F()}));return function(){I(e)}})),Object(c.useEffect)((function(){if(j){var e=B("POST_BACKLINK",(function(e,t){var n=t.from,c=t.to.n;"".concat(c)==="".concat(r.n)&&k(Object(xe.a)(Object(xe.a)({},w),{},Object(Jt.a)({},n.id,n)))}));return function(){e&&I(e)}}}));var L=D?"https://ipfs.io/ipfs/".concat(D.ipfsHash):"",_=S===(null===s||void 0===s?void 0:s.id),H=lt(),M=Object(o.a)(H,1)[0],z=!Sn(r,null===M||void 0===M||null===(t=M.content_filter)||void 0===t?void 0:t.score_threshold)||(null===M||void 0===M||null===(n=M.content_filter)||void 0===n?void 0:n.show_below_threshold)||p,q=Vt(),W=q.isFavorite,R=q.addFavorite,Y=q.removeFavorite,U=!(!s||!W)&&W(s),J=Object(c.useCallback)((function(){s&&Y&&R&&(U?Y(s):R(s))}),[R,Y,s,U]);return Object(b.jsxs)("div",{className:"flex max-w-100vw",children:[_?"":Object(b.jsx)("span",{className:"hidden sm:block pl-2 text-secondary",children:">>"}),Object(b.jsxs)("details",{className:"dchan-post-expand sm:mx-2 text-left inline",open:z,ref:N,children:[Object(b.jsxs)("summary",{className:"text-left opacity-50 z-10 whitespace-nowrap max-w-95vw overflow-hidden",title:"Hide/Show",children:[Object(b.jsx)(En,{thread:s,post:r,children:i}),Object(b.jsx)("span",{children:Dn()((null===s||void 0===s?void 0:s.subject)||P,{allowedTags:[]})})]}),Object(b.jsx)("article",{id:"".concat(T),className:"dchan-post text-left w-full","dchan-post-from-address":E,children:Object(b.jsxs)("div",{className:"".concat(_?"":"bg-secondary"," ").concat(f?"bg-tertiary":""," w-full sm:w-auto pb-2 mb-2 px-4 inline-block border-bottom-invisible relative max-w-screen-xl"),children:[Object(b.jsxs)("div",{className:"flex sm:flex-wrap center text-center sm:text-left sm:block max-w-90vw",children:[_&&s?Object(b.jsx)("button",{className:"inline-block ".concat(U?"opacity-60 hover:opacity-80":"opacity-20 hover:opacity-40"),title:U?"Remove from favorites":"Add to favorites",onClick:J,children:"\u2b50"}):Object(b.jsx)("span",{}),Object(b.jsx)(En,{thread:s,post:r,backlinks:w,children:i})]}),z?Object(b.jsxs)("div",{children:[D?Object(b.jsx)("div",{className:"text-center sm:text-left",children:Object(b.jsx)("span",{className:"text-sm",children:Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{target:"_blank",rel:"noreferrer",className:"text-blue-600 max-w-64",href:L,title:D.name,children:Object(Z.truncate)(D.name,{length:32,omission:"..."})}),Object(b.jsxs)("span",{className:"px-1",children:["(",Math.trunc(.001*parseInt(D.byteSize)),"kb)"]}),Object(b.jsx)("span",{className:"px-1 text-gray-400 hover:text-gray-600",children:Object(b.jsx)("small",{children:D.ipfsHash})})]})})}):"",Object(b.jsxs)("div",{className:"y-1",children:[Object(b.jsxs)("div",{className:"h-full max-w-max flex flex-wrap text-left sm:items-start ".concat(_?"pb-2":""),children:[D?Object(b.jsx)(en,{hash:D.ipfsHash,isSpoiler:D.isSpoiler,isNsfw:D.isNsfw,thumbnail:!0,expandable:!0}):"",Object(b.jsxs)("span",{className:"px-2",children:[Object(b.jsx)("div",{children:_&&s?Object(b.jsx)("span",{className:"font-semibold",children:s.subject}):""}),Object(b.jsx)("div",{children:Object(b.jsx)(Cn,{post:r,thread:s})}),Q.length>0?Object(b.jsx)("div",{className:"text-xl font-bold text-contrast whitespace-nowrap",children:"( USER WAS BANNED FOR THIS POST )"}):""]})]}),a]})]}):Object(b.jsxs)("button",{onClick:function(){return m(!0)},className:"text-2xl text-gray-800",children:[Object(b.jsx)("div",{children:"\u26a0\ufe0f"}),Object(b.jsx)("div",{children:"Post hidden due to reports."}),Object(b.jsx)("div",{className:"text-sm text-gray-600",children:"Click to show anyway."})]})]})})]},S)]})}var Pn,Fn,Ln=n(790),_n=Object(C.a)(Pn||(Pn=Object(N.a)(["\n  ","\n  \n  query BoardGet($board: String!, $block: Int!) {\n    board(id: $board, block: {number: $block}) {\n      ...Board\n    }\n  }\n"])),Ce);function Hn(e){var t,n,a,r,s=e.location,i=e.match.params,j=i.board_id;j=j?"0x".concat(j):void 0;var u=tt().lastBlock,h=Object(Xe.parse)(s.search),x=parseInt("".concat(h.page||"1")),p=parseInt("".concat(h.block)),m=isNaN(p)?parseInt("".concat((null===u||void 0===u?void 0:u.number)||"0")):p,O=h.date?g.DateTime.fromISO(h.date):void 0,v=Object(d.f)(),f=lt(),y=Object(o.a)(f,1)[0],w=i.view_mode||(null===y||void 0===y||null===(t=y.content_view)||void 0===t?void 0:t.board_default_view_mode)||"catalog",k=(null===y||void 0===y||null===(n=y.content_view)||void 0===n?void 0:n.board_sort_threads_by)||"lastBumpedAt",N=parseInt("".concat((null===y||void 0===y||null===(a=y.content_view)||void 0===a?void 0:a.page_size)||"100")),C={board:j,block:m,orderBy:k,orderDirection:(null===y||void 0===y||null===(r=y.content_view)||void 0===r?void 0:r.board_sort_direction)||"desc",limit:N,skip:N*(x-1)},B=Object(A.a)(ot,{variables:C}),I=B.refetch,S=B.data,T=B.loading,D=Object(A.a)(_n,{variables:{board:j,block:m}}).data,Q=null===D||void 0===D?void 0:D.board,P=Object(c.useMemo)((function(){return[].concat(Object(ve.a)((null===S||void 0===S?void 0:S.pinned)||[]),Object(ve.a)((null===S||void 0===S?void 0:S.threads)||[]))}),[S]);Object(c.useEffect)((function(){I()}),[m,k,I]);var F=(P||[]).filter((function(e){var t,n;return(null===y||void 0===y||null===(t=y.content_filter)||void 0===t?void 0:t.show_below_threshold)||!dt(e,null===y||void 0===y||null===(n=y.content_filter)||void 0===n?void 0:n.score_threshold)})),L=Math.max(Math.ceil(Q?parseInt("".concat(Q.threadCount))/N:0),1);return Object(Ln.a)(Q?"/".concat(Q.name,"/ - dchan.network - [").concat(Q.id,"]"):"/".concat(j,"/ - Loading... - dchan.network")),Object(b.jsxs)("div",{className:"bg-primary min-h-100vh",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)(Xt,{board:Q,block:p,dateTime:O,baseUrl:Q?V.board(Q,w):void 0,summary:T?Object(b.jsx)("span",{children:"..."}):Object(b.jsxs)("span",{children:["Threads: ",P.length," (Hidden:"," ",P.length-F.length,"), Posts: ",null===Q||void 0===Q?void 0:Q.postCount]}),onRefresh:I}),Object(b.jsxs)("div",{children:[T&&!S?Object(b.jsx)("div",{className:"center grid min-h-50vh",children:Object(b.jsx)(ke,{})}):Q&&P?0===P.length?Object(b.jsx)("div",{className:"center grid p-8",children:"No threads."}):Object(b.jsx)("div",{children:{catalog:Object(b.jsx)(In,{threads:F,block:p}),index:Object(b.jsx)("div",{children:P.map((function(e){return Object(b.jsx)("div",{className:"border-solid border-black py-2 border-b border-secondary",children:Object(b.jsxs)(Qn,{post:e.op,thread:e,header:Object(b.jsx)("span",{children:Object(b.jsxs)("span",{className:"p-1",children:["[",Object(b.jsx)(l.b,{to:"".concat(V.thread(e)).concat(p?"?block=".concat(p):""),className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",children:"Reply"}),"]"]})}),children:[Object(b.jsx)("div",{className:"text-left pl-8",children:parseInt(e.replyCount)>1+e.replies.length?Object(b.jsxs)(l.b,{to:"".concat(V.thread(e)).concat(p?"?block=".concat(p):""),className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",children:["+"," ",parseInt(e.replyCount)-e.replies.length," ","replies omitted"]}):""}),Object(ve.a)(e.replies).reverse().map((function(t){return Object(b.jsx)(Qn,{post:t,thread:e},t.id)}))]},e.op.id)},e.id)}))})}[w]}):Object(b.jsx)("div",{}),Q?Object(b.jsxs)("div",{children:[Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"p-2",children:[Object(b.jsx)("span",{children:x>1?Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 px-2",to:"".concat(V.board(Q,w),"?page=1").concat(p?"&block=".concat(p):""),children:"<<"}):""}),Object(b.jsx)("span",{children:x>1?Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 px-2",to:"".concat(V.board(Q,w),"?page=").concat(x-1).concat(p?"&block=".concat(p):""),children:"<"}):""}),Object(b.jsxs)("span",{children:["[",Object(b.jsxs)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 px-2",onClick:function(){var e=prompt("Page number: (range: 1-".concat(L,")")),t=parseInt(e||"");isNaN(t)||t<1||t>L?alert("Invalid page number: ".concat(e)):v.push("".concat(V.board(Q,w),"?page=").concat(t).concat(p?"&block=".concat(p):""))},children:["Page ",x," of ",L]}),"]"]}),Object(b.jsx)("span",{children:x<L?Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 px-2",to:"".concat(V.board(Q,w),"?page=").concat(x+1).concat(p?"&block=".concat(p):""),children:">"}):""}),Object(b.jsx)("span",{children:x<L?Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 px-2",to:"".concat(V.board(Q,w),"?page=").concat(L).concat(p?"&block=".concat(p):""),children:">>"}):""})]}),Object(b.jsx)(ut,{to:"#board-header",label:"Top"})]}):""]})]}),Object(b.jsx)(E,{showContentDisclaimer:!0})]})}var Mn,zn=Object(C.a)(Fn||(Fn=Object(N.a)(["\n  ","\n\n  query PostsGetLast {\n    posts(orderBy: createdAt, orderDirection: desc, first: 10) {\n      ...Post\n    }\n  }\n"])),rt);function qn(e){var t,n,c,a,r=e.post;return Object(b.jsx)("div",{className:"p-2 flex flex-wrap",children:Object(b.jsx)(Qn,{post:r,header:Object(b.jsxs)("span",{children:[Object(b.jsxs)("span",{className:"p-1 whitespace-nowrap",children:["[",Object(b.jsx)("span",{className:"p-1",children:Object(b.jsxs)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 inline",to:"/".concat(null===(t=r.board)||void 0===t?void 0:t.name,"/").concat(null===(n=r.board)||void 0===n?void 0:n.id),children:["/",null===(c=r.board)||void 0===c?void 0:c.name,"/",Object(b.jsx)(fe,{id:(null===(a=r.board)||void 0===a?void 0:a.id)||"0x000000"})]})}),"]"]}),Object(b.jsxs)("span",{className:"p-1 whitespace-nowrap",children:["[",Object(b.jsx)(l.b,{to:"/".concat(r.id),className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 inline",children:"View"}),"]"]})]})},r.id)})}function Wn(){var e,t={query:zn}.query,n=Object(A.a)(t,{pollInterval:3e4}),c=n.loading,a=n.data;return Object(b.jsx)(j,{className:"max-w-100vw",title:Object(b.jsx)("span",{children:"Latest Posts"}),children:Object(b.jsx)("div",{children:c&&!a?Object(b.jsx)(ke,{}):null===a||void 0===a||null===(e=a.posts)||void 0===e?void 0:e.map((function(e){return Object(b.jsx)(qn,{post:e})}))})})}function Rn(){var e={query:ne}.query,t=Object(A.a)(e,{pollInterval:3e4}),n=t.loading,c=t.data;return Object(b.jsx)(j,{className:"min-w-32rem p-2",title:Object(b.jsx)("span",{children:"Popular boards"}),children:Object(b.jsxs)("div",{children:[Object(b.jsx)(we,{loading:n,boards:null===c||void 0===c?void 0:c.boards}),Object(b.jsxs)("div",{className:"p-4",children:["[",Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500 py-1 px-4",to:"/_/boards",children:"More boards"}),"]"]})]})})}var Yn,Un=Object(C.a)(Mn||(Mn=Object(N.a)(["\n  ","\n\n  query Threads {\n    threads(orderBy: replyCount, orderDirection: desc, first: 10) {\n      ...Thread\n    }\n  }\n"])),it);function Jn(){var e={query:Un}.query,t=Object(A.a)(e,{pollInterval:3e4}),n=t.loading,c=t.data;return Object(b.jsx)(j,{className:"w-100vw max-w-initial p-2",title:Object(b.jsx)("span",{children:"Popular threads"}),children:n?Object(b.jsx)(ke,{}):Object(b.jsx)(In,{threads:(null===c||void 0===c?void 0:c.threads)||[],showBoard:!0})})}function Vn(){return Object(Ln.a)("dchan.network"),Object(b.jsxs)("div",{className:"center-grid w-full min-h-screen bg-primary",children:[Object(b.jsxs)("div",{className:"flex flex-wrap center",children:[Object(b.jsx)(j,{title:Object(b.jsx)("a",{className:"color-black",href:"/",children:"dchan.network"}),children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"p-4 center",children:Object(b.jsx)("img",{className:"animation-spin p-2 w-auto pointer-events-none",src:ae,alt:"dchan"})}),Object(b.jsx)("div",{className:"p-1 text-center",children:Object(b.jsxs)("small",{children:["Use with"," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"//metamask.io",children:"Metamask"})," ","(Desktop) or"," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"//trustwallet.com/",children:"Trust Wallet"})," ","(Mobile)"]})})]})}),Object(b.jsx)("div",{className:"grid center",children:Object(b.jsx)(Rn,{})})]}),Object(b.jsx)(Jn,{}),Object(b.jsx)(Wn,{}),Object(b.jsx)(E,{})]})}var Zn,Xn=Object(C.a)(Yn||(Yn=Object(N.a)(["\n  query ChanStatus($id: String!) {\n    chanStatus(id: $id) {\n      isLocked\n    }\n  }\n"]))),Gn=n.p+"static/media/poopie.57245890.png";function Kn(){var e,t,n,c=lt(),a=Object(o.a)(c,1)[0],r=Object(A.a)(Xn,{variables:{id:(null===a||void 0===a||null===(e=a.contract)||void 0===e?void 0:e.address)||""},skip:!(null===a||void 0===a||null===(t=a.contract)||void 0===t?void 0:t.address)}).data;return(null===r||void 0===r||null===(n=r.chanStatus)||void 0===n?void 0:n.isLocked)?Object(b.jsx)("div",{className:"bg-primary relative",style:{height:"100000vh"},children:Object(b.jsx)("div",{className:"center grid",children:Object(b.jsx)(j,{title:Object(b.jsx)("div",{className:"text-red-500 text-4xl",children:"UH OH"}),children:Object(b.jsxs)("div",{className:"center grid",children:[Object(b.jsx)("img",{src:Gn,alt:"poopie"}),Object(b.jsxs)("div",{className:"p-4",children:[Object(b.jsx)("div",{className:"text-md",children:"Someone made a stinky and dchan got locked."}),Object(b.jsx)("div",{className:"text-sm",children:"Hopefully it wasn't you."})]})]})})})}):Object(b.jsx)("span",{})}var $n,ec=Object(C.a)(Zn||(Zn=Object(N.a)(["\n  ","\n  \n  query PostSearch($search: String!, $block: Int!) {\n    postSearch(text: $search, orderBy: createdAt, orderDirection: desc, block: {number: $block}) {\n      ...Post\n    }\n  }\n"])),rt);function tc(e){var t=e.location,n=(e.match.params,Object(Xe.parse)(t.search)),a=n.s||n.search,r=Object(Z.isString)(a)?a:"",s=tt().lastBlock,i=n.date?g.DateTime.fromISO(n.date):void 0,d=parseInt("".concat(n.block||(null===s||void 0===s?void 0:s.number)||"")),j=lt(),u=Object(o.a)(j,1)[0],h={block:d,search:r.length>1?"".concat(r,":*"):""},x=Object(A.a)(ec,{variables:h,pollInterval:6e4}),p=x.refetch,m=x.data,O=x.loading,v=null===m||void 0===m?void 0:m.postSearch,f=Object(c.useMemo)((function(){return(e=v?v.filter((function(e){return e&&e.thread&&e.board})):[])&&e.length>0?Object(Z.reverse)(Object(Z.sortBy)(e,["createdAtBlock"])):void 0;var e}),[v]);return Object(c.useEffect)((function(){p()}),[r,d,p]),Object(b.jsxs)("div",{className:"bg-primary min-h-100vh","data-theme":"blueboard",children:[Object(b.jsx)(Xt,{dateTime:i,block:d,search:r,baseUrl:V.posts(),summary:f?Object(b.jsxs)("span",{children:["Found: ",f.length," posts (Hidden:"," ",f.filter((function(e){var t;return Sn(e,null===u||void 0===u||null===(t=u.content_filter)||void 0===t?void 0:t.score_threshold)})).length,")"]}):Object(b.jsx)("span",{children:"..."}),onRefresh:p}),Object(b.jsx)("div",{children:O?Object(b.jsx)("div",{className:"center grid",children:Object(b.jsx)(ke,{})}):f&&f.length?Object(b.jsx)("div",{children:Object(b.jsx)("div",{children:null===f||void 0===f?void 0:f.map((function(e){var t,n,c,a;return Object(b.jsx)("div",{className:"p-2 flex flex-wrap",children:Object(b.jsx)(Qn,{post:e,header:Object(b.jsxs)("span",{children:[Object(b.jsxs)("span",{className:"p-1",children:["[",Object(b.jsx)("span",{className:"p-1",children:Object(b.jsxs)(l.b,{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",to:"/".concat(null===(t=e.board)||void 0===t?void 0:t.name,"/").concat(null===(n=e.board)||void 0===n?void 0:n.id),children:["/",null===(c=e.board)||void 0===c?void 0:c.name,"/",Object(b.jsx)(fe,{id:(null===(a=e.board)||void 0===a?void 0:a.id)||"0x000000"})]})}),"]"]}),Object(b.jsxs)("span",{className:"p-1",children:["[",Object(b.jsx)(l.b,{to:"/".concat(e.id),className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",children:"View"}),"]"]})]})},e.id)})}))})}):"No results"}),Object(b.jsx)(E,{showContentDisclaimer:!0})]})}function nc(e){var t=e.subject,n=e.children;return Object(b.jsx)("div",{className:"font-family-arial text-center",children:Object(b.jsx)("div",{className:"grid center min-h-100vh",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"text-4xl text-contrast font-weight-800 font-family-tahoma m-4",children:t}),Object(b.jsx)("div",{className:"grid center m-4",children:n}),Object(b.jsx)("div",{children:Object(b.jsx)(u,{})}),Object(b.jsx)("div",{children:Object(b.jsx)(l.b,{className:"text-blue-600 visited:text-purple-600 m-4",to:"/",children:"Go home"})})]})})})}var cc,ac=Object(C.a)($n||($n=Object(N.a)(["\n  fragment Board on Board {\n    id\n    name\n  }\n\n  fragment Thread on Thread {\n    id\n    n\n    board {\n      ...Board\n    }\n    op {\n      from {\n        id\n        address\n      }\n    }\n  }\n\n  fragment Post on Post {\n    id\n    n\n    from {\n      id\n    }\n    board {\n      ...Board\n    }\n    thread {\n      ...Thread\n    }\n  }\n\n  query SearchByRef($id: String!, $post_n: BigInt!) {\n    threads(where: {board: $id, n: $post_n}) {\n      ...Thread\n    }\n    posts(where: {from: $id, n: $post_n}) {\n      ...Post\n    }\n  }\n"])));function rc(e){var t=e.match.params,n=Object(c.useState)(),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(d.f)(),l="0x".concat(t.id),j=t.post_n,u=Object(A.a)(ac,{variables:{id:l,post_n:j}}),h=u.loading,x=u.data;return Object(c.useEffect)((function(){if(x){var e=null,t=null,n=null,c=x.threads,a=x.posts;c&&c.length>0?t=c[0]:a&&a.length>0&&(n=a[0]),t?e="".concat(V.thread(t)):n&&(e="".concat(V.post(n))),!t&&!n||e||s("Content not found. It may have been deleted, or the ID is invalid."),e&&i.replace(e)}}),[i,x]),Object(b.jsx)("div",{className:"bg-primary center grid w-screen h-screen",children:r?Object(b.jsx)(nc,{subject:"Not found",children:Object(b.jsx)("span",{children:r})}):Object(b.jsxs)("div",{children:[h?Object(b.jsx)(ke,{}):Object(b.jsx)(nc,{subject:"Content not found",children:Object(b.jsx)("span",{children:"It may have been deleted, or the ID is invalid."})}),Object(b.jsxs)("div",{className:"text-xs",children:[l,"/",j]})]})})}function sc(){return Object(Ln.a)("Rules - dchan.network"),Object(b.jsx)("div",{className:"center grid w-full min-h-screen bg-primary",children:Object(b.jsxs)("div",{className:"grid bg-primary",children:[Object(b.jsx)(j,{title:Object(b.jsx)("span",{children:"The rules"}),children:Object(b.jsx)("div",{className:"p-8",children:Object(b.jsxs)("ul",{className:"list-disc text-wrap text-left",children:[Object(b.jsx)("li",{children:"Do not post anything that can get you in trouble with local or global jurisdictions."}),Object(b.jsx)("li",{children:"Be decent."})]})})}),Object(b.jsx)(h,{})]})})}function ic(){return Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600",href:"//thegraph.com/",target:"_blank",rel:"noreferrer",children:"The Graph"})," ",Object(b.jsxs)("span",{className:"text-xs",children:["(ticker:"," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600",href:"//www.coingecko.com/en/coins/the-graph",target:"_blank",rel:"noreferrer",children:"GRT"}),")"]})]})}function oc(){return Object(Ln.a)("FAQ - dchan.network"),Object(b.jsx)("div",{className:"center grid w-full min-h-screen bg-primary",children:Object(b.jsxs)("div",{className:"grid bg-primary",children:[Object(b.jsx)(j,{title:Object(b.jsx)("span",{children:"FAQ"}),children:Object(b.jsxs)("div",{className:"text-left p-8 text-sm",children:[Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: What is this?"}),Object(b.jsx)("div",{children:"This is dchan, a decentralized, uncensorable, time-traveling imageboard."})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Decentralized?"}),Object(b.jsxs)("div",{children:["dchan is a Web3 imageboard whose posts and images are respectively stored on Polygon's blockchain and on IPFS, using"," ",Object(b.jsx)(ic,{})," to index and serve the content in a decentralized manner."]})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Uncensorable?"}),Object(b.jsx)("div",{children:"Since dchan users write their posts on the blockchain and upload their images to IPFS, there is no way for anyone, including the original poster and dchan's admins, to ever delete any of that content. dchan's admins and janitors are able to remove any offending content from view, but the content will still be retrievable."})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Time-Traveling?"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(ic,{})," is capable of obtaining data as it was at any point in time, and dchan makes use of this to allow you to read dchan's boards and threads exactly as they were whenever in the past. This also means that there is no need for an archive, as it is already built in the protocol."]})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Imageboard?"}),Object(b.jsx)("div",{children:"dchan is a simple image-based bulletin board where anyone can post comments, share images and create boards. It is heavily inspired by 4chan, with the most fundamental difference being that users are pseudonymous rather than anonymous."})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Pseudonymous users?"}),Object(b.jsx)("div",{children:"Since posts are written directly on the blockchain, they are plainly tied to the address sending the transaction, making it impossible to prevent other users from finding out what address posted a specific post. Therefore, in order to avoid creating a sense of false anonymity, dchan's posts publicize the poster's address, effectively acting as the poster's unique public pseudonym."})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Is it free?"}),Object(b.jsxs)("div",{children:["Yes, but you'll still need to pay the MATIC gas fee for your interactions' transactions. If you don't have any but still want to try it out, you can get some free MATIC from"," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600",href:"https://matic.supply/",target:"_blank",rel:"noreferrer",children:"the faucet"}),", which will let you post a couple times."]})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Do you sell tokens?"}),Object(b.jsx)("div",{children:"dchan does not require any token to function (except MATIC for sending txs), so no tokens are sold. For now. tl;dr Token not needed."})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: How do I post?"}),Object(b.jsxs)("div",{children:["You'll need to install"," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"//metamask.io",children:"Metamask"})," ","(if you're on Desktop) or"," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",href:"//trustwallet.com/",children:"Trust Wallet"})," ","(if you're on Mobile). Connect your wallet to this website and then you'll be able to post."]})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Why did you choose Polygon instead of *insert chain name here*?"}),Object(b.jsx)("div",{children:"As I'm writing this (Sep. 2021), Polygon's L2 chain currently offers the best compromise between security, speed and price per tx. Other solutions might have been better for some reason, but had a tradeoff that made them not viable. (For example, Arbitrum's instantaneous transactions also cost 10000x more compared to Polygon)."})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsx)("strong",{children:"Q: Why did you do this?"}),Object(b.jsxs)("div",{children:["dchan was born in a 4chan /biz/ thread after some anon pitched the idea to use ",Object(b.jsx)(ic,{})," to create a decentralized imageboard. It was mainly a technical challenge to see if it was possible. And it was."]})]}),Object(b.jsxs)("div",{className:"pb-2",children:[Object(b.jsxs)("strong",{children:["Q: What is ",Object(b.jsx)(ic,{})," anyway?"]}),Object(b.jsxs)("div",{children:["It's a decentralized network that allows you to read the blockchain and expose its data however you need."," ",Object(b.jsx)("a",{className:"text-blue-600 visited:text-purple-600",href:"//thegraph.com/",target:"_blank",rel:"noreferrer",children:"Go to their website"})," ","to learn more."]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("strong",{children:"Q: Who are you?"}),Object(b.jsxs)("div",{children:["I am ",Object(b.jsx)(K,{address:"0x22a973417575E3EA73dD26220aeFe78c16742b33"})]})]})]})}),Object(b.jsx)(h,{})]})})}var lc,dc,bc=Object(C.a)(cc||(cc=Object(N.a)(["\n  ","\n  ","\n  ","\n  \n  query Thread($board: String!, $n: String!, $block: Int!) {\n    board(id: $board) {\n      ...Board\n    }\n    posts(first: 1, where: {board: $board, n: $n}, block: {number: $block}) {\n      ...Post\n    }\n    threads(first: 1, where: {board: $board, n: $n}, block: {number: $block}) {\n      ...Thread\n      replies(orderBy: n) {\n        ...Post\n      }\n    }\n  }\n"])),Ce,it,rt),jc=Object(C.a)(lc||(lc=Object(N.a)(["\n  ","\n  ","\n  ","\n  \n  query Thread($board: String!, $n: String!) {\n    board(id: $board) {\n      ...Board\n    }\n    posts(first: 1, where: {board: $board, n: $n}) {\n      ...Post\n    }\n    threads(first: 1, where: {board: $board, n: $n}) {\n      ...Thread\n      replies(orderBy: n) {\n        ...Post\n      }\n    }\n  }\n"])),Ce,it,rt);function uc(e){var t,n,a=e.location,r=e.match.params,s=r.board_id;s=s?"0x".concat(s):void 0;var i=Object(d.f)(),o=vt().publish,l=Object(Xe.parse)(a.search),j=parseInt("".concat(l.block)),u=l.date?g.DateTime.fromISO(l.date):void 0,h=r.focus_user_id?"0x".concat(r.focus_user_id):"",x=r.focus_post_n||"",p={board:s,n:r.thread_n,block:j},m=Object(A.a)(j?bc:jc,{variables:p}),O=m.refetch,v=m.data,f=m.loading,y=null===v||void 0===v||null===(t=v.posts)||void 0===t?void 0:t[0],w=null===v||void 0===v||null===(n=v.threads)||void 0===n?void 0:n[0],k=null===v||void 0===v?void 0:v.board,N=Object(c.useMemo)((function(){return w?[w.op].concat(Object(ve.a)(w.replies)):[]}),[w]);return Object(c.useEffect)((function(){var e=!w&&y?V.post(y):void 0;e&&i.replace("".concat(e).concat(j?"?block=".concat(j):""))}),[i,w,j,y]),Object(c.useEffect)((function(){var e=f||!h&&!x?[]:N.filter((function(e){return(!h||e.from.id===h)&&(!x||e.n===x)}));e.length>0?o("POST_FOCUS",e):!f&&h&&x&&i.replace("/".concat(h,"/").concat(x))}),[N,h,x,f,o,i]),Object(c.useEffect)((function(){O({block:j})}),[j,O]),Object(Ln.a)(k&&w?"/".concat(k.name,"/ - ").concat(w.subject||w.op.comment," - dchan.network - [").concat(w.id,"]"):"/".concat(s,"/ - Loading... - dchan.network")),Object(b.jsxs)("div",{className:"bg-primary min-h-100vh",children:[Object(b.jsx)(Xt,{board:k,thread:w,block:j,dateTime:u,baseUrl:w?V.thread(w):void 0,summary:f?Object(b.jsx)("span",{children:"..."}):Object(b.jsxs)("span",{children:["Posts: ",N.length]}),onRefresh:O}),Object(b.jsx)("div",{children:f&&!v?Object(b.jsx)("div",{className:"center grid",children:Object(b.jsx)(ke,{})}):N&&w?Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:N.map((function(e){return Object(b.jsx)(Qn,{post:e,thread:w,enableBacklinks:!0},e.id)}))}),Object(b.jsx)(ut,{to:"#board-header",label:"Top"})]}):"Post not found."}),Object(b.jsx)(E,{showContentDisclaimer:!!N&&!!w})]})}function hc(){var e=lt(),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(o.a)(r,2),i=s[0],l=s[1],d=Object(c.useCallback)((function(e){l(e.target.checked)}),[l]),u=Object(c.useCallback)((function(){a(Object(xe.a)(Object(xe.a)({},n),{},{eula:Object(xe.a)(Object(xe.a)({},null===n||void 0===n?void 0:n.eula),{},{agreed:i})}))}),[i,n,a]);return Object(b.jsx)("div",{className:"center-grid w-full min-h-screen bg-primary",children:Object(b.jsx)("div",{className:"flex flex-wrap center",children:Object(b.jsx)(j,{title:Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{className:"color-black",href:"/",children:"dchan.network"})," ","EULA"]}),children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"center grid",children:Object(b.jsx)("img",{className:"p-2 w-16 pointer-events-none",src:ae,alt:"dchan"})}),Object(b.jsxs)("div",{className:"p-1 text-left",children:[Object(b.jsx)("div",{className:"p-2",children:"To use dchan, you understand and agree to the following:"}),Object(b.jsx)("div",{className:"p-2",children:"* The content of this website is for mature audiences only and may not be suitable for minors. If you are a minor or it is illegal for you to access mature images and language, do not proceed."}),Object(b.jsxs)("div",{className:"p-2",children:["* Content is presented to you AS IS, with no warranty, express or implied.",Object(b.jsx)("br",{}),'By clicking "I Agree," you agree to accept full responsibility for any damages from your use of the website, and you understand that the content posted is not owned or generated by dchan, but rather by dchan\'s users.']}),Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsxs)("div",{className:"p-2",children:[Object(b.jsx)("input",{id:"dchan-input-agree",className:"mx-1 text-xs whitespace-nowrap opacity-50 hover:opacity-100",type:"checkbox",checked:i,onChange:d}),Object(b.jsx)("label",{htmlFor:"dchan-input-agree",children:"I agree"})]}),Object(b.jsxs)("div",{className:"p-2",children:["[",Object(b.jsx)("button",{className:"text-blue-600 visited:text-purple-600 hover:text-blue-500",disabled:!i,onClick:u,children:"Proceed"}),"]"]})]})]})]})})})})}var xc=Object(C.a)(dc||(dc=Object(N.a)(["\n  ","\n  ","\n  ","\n\n  query SearchById($id: String!) {\n    boardCreationEvent(id: $id) {\n      board {\n        ...Board\n      }\n    }\n    threadCreationEvent(id: $id) {\n      thread {\n        ...Thread\n      }\n    }\n    postCreationEvent(id: $id) {\n      post {\n        ...Post\n      }\n    }\n    board(id: $id) {\n      ...Board\n    }\n    thread(id: $id) {\n      ...Thread\n    }\n    post(id: $id) {\n      ...Post\n    }\n    user(id: $id) {\n      id\n    }\n  }\n"])),Ce,it,rt);function pc(e){var t=e.match.params,n=Object(c.useState)(),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),l=Object(o.a)(i,2),j=l[0],u=l[1];setTimeout((function(){u(!0)}),1e4);var h=Object(d.f)(),x="0x".concat(t.id);console.log({id:x});var p=Object(A.a)(xc,{variables:{id:x},pollInterval:5e3}).data;return Object(c.useEffect)((function(){if(p){var e=null,t=p.boardCreationEvent,n=p.threadCreationEvent,c=p.postCreationEvent,a=p.board,r=p.thread,i=p.post;!a&&t?a=t.board:!r&&n?r=n.thread:!i&&c&&(i=c.post),a?e="".concat(V.board(a)):r?e="".concat(V.thread(r)):i&&(e="".concat(V.post(i))),(a||r||i)&&!e&&s("Content not found. It may have been deleted, or the ID is invalid."),e&&h.replace(e)}}),[h,p]),Object(b.jsx)("div",{className:"bg-primary center grid w-screen h-screen",children:r?Object(b.jsx)(nc,{subject:"Not found",children:Object(b.jsx)("span",{children:r})}):Object(b.jsxs)("div",{children:[Object(b.jsx)(ke,{}),Object(b.jsx)("div",{className:"text-xs",children:x}),Object(b.jsx)("div",{children:j?-1!==x.indexOf("-")?"The requested content is (probably) still being indexed, please wait...":"Are you sure it's a valid ID?":""})]})})}var mc=function(){var e,t=lt(),n=Object(o.a)(t,1)[0];return!1===(null===n||void 0===n||null===(e=n.eula)||void 0===e?void 0:e.agreed)?Object(b.jsx)(hc,{}):Object(b.jsxs)(l.a,{basename:"/",children:[Object(b.jsx)(Kn,{}),Object(b.jsx)("div",{className:"App text-center",children:Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{exact:!0,path:"/",component:Vn}),Object(b.jsx)(d.a,{exact:!0,path:"/_/boards",component:Ke}),Object(b.jsx)(d.a,{path:"/_/faq",component:oc}),Object(b.jsx)(d.a,{path:"/_/rules",component:sc}),Object(b.jsx)(d.a,{path:"/_/abuse",component:x}),Object(b.jsx)(d.a,{path:"/_/admin",component:Oe}),Object(b.jsx)(d.a,{path:"/_/posts",component:tc}),Object(b.jsx)(d.a,{path:"/0x:id/:post_n",component:rc}),Object(b.jsx)(d.a,{path:"/0x:id",component:pc}),Object(b.jsx)(d.a,{path:"/:board_name/0x:board_id/:view_mode(index|catalog)",component:Hn}),Object(b.jsx)(d.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n/0x:focus_user_id/:focus_post_n",component:uc}),Object(b.jsx)(d.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n/0x:focus_user_id",component:uc}),Object(b.jsx)(d.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n/:focus_post_n",component:uc}),Object(b.jsx)(d.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n/:post_n",component:uc}),Object(b.jsx)(d.a,{path:"/:board_name/0x:board_id/0x:user_id/:thread_n",component:uc}),Object(b.jsx)(d.a,{path:"/:board_name/0x:board_id",component:Hn}),Object(b.jsx)(d.a,{exact:!0,path:"/:board_name",component:Ke})]})})]})},Oc=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,798)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(i.a,{client:qt,children:Object(b.jsx)(mc,{})})}),document.getElementById("root")),Oc()}},[[772,1,2]]]);